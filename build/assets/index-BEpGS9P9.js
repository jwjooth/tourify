function jx(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in n)){const a=Object.getOwnPropertyDescriptor(r,o);a&&Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function z0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ip={exports:{}},Ul={},sp={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tw;function Ux(){if(tw)return Ue;tw=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.iterator;function E(z){return z===null||typeof z!="object"?null:(z=_&&z[_]||z["@@iterator"],typeof z=="function"?z:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,x={};function C(z,J,me){this.props=z,this.context=J,this.refs=x,this.updater=me||S}C.prototype.isReactComponent={},C.prototype.setState=function(z,J){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,J,"setState")},C.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function U(){}U.prototype=C.prototype;function B(z,J,me){this.props=z,this.context=J,this.refs=x,this.updater=me||S}var G=B.prototype=new U;G.constructor=B,M(G,C.prototype),G.isPureReactComponent=!0;var Y=Array.isArray,Z=Object.prototype.hasOwnProperty,oe={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function A(z,J,me){var pe,Pe={},De=null,re=null;if(J!=null)for(pe in J.ref!==void 0&&(re=J.ref),J.key!==void 0&&(De=""+J.key),J)Z.call(J,pe)&&!b.hasOwnProperty(pe)&&(Pe[pe]=J[pe]);var Se=arguments.length-2;if(Se===1)Pe.children=me;else if(1<Se){for(var Ne=Array(Se),Oe=0;Oe<Se;Oe++)Ne[Oe]=arguments[Oe+2];Pe.children=Ne}if(z&&z.defaultProps)for(pe in Se=z.defaultProps,Se)Pe[pe]===void 0&&(Pe[pe]=Se[pe]);return{$$typeof:n,type:z,key:De,ref:re,props:Pe,_owner:oe.current}}function N(z,J){return{$$typeof:n,type:z.type,key:J,ref:z.ref,props:z.props,_owner:z._owner}}function L(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function O(z){var J={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(me){return J[me]})}var F=/\/+/g;function R(z,J){return typeof z=="object"&&z!==null&&z.key!=null?O(""+z.key):J.toString(36)}function _e(z,J,me,pe,Pe){var De=typeof z;(De==="undefined"||De==="boolean")&&(z=null);var re=!1;if(z===null)re=!0;else switch(De){case"string":case"number":re=!0;break;case"object":switch(z.$$typeof){case n:case e:re=!0}}if(re)return re=z,Pe=Pe(re),z=pe===""?"."+R(re,0):pe,Y(Pe)?(me="",z!=null&&(me=z.replace(F,"$&/")+"/"),_e(Pe,J,me,"",function(Oe){return Oe})):Pe!=null&&(L(Pe)&&(Pe=N(Pe,me+(!Pe.key||re&&re.key===Pe.key?"":(""+Pe.key).replace(F,"$&/")+"/")+z)),J.push(Pe)),1;if(re=0,pe=pe===""?".":pe+":",Y(z))for(var Se=0;Se<z.length;Se++){De=z[Se];var Ne=pe+R(De,Se);re+=_e(De,J,me,Ne,Pe)}else if(Ne=E(z),typeof Ne=="function")for(z=Ne.call(z),Se=0;!(De=z.next()).done;)De=De.value,Ne=pe+R(De,Se++),re+=_e(De,J,me,Ne,Pe);else if(De==="object")throw J=String(z),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return re}function be(z,J,me){if(z==null)return z;var pe=[],Pe=0;return _e(z,pe,"","",function(De){return J.call(me,De,Pe++)}),pe}function Te(z){if(z._status===-1){var J=z._result;J=J(),J.then(function(me){(z._status===0||z._status===-1)&&(z._status=1,z._result=me)},function(me){(z._status===0||z._status===-1)&&(z._status=2,z._result=me)}),z._status===-1&&(z._status=0,z._result=J)}if(z._status===1)return z._result.default;throw z._result}var we={current:null},$={transition:null},le={ReactCurrentDispatcher:we,ReactCurrentBatchConfig:$,ReactCurrentOwner:oe};function ae(){throw Error("act(...) is not supported in production builds of React.")}return Ue.Children={map:be,forEach:function(z,J,me){be(z,function(){J.apply(this,arguments)},me)},count:function(z){var J=0;return be(z,function(){J++}),J},toArray:function(z){return be(z,function(J){return J})||[]},only:function(z){if(!L(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Ue.Component=C,Ue.Fragment=t,Ue.Profiler=o,Ue.PureComponent=B,Ue.StrictMode=r,Ue.Suspense=f,Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=le,Ue.act=ae,Ue.cloneElement=function(z,J,me){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var pe=M({},z.props),Pe=z.key,De=z.ref,re=z._owner;if(J!=null){if(J.ref!==void 0&&(De=J.ref,re=oe.current),J.key!==void 0&&(Pe=""+J.key),z.type&&z.type.defaultProps)var Se=z.type.defaultProps;for(Ne in J)Z.call(J,Ne)&&!b.hasOwnProperty(Ne)&&(pe[Ne]=J[Ne]===void 0&&Se!==void 0?Se[Ne]:J[Ne])}var Ne=arguments.length-2;if(Ne===1)pe.children=me;else if(1<Ne){Se=Array(Ne);for(var Oe=0;Oe<Ne;Oe++)Se[Oe]=arguments[Oe+2];pe.children=Se}return{$$typeof:n,type:z.type,key:Pe,ref:De,props:pe,_owner:re}},Ue.createContext=function(z){return z={$$typeof:c,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:a,_context:z},z.Consumer=z},Ue.createElement=A,Ue.createFactory=function(z){var J=A.bind(null,z);return J.type=z,J},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(z){return{$$typeof:h,render:z}},Ue.isValidElement=L,Ue.lazy=function(z){return{$$typeof:v,_payload:{_status:-1,_result:z},_init:Te}},Ue.memo=function(z,J){return{$$typeof:m,type:z,compare:J===void 0?null:J}},Ue.startTransition=function(z){var J=$.transition;$.transition={};try{z()}finally{$.transition=J}},Ue.unstable_act=ae,Ue.useCallback=function(z,J){return we.current.useCallback(z,J)},Ue.useContext=function(z){return we.current.useContext(z)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(z){return we.current.useDeferredValue(z)},Ue.useEffect=function(z,J){return we.current.useEffect(z,J)},Ue.useId=function(){return we.current.useId()},Ue.useImperativeHandle=function(z,J,me){return we.current.useImperativeHandle(z,J,me)},Ue.useInsertionEffect=function(z,J){return we.current.useInsertionEffect(z,J)},Ue.useLayoutEffect=function(z,J){return we.current.useLayoutEffect(z,J)},Ue.useMemo=function(z,J){return we.current.useMemo(z,J)},Ue.useReducer=function(z,J,me){return we.current.useReducer(z,J,me)},Ue.useRef=function(z){return we.current.useRef(z)},Ue.useState=function(z){return we.current.useState(z)},Ue.useSyncExternalStore=function(z,J,me){return we.current.useSyncExternalStore(z,J,me)},Ue.useTransition=function(){return we.current.useTransition()},Ue.version="18.3.1",Ue}var nw;function Wd(){return nw||(nw=1,sp.exports=Ux()),sp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rw;function zx(){if(rw)return Ul;rw=1;var n=Wd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(h,f,m){var v,_={},E=null,S=null;m!==void 0&&(E=""+m),f.key!==void 0&&(E=""+f.key),f.ref!==void 0&&(S=f.ref);for(v in f)r.call(f,v)&&!a.hasOwnProperty(v)&&(_[v]=f[v]);if(h&&h.defaultProps)for(v in f=h.defaultProps,f)_[v]===void 0&&(_[v]=f[v]);return{$$typeof:e,type:h,key:E,ref:S,props:_,_owner:o.current}}return Ul.Fragment=t,Ul.jsx=c,Ul.jsxs=c,Ul}var iw;function Bx(){return iw||(iw=1,ip.exports=zx()),ip.exports}var I=Bx(),zu={},op={exports:{}},hn={},ap={exports:{}},lp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sw;function $x(){return sw||(sw=1,(function(n){function e($,le){var ae=$.length;$.push(le);e:for(;0<ae;){var z=ae-1>>>1,J=$[z];if(0<o(J,le))$[z]=le,$[ae]=J,ae=z;else break e}}function t($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var le=$[0],ae=$.pop();if(ae!==le){$[0]=ae;e:for(var z=0,J=$.length,me=J>>>1;z<me;){var pe=2*(z+1)-1,Pe=$[pe],De=pe+1,re=$[De];if(0>o(Pe,ae))De<J&&0>o(re,Pe)?($[z]=re,$[De]=ae,z=De):($[z]=Pe,$[pe]=ae,z=pe);else if(De<J&&0>o(re,ae))$[z]=re,$[De]=ae,z=De;else break e}}return le}function o($,le){var ae=$.sortIndex-le.sortIndex;return ae!==0?ae:$.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var f=[],m=[],v=1,_=null,E=3,S=!1,M=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G($){for(var le=t(m);le!==null;){if(le.callback===null)r(m);else if(le.startTime<=$)r(m),le.sortIndex=le.expirationTime,e(f,le);else break;le=t(m)}}function Y($){if(x=!1,G($),!M)if(t(f)!==null)M=!0,Te(Z);else{var le=t(m);le!==null&&we(Y,le.startTime-$)}}function Z($,le){M=!1,x&&(x=!1,U(A),A=-1),S=!0;var ae=E;try{for(G(le),_=t(f);_!==null&&(!(_.expirationTime>le)||$&&!O());){var z=_.callback;if(typeof z=="function"){_.callback=null,E=_.priorityLevel;var J=z(_.expirationTime<=le);le=n.unstable_now(),typeof J=="function"?_.callback=J:_===t(f)&&r(f),G(le)}else r(f);_=t(f)}if(_!==null)var me=!0;else{var pe=t(m);pe!==null&&we(Y,pe.startTime-le),me=!1}return me}finally{_=null,E=ae,S=!1}}var oe=!1,b=null,A=-1,N=5,L=-1;function O(){return!(n.unstable_now()-L<N)}function F(){if(b!==null){var $=n.unstable_now();L=$;var le=!0;try{le=b(!0,$)}finally{le?R():(oe=!1,b=null)}}else oe=!1}var R;if(typeof B=="function")R=function(){B(F)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,be=_e.port2;_e.port1.onmessage=F,R=function(){be.postMessage(null)}}else R=function(){C(F,0)};function Te($){b=$,oe||(oe=!0,R())}function we($,le){A=C(function(){$(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_continueExecution=function(){M||S||(M=!0,Te(Z))},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function($){switch(E){case 1:case 2:case 3:var le=3;break;default:le=E}var ae=E;E=le;try{return $()}finally{E=ae}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function($,le){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ae=E;E=$;try{return le()}finally{E=ae}},n.unstable_scheduleCallback=function($,le,ae){var z=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?z+ae:z):ae=z,$){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ae+J,$={id:v++,callback:le,priorityLevel:$,startTime:ae,expirationTime:J,sortIndex:-1},ae>z?($.sortIndex=ae,e(m,$),t(f)===null&&$===t(m)&&(x?(U(A),A=-1):x=!0,we(Y,ae-z))):($.sortIndex=J,e(f,$),M||S||(M=!0,Te(Z))),$},n.unstable_shouldYield=O,n.unstable_wrapCallback=function($){var le=E;return function(){var ae=E;E=le;try{return $.apply(this,arguments)}finally{E=ae}}}})(lp)),lp}var ow;function Wx(){return ow||(ow=1,ap.exports=$x()),ap.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aw;function Hx(){if(aw)return hn;aw=1;var n=Wd(),e=Wx();function t(i){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function a(i,s){c(i,s),c(i+"Capture",s)}function c(i,s){for(o[i]=s,i=0;i<s.length;i++)r.add(s[i])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},_={};function E(i){return f.call(_,i)?!0:f.call(v,i)?!1:m.test(i)?_[i]=!0:(v[i]=!0,!1)}function S(i,s,l,d){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function M(i,s,l,d){if(s===null||typeof s>"u"||S(i,s,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function x(i,s,l,d,p,g,T){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=i,this.type=s,this.sanitizeURL=g,this.removeEmptyString=T}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){C[i]=new x(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var s=i[0];C[s]=new x(s,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){C[i]=new x(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){C[i]=new x(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){C[i]=new x(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){C[i]=new x(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){C[i]=new x(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){C[i]=new x(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){C[i]=new x(i,5,!1,i.toLowerCase(),null,!1,!1)});var U=/[\-:]([a-z])/g;function B(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var s=i.replace(U,B);C[s]=new x(s,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var s=i.replace(U,B);C[s]=new x(s,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var s=i.replace(U,B);C[s]=new x(s,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){C[i]=new x(i,1,!1,i.toLowerCase(),null,!1,!1)}),C.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){C[i]=new x(i,1,!1,i.toLowerCase(),null,!0,!0)});function G(i,s,l,d){var p=C.hasOwnProperty(s)?C[s]:null;(p!==null?p.type!==0:d||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(M(s,l,p,d)&&(l=null),d||p===null?E(s)&&(l===null?i.removeAttribute(s):i.setAttribute(s,""+l)):p.mustUseProperty?i[p.propertyName]=l===null?p.type===3?!1:"":l:(s=p.attributeName,d=p.attributeNamespace,l===null?i.removeAttribute(s):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,d?i.setAttributeNS(d,s,l):i.setAttribute(s,l))))}var Y=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),oe=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),O=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),_e=Symbol.for("react.suspense_list"),be=Symbol.for("react.memo"),Te=Symbol.for("react.lazy"),we=Symbol.for("react.offscreen"),$=Symbol.iterator;function le(i){return i===null||typeof i!="object"?null:(i=$&&i[$]||i["@@iterator"],typeof i=="function"?i:null)}var ae=Object.assign,z;function J(i){if(z===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);z=s&&s[1]||""}return`
`+z+i}var me=!1;function pe(i,s){if(!i||me)return"";me=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(K){var d=K}Reflect.construct(i,[],s)}else{try{s.call()}catch(K){d=K}i.call(s.prototype)}else{try{throw Error()}catch(K){d=K}i()}}catch(K){if(K&&d&&typeof K.stack=="string"){for(var p=K.stack.split(`
`),g=d.stack.split(`
`),T=p.length-1,D=g.length-1;1<=T&&0<=D&&p[T]!==g[D];)D--;for(;1<=T&&0<=D;T--,D--)if(p[T]!==g[D]){if(T!==1||D!==1)do if(T--,D--,0>D||p[T]!==g[D]){var V=`
`+p[T].replace(" at new "," at ");return i.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",i.displayName)),V}while(1<=T&&0<=D);break}}}finally{me=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?J(i):""}function Pe(i){switch(i.tag){case 5:return J(i.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return i=pe(i.type,!1),i;case 11:return i=pe(i.type.render,!1),i;case 1:return i=pe(i.type,!0),i;default:return""}}function De(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case b:return"Fragment";case oe:return"Portal";case N:return"Profiler";case A:return"StrictMode";case R:return"Suspense";case _e:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case O:return(i.displayName||"Context")+".Consumer";case L:return(i._context.displayName||"Context")+".Provider";case F:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case be:return s=i.displayName||null,s!==null?s:De(i.type)||"Memo";case Te:s=i._payload,i=i._init;try{return De(i(s))}catch{}}return null}function re(i){var s=i.type;switch(i.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=s.render,i=i.displayName||i.name||"",s.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(s);case 8:return s===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Se(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ne(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Oe(i){var s=Ne(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),d=""+i[s];if(!i.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,g=l.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return p.call(this)},set:function(T){d=""+T,g.call(this,T)}}),Object.defineProperty(i,s,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(T){d=""+T},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function We(i){i._valueTracker||(i._valueTracker=Oe(i))}function Qe(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var l=s.getValue(),d="";return i&&(d=Ne(i)?i.checked?"true":"false":i.value),i=d,i!==l?(s.setValue(i),!0):!1}function pt(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function on(i,s){var l=s.checked;return ae({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function Ii(i,s){var l=s.defaultValue==null?"":s.defaultValue,d=s.checked!=null?s.checked:s.defaultChecked;l=Se(s.value!=null?s.value:l),i._wrapperState={initialChecked:d,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function cr(i,s){s=s.checked,s!=null&&G(i,"checked",s,!1)}function Bn(i,s){cr(i,s);var l=Se(s.value),d=s.type;if(l!=null)d==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(d==="submit"||d==="reset"){i.removeAttribute("value");return}s.hasOwnProperty("value")?_t(i,s.type,l):s.hasOwnProperty("defaultValue")&&_t(i,s.type,Se(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(i.defaultChecked=!!s.defaultChecked)}function Ga(i,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var d=s.type;if(!(d!=="submit"&&d!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+i._wrapperState.initialValue,l||s===i.value||(i.value=s),i.defaultValue=s}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function _t(i,s,l){(s!=="number"||pt(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var mt=Array.isArray;function $n(i,s,l,d){if(i=i.options,s){s={};for(var p=0;p<l.length;p++)s["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=s.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&d&&(i[l].defaultSelected=!0)}else{for(l=""+Se(l),s=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,d&&(i[p].defaultSelected=!0);return}s!==null||i[p].disabled||(s=i[p])}s!==null&&(s.selected=!0)}}function Ka(i,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},s,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Qa(i,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(mt(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}i._wrapperState={initialValue:Se(l)}}function kc(i,s){var l=Se(s.value),d=Se(s.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),s.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),d!=null&&(i.defaultValue=""+d)}function Si(i){var s=i.textContent;s===i._wrapperState.initialValue&&s!==""&&s!==null&&(i.value=s)}function Ya(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Io(i,s){return i==null||i==="http://www.w3.org/1999/xhtml"?Ya(s):i==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var xi,Cc=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,d,p){MSApp.execUnsafeLocalFunction(function(){return i(s,l,d,p)})}:i})(function(i,s){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=s;else{for(xi=xi||document.createElement("div"),xi.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=xi.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;s.firstChild;)i.appendChild(s.firstChild)}});function ks(i,s){if(s){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=s;return}}i.textContent=s}var Ai={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bc=["Webkit","ms","Moz","O"];Object.keys(Ai).forEach(function(i){bc.forEach(function(s){s=s+i.charAt(0).toUpperCase()+i.substring(1),Ai[s]=Ai[i]})});function ki(i,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||Ai.hasOwnProperty(i)&&Ai[i]?(""+s).trim():s+"px"}function So(i,s){i=i.style;for(var l in s)if(s.hasOwnProperty(l)){var d=l.indexOf("--")===0,p=ki(l,s[l],d);l==="float"&&(l="cssFloat"),d?i.setProperty(l,p):i[l]=p}}var Xa=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wn(i,s){if(s){if(Xa[i]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function xo(i,s){if(i.indexOf("-")===-1)return typeof s.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ci=null;function Ao(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Hr=null,qr=null,dt=null;function Ja(i){if(i=xl(i)){if(typeof Hr!="function")throw Error(t(280));var s=i.stateNode;s&&(s=nu(s),Hr(i.stateNode,i.type,s))}}function bi(i){qr?dt?dt.push(i):dt=[i]:qr=i}function Ri(){if(qr){var i=qr,s=dt;if(dt=qr=null,Ja(i),s)for(i=0;i<s.length;i++)Ja(s[i])}}function Rc(i,s){return i(s)}function Pc(){}var ur=!1;function Nc(i,s,l){if(ur)return i(s,l);ur=!0;try{return Rc(i,s,l)}finally{ur=!1,(qr!==null||dt!==null)&&(Pc(),Ri())}}function Cs(i,s){var l=i.stateNode;if(l===null)return null;var d=nu(l);if(d===null)return null;l=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var Pi=!1;if(h)try{var Ni={};Object.defineProperty(Ni,"passive",{get:function(){Pi=!0}}),window.addEventListener("test",Ni,Ni),window.removeEventListener("test",Ni,Ni)}catch{Pi=!1}function Dc(i,s,l,d,p,g,T,D,V){var K=Array.prototype.slice.call(arguments,3);try{s.apply(l,K)}catch(ne){this.onError(ne)}}var Gr=!1,dr=null,ko=!1,bn=null,Mc={onError:function(i){Gr=!0,dr=i}};function Oc(i,s,l,d,p,g,T,D,V){Gr=!1,dr=null,Dc.apply(Mc,arguments)}function Za(i,s,l,d,p,g,T,D,V){if(Oc.apply(this,arguments),Gr){if(Gr){var K=dr;Gr=!1,dr=null}else throw Error(t(198));ko||(ko=!0,bn=K)}}function Hn(i){var s=i,l=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(l=s.return),i=s.return;while(i)}return s.tag===3?l:null}function el(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function Lc(i){if(Hn(i)!==i)throw Error(t(188))}function Vc(i){var s=i.alternate;if(!s){if(s=Hn(i),s===null)throw Error(t(188));return s!==i?null:i}for(var l=i,d=s;;){var p=l.return;if(p===null)break;var g=p.alternate;if(g===null){if(d=p.return,d!==null){l=d;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===l)return Lc(p),i;if(g===d)return Lc(p),s;g=g.sibling}throw Error(t(188))}if(l.return!==d.return)l=p,d=g;else{for(var T=!1,D=p.child;D;){if(D===l){T=!0,l=p,d=g;break}if(D===d){T=!0,d=p,l=g;break}D=D.sibling}if(!T){for(D=g.child;D;){if(D===l){T=!0,l=g,d=p;break}if(D===d){T=!0,d=g,l=p;break}D=D.sibling}if(!T)throw Error(t(189))}}if(l.alternate!==d)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?i:s}function Fc(i){return i=Vc(i),i!==null?bs(i):null}function bs(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var s=bs(i);if(s!==null)return s;i=i.sibling}return null}var tl=e.unstable_scheduleCallback,Co=e.unstable_cancelCallback,Rs=e.unstable_shouldYield,Kr=e.unstable_requestPaint,nt=e.unstable_now,Mh=e.unstable_getCurrentPriorityLevel,bo=e.unstable_ImmediatePriority,nl=e.unstable_UserBlockingPriority,Ps=e.unstable_NormalPriority,rl=e.unstable_LowPriority,Ro=e.unstable_IdlePriority,Ns=null,gn=null;function jc(i){if(gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(Ns,i,void 0,(i.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:Ds,hr=Math.log,Rn=Math.LN2;function Ds(i){return i>>>=0,i===0?32:31-(hr(i)/Rn|0)|0}var fr=64,Di=4194304;function Ye(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Qr(i,s){var l=i.pendingLanes;if(l===0)return 0;var d=0,p=i.suspendedLanes,g=i.pingedLanes,T=l&268435455;if(T!==0){var D=T&~p;D!==0?d=Ye(D):(g&=T,g!==0&&(d=Ye(g)))}else T=l&~p,T!==0?d=Ye(T):g!==0&&(d=Ye(g));if(d===0)return 0;if(s!==0&&s!==d&&(s&p)===0&&(p=d&-d,g=s&-s,p>=g||p===16&&(g&4194240)!==0))return s;if((d&4)!==0&&(d|=l&16),s=i.entangledLanes,s!==0)for(i=i.entanglements,s&=d;0<s;)l=31-yn(s),p=1<<l,d|=i[l],s&=~p;return d}function Ms(i,s){switch(i){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Os(i,s){for(var l=i.suspendedLanes,d=i.pingedLanes,p=i.expirationTimes,g=i.pendingLanes;0<g;){var T=31-yn(g),D=1<<T,V=p[T];V===-1?((D&l)===0||(D&d)!==0)&&(p[T]=Ms(D,s)):V<=s&&(i.expiredLanes|=D),g&=~D}}function il(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function sl(){var i=fr;return fr<<=1,(fr&4194240)===0&&(fr=64),i}function ol(i){for(var s=[],l=0;31>l;l++)s.push(i);return s}function Ls(i,s,l){i.pendingLanes|=s,s!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,s=31-yn(s),i[s]=l}function Oh(i,s){var l=i.pendingLanes&~s;i.pendingLanes=s,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=s,i.mutableReadLanes&=s,i.entangledLanes&=s,s=i.entanglements;var d=i.eventTimes;for(i=i.expirationTimes;0<l;){var p=31-yn(l),g=1<<p;s[p]=0,d[p]=-1,i[p]=-1,l&=~g}}function al(i,s){var l=i.entangledLanes|=s;for(i=i.entanglements;l;){var d=31-yn(l),p=1<<d;p&s|i[d]&s&&(i[d]|=s),l&=~p}}var He=0;function pr(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var ll,Po,cl,ul,dl,mr=!1,No=[],gr=null,yr=null,Lt=null,Vs=new Map,Yr=new Map,vn=[],Uc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mi(i,s){switch(i){case"focusin":case"focusout":gr=null;break;case"dragenter":case"dragleave":yr=null;break;case"mouseover":case"mouseout":Lt=null;break;case"pointerover":case"pointerout":Vs.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yr.delete(s.pointerId)}}function qn(i,s,l,d,p,g){return i===null||i.nativeEvent!==g?(i={blockedOn:s,domEventName:l,eventSystemFlags:d,nativeEvent:g,targetContainers:[p]},s!==null&&(s=xl(s),s!==null&&Po(s)),i):(i.eventSystemFlags|=d,s=i.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),i)}function zc(i,s,l,d,p){switch(s){case"focusin":return gr=qn(gr,i,s,l,d,p),!0;case"dragenter":return yr=qn(yr,i,s,l,d,p),!0;case"mouseover":return Lt=qn(Lt,i,s,l,d,p),!0;case"pointerover":var g=p.pointerId;return Vs.set(g,qn(Vs.get(g)||null,i,s,l,d,p)),!0;case"gotpointercapture":return g=p.pointerId,Yr.set(g,qn(Yr.get(g)||null,i,s,l,d,p)),!0}return!1}function Do(i){var s=zs(i.target);if(s!==null){var l=Hn(s);if(l!==null){if(s=l.tag,s===13){if(s=el(l),s!==null){i.blockedOn=s,dl(i.priority,function(){cl(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ze(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var l=Mo(i.domEventName,i.eventSystemFlags,s[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var d=new l.constructor(l.type,l);Ci=d,l.target.dispatchEvent(d),Ci=null}else return s=xl(l),s!==null&&Po(s),i.blockedOn=l,!1;s.shift()}return!0}function Bc(i,s,l){Ze(i)&&l.delete(s)}function Lh(){mr=!1,gr!==null&&Ze(gr)&&(gr=null),yr!==null&&Ze(yr)&&(yr=null),Lt!==null&&Ze(Lt)&&(Lt=null),Vs.forEach(Bc),Yr.forEach(Bc)}function Oi(i,s){i.blockedOn===s&&(i.blockedOn=null,mr||(mr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Lh)))}function Li(i){function s(p){return Oi(p,i)}if(0<No.length){Oi(No[0],i);for(var l=1;l<No.length;l++){var d=No[l];d.blockedOn===i&&(d.blockedOn=null)}}for(gr!==null&&Oi(gr,i),yr!==null&&Oi(yr,i),Lt!==null&&Oi(Lt,i),Vs.forEach(s),Yr.forEach(s),l=0;l<vn.length;l++)d=vn[l],d.blockedOn===i&&(d.blockedOn=null);for(;0<vn.length&&(l=vn[0],l.blockedOn===null);)Do(l),l.blockedOn===null&&vn.shift()}var Xr=Y.ReactCurrentBatchConfig,Jr=!0;function vr(i,s,l,d){var p=He,g=Xr.transition;Xr.transition=null;try{He=1,hl(i,s,l,d)}finally{He=p,Xr.transition=g}}function $c(i,s,l,d){var p=He,g=Xr.transition;Xr.transition=null;try{He=4,hl(i,s,l,d)}finally{He=p,Xr.transition=g}}function hl(i,s,l,d){if(Jr){var p=Mo(i,s,l,d);if(p===null)Gh(i,s,d,wr,l),Mi(i,d);else if(zc(p,i,s,l,d))d.stopPropagation();else if(Mi(i,d),s&4&&-1<Uc.indexOf(i)){for(;p!==null;){var g=xl(p);if(g!==null&&ll(g),g=Mo(i,s,l,d),g===null&&Gh(i,s,d,wr,l),g===p)break;p=g}p!==null&&d.stopPropagation()}else Gh(i,s,d,null,l)}}var wr=null;function Mo(i,s,l,d){if(wr=null,i=Ao(d),i=zs(i),i!==null)if(s=Hn(i),s===null)i=null;else if(l=s.tag,l===13){if(i=el(s),i!==null)return i;i=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null);return wr=i,null}function Oo(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mh()){case bo:return 1;case nl:return 4;case Ps:case rl:return 16;case Ro:return 536870912;default:return 16}default:return 16}}var wn=null,Lo=null,Zr=null;function Wc(){if(Zr)return Zr;var i,s=Lo,l=s.length,d,p="value"in wn?wn.value:wn.textContent,g=p.length;for(i=0;i<l&&s[i]===p[i];i++);var T=l-i;for(d=1;d<=T&&s[l-d]===p[g-d];d++);return Zr=p.slice(i,1<d?1-d:void 0)}function Fs(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function _r(){return!0}function fl(){return!1}function qt(i){function s(l,d,p,g,T){this._reactName=l,this._targetInst=p,this.type=d,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(l=i[D],this[D]=l?l(g):g[D]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?_r:fl,this.isPropagationStopped=fl,this}return ae(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=_r)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=_r)},persist:function(){},isPersistent:_r}),s}var Er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},js=qt(Er),Vi=ae({},Er,{view:0,detail:0}),Vo=qt(Vi),Fo,jo,_n,Us=ae({},Vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ve,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==_n&&(_n&&i.type==="mousemove"?(Fo=i.screenX-_n.screenX,jo=i.screenY-_n.screenY):jo=Fo=0,_n=i),Fo)},movementY:function(i){return"movementY"in i?i.movementY:jo}}),pl=qt(Us),Hc=ae({},Us,{dataTransfer:0}),qc=qt(Hc),Uo=ae({},Vi,{relatedTarget:0}),Vt=qt(Uo),Gc=ae({},Er,{animationName:0,elapsedTime:0,pseudoElement:0}),Kc=qt(Gc),Fi=ae({},Er,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),u=qt(Fi),y=ae({},Er,{data:0}),w=qt(y),k={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},H={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Q={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ce(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Q[i])?!!s[i]:!1}function Ve(){return ce}var gt=ae({},Vi,{key:function(i){if(i.key){var s=k[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Fs(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?H[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ve,charCode:function(i){return i.type==="keypress"?Fs(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Fs(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Je=qt(gt),Et=ae({},Us,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),En=qt(Et),ei=ae({},Vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ve}),Tr=qt(ei),Ir=ae({},Er,{propertyName:0,elapsedTime:0,pseudoElement:0}),zo=qt(Ir),ml=ae({},Us,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),D1=qt(ml),M1=[9,13,27,32],Vh=h&&"CompositionEvent"in window,gl=null;h&&"documentMode"in document&&(gl=document.documentMode);var O1=h&&"TextEvent"in window&&!gl,Gg=h&&(!Vh||gl&&8<gl&&11>=gl),Kg=" ",Qg=!1;function Yg(i,s){switch(i){case"keyup":return M1.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xg(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Bo=!1;function L1(i,s){switch(i){case"compositionend":return Xg(s);case"keypress":return s.which!==32?null:(Qg=!0,Kg);case"textInput":return i=s.data,i===Kg&&Qg?null:i;default:return null}}function V1(i,s){if(Bo)return i==="compositionend"||!Vh&&Yg(i,s)?(i=Wc(),Zr=Lo=wn=null,Bo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Gg&&s.locale!=="ko"?null:s.data;default:return null}}var F1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jg(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!F1[i.type]:s==="textarea"}function Zg(i,s,l,d){bi(d),s=Zc(s,"onChange"),0<s.length&&(l=new js("onChange","change",null,l,d),i.push({event:l,listeners:s}))}var yl=null,vl=null;function j1(i){yy(i,0)}function Qc(i){var s=Go(i);if(Qe(s))return i}function U1(i,s){if(i==="change")return s}var ey=!1;if(h){var Fh;if(h){var jh="oninput"in document;if(!jh){var ty=document.createElement("div");ty.setAttribute("oninput","return;"),jh=typeof ty.oninput=="function"}Fh=jh}else Fh=!1;ey=Fh&&(!document.documentMode||9<document.documentMode)}function ny(){yl&&(yl.detachEvent("onpropertychange",ry),vl=yl=null)}function ry(i){if(i.propertyName==="value"&&Qc(vl)){var s=[];Zg(s,vl,i,Ao(i)),Nc(j1,s)}}function z1(i,s,l){i==="focusin"?(ny(),yl=s,vl=l,yl.attachEvent("onpropertychange",ry)):i==="focusout"&&ny()}function B1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Qc(vl)}function $1(i,s){if(i==="click")return Qc(s)}function W1(i,s){if(i==="input"||i==="change")return Qc(s)}function H1(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Gn=typeof Object.is=="function"?Object.is:H1;function wl(i,s){if(Gn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var l=Object.keys(i),d=Object.keys(s);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var p=l[d];if(!f.call(s,p)||!Gn(i[p],s[p]))return!1}return!0}function iy(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function sy(i,s){var l=iy(i);i=0;for(var d;l;){if(l.nodeType===3){if(d=i+l.textContent.length,i<=s&&d>=s)return{node:l,offset:s-i};i=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=iy(l)}}function oy(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?oy(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function ay(){for(var i=window,s=pt();s instanceof i.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)i=s.contentWindow;else break;s=pt(i.document)}return s}function Uh(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}function q1(i){var s=ay(),l=i.focusedElem,d=i.selectionRange;if(s!==l&&l&&l.ownerDocument&&oy(l.ownerDocument.documentElement,l)){if(d!==null&&Uh(l)){if(s=d.start,i=d.end,i===void 0&&(i=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(i,l.value.length);else if(i=(s=l.ownerDocument||document)&&s.defaultView||window,i.getSelection){i=i.getSelection();var p=l.textContent.length,g=Math.min(d.start,p);d=d.end===void 0?g:Math.min(d.end,p),!i.extend&&g>d&&(p=d,d=g,g=p),p=sy(l,g);var T=sy(l,d);p&&T&&(i.rangeCount!==1||i.anchorNode!==p.node||i.anchorOffset!==p.offset||i.focusNode!==T.node||i.focusOffset!==T.offset)&&(s=s.createRange(),s.setStart(p.node,p.offset),i.removeAllRanges(),g>d?(i.addRange(s),i.extend(T.node,T.offset)):(s.setEnd(T.node,T.offset),i.addRange(s)))}}for(s=[],i=l;i=i.parentNode;)i.nodeType===1&&s.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)i=s[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var G1=h&&"documentMode"in document&&11>=document.documentMode,$o=null,zh=null,_l=null,Bh=!1;function ly(i,s,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Bh||$o==null||$o!==pt(d)||(d=$o,"selectionStart"in d&&Uh(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),_l&&wl(_l,d)||(_l=d,d=Zc(zh,"onSelect"),0<d.length&&(s=new js("onSelect","select",null,s,l),i.push({event:s,listeners:d}),s.target=$o)))}function Yc(i,s){var l={};return l[i.toLowerCase()]=s.toLowerCase(),l["Webkit"+i]="webkit"+s,l["Moz"+i]="moz"+s,l}var Wo={animationend:Yc("Animation","AnimationEnd"),animationiteration:Yc("Animation","AnimationIteration"),animationstart:Yc("Animation","AnimationStart"),transitionend:Yc("Transition","TransitionEnd")},$h={},cy={};h&&(cy=document.createElement("div").style,"AnimationEvent"in window||(delete Wo.animationend.animation,delete Wo.animationiteration.animation,delete Wo.animationstart.animation),"TransitionEvent"in window||delete Wo.transitionend.transition);function Xc(i){if($h[i])return $h[i];if(!Wo[i])return i;var s=Wo[i],l;for(l in s)if(s.hasOwnProperty(l)&&l in cy)return $h[i]=s[l];return i}var uy=Xc("animationend"),dy=Xc("animationiteration"),hy=Xc("animationstart"),fy=Xc("transitionend"),py=new Map,my="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ji(i,s){py.set(i,s),a(s,[i])}for(var Wh=0;Wh<my.length;Wh++){var Hh=my[Wh],K1=Hh.toLowerCase(),Q1=Hh[0].toUpperCase()+Hh.slice(1);ji(K1,"on"+Q1)}ji(uy,"onAnimationEnd"),ji(dy,"onAnimationIteration"),ji(hy,"onAnimationStart"),ji("dblclick","onDoubleClick"),ji("focusin","onFocus"),ji("focusout","onBlur"),ji(fy,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var El="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y1=new Set("cancel close invalid load scroll toggle".split(" ").concat(El));function gy(i,s,l){var d=i.type||"unknown-event";i.currentTarget=l,Za(d,s,void 0,i),i.currentTarget=null}function yy(i,s){s=(s&4)!==0;for(var l=0;l<i.length;l++){var d=i[l],p=d.event;d=d.listeners;e:{var g=void 0;if(s)for(var T=d.length-1;0<=T;T--){var D=d[T],V=D.instance,K=D.currentTarget;if(D=D.listener,V!==g&&p.isPropagationStopped())break e;gy(p,D,K),g=V}else for(T=0;T<d.length;T++){if(D=d[T],V=D.instance,K=D.currentTarget,D=D.listener,V!==g&&p.isPropagationStopped())break e;gy(p,D,K),g=V}}}if(ko)throw i=bn,ko=!1,bn=null,i}function rt(i,s){var l=s[Zh];l===void 0&&(l=s[Zh]=new Set);var d=i+"__bubble";l.has(d)||(vy(s,i,2,!1),l.add(d))}function qh(i,s,l){var d=0;s&&(d|=4),vy(l,i,d,s)}var Jc="_reactListening"+Math.random().toString(36).slice(2);function Tl(i){if(!i[Jc]){i[Jc]=!0,r.forEach(function(l){l!=="selectionchange"&&(Y1.has(l)||qh(l,!1,i),qh(l,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Jc]||(s[Jc]=!0,qh("selectionchange",!1,s))}}function vy(i,s,l,d){switch(Oo(s)){case 1:var p=vr;break;case 4:p=$c;break;default:p=hl}l=p.bind(null,s,l,i),p=void 0,!Pi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),d?p!==void 0?i.addEventListener(s,l,{capture:!0,passive:p}):i.addEventListener(s,l,!0):p!==void 0?i.addEventListener(s,l,{passive:p}):i.addEventListener(s,l,!1)}function Gh(i,s,l,d,p){var g=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var D=d.stateNode.containerInfo;if(D===p||D.nodeType===8&&D.parentNode===p)break;if(T===4)for(T=d.return;T!==null;){var V=T.tag;if((V===3||V===4)&&(V=T.stateNode.containerInfo,V===p||V.nodeType===8&&V.parentNode===p))return;T=T.return}for(;D!==null;){if(T=zs(D),T===null)return;if(V=T.tag,V===5||V===6){d=g=T;continue e}D=D.parentNode}}d=d.return}Nc(function(){var K=g,ne=Ao(l),ie=[];e:{var te=py.get(i);if(te!==void 0){var de=js,ge=i;switch(i){case"keypress":if(Fs(l)===0)break e;case"keydown":case"keyup":de=Je;break;case"focusin":ge="focus",de=Vt;break;case"focusout":ge="blur",de=Vt;break;case"beforeblur":case"afterblur":de=Vt;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=pl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=qc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=Tr;break;case uy:case dy:case hy:de=Kc;break;case fy:de=zo;break;case"scroll":de=Vo;break;case"wheel":de=D1;break;case"copy":case"cut":case"paste":de=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=En}var Ee=(s&4)!==0,yt=!Ee&&i==="scroll",W=Ee?te!==null?te+"Capture":null:te;Ee=[];for(var j=K,q;j!==null;){q=j;var se=q.stateNode;if(q.tag===5&&se!==null&&(q=se,W!==null&&(se=Cs(j,W),se!=null&&Ee.push(Il(j,se,q)))),yt)break;j=j.return}0<Ee.length&&(te=new de(te,ge,null,l,ne),ie.push({event:te,listeners:Ee}))}}if((s&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",de=i==="mouseout"||i==="pointerout",te&&l!==Ci&&(ge=l.relatedTarget||l.fromElement)&&(zs(ge)||ge[ti]))break e;if((de||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,de?(ge=l.relatedTarget||l.toElement,de=K,ge=ge?zs(ge):null,ge!==null&&(yt=Hn(ge),ge!==yt||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(de=null,ge=K),de!==ge)){if(Ee=pl,se="onMouseLeave",W="onMouseEnter",j="mouse",(i==="pointerout"||i==="pointerover")&&(Ee=En,se="onPointerLeave",W="onPointerEnter",j="pointer"),yt=de==null?te:Go(de),q=ge==null?te:Go(ge),te=new Ee(se,j+"leave",de,l,ne),te.target=yt,te.relatedTarget=q,se=null,zs(ne)===K&&(Ee=new Ee(W,j+"enter",ge,l,ne),Ee.target=q,Ee.relatedTarget=yt,se=Ee),yt=se,de&&ge)t:{for(Ee=de,W=ge,j=0,q=Ee;q;q=Ho(q))j++;for(q=0,se=W;se;se=Ho(se))q++;for(;0<j-q;)Ee=Ho(Ee),j--;for(;0<q-j;)W=Ho(W),q--;for(;j--;){if(Ee===W||W!==null&&Ee===W.alternate)break t;Ee=Ho(Ee),W=Ho(W)}Ee=null}else Ee=null;de!==null&&wy(ie,te,de,Ee,!1),ge!==null&&yt!==null&&wy(ie,yt,ge,Ee,!0)}}e:{if(te=K?Go(K):window,de=te.nodeName&&te.nodeName.toLowerCase(),de==="select"||de==="input"&&te.type==="file")var Ie=U1;else if(Jg(te))if(ey)Ie=W1;else{Ie=B1;var ke=z1}else(de=te.nodeName)&&de.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(Ie=$1);if(Ie&&(Ie=Ie(i,K))){Zg(ie,Ie,l,ne);break e}ke&&ke(i,te,K),i==="focusout"&&(ke=te._wrapperState)&&ke.controlled&&te.type==="number"&&_t(te,"number",te.value)}switch(ke=K?Go(K):window,i){case"focusin":(Jg(ke)||ke.contentEditable==="true")&&($o=ke,zh=K,_l=null);break;case"focusout":_l=zh=$o=null;break;case"mousedown":Bh=!0;break;case"contextmenu":case"mouseup":case"dragend":Bh=!1,ly(ie,l,ne);break;case"selectionchange":if(G1)break;case"keydown":case"keyup":ly(ie,l,ne)}var Ce;if(Vh)e:{switch(i){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else Bo?Yg(i,l)&&(Me="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Me="onCompositionStart");Me&&(Gg&&l.locale!=="ko"&&(Bo||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&Bo&&(Ce=Wc()):(wn=ne,Lo="value"in wn?wn.value:wn.textContent,Bo=!0)),ke=Zc(K,Me),0<ke.length&&(Me=new w(Me,i,null,l,ne),ie.push({event:Me,listeners:ke}),Ce?Me.data=Ce:(Ce=Xg(l),Ce!==null&&(Me.data=Ce)))),(Ce=O1?L1(i,l):V1(i,l))&&(K=Zc(K,"onBeforeInput"),0<K.length&&(ne=new w("onBeforeInput","beforeinput",null,l,ne),ie.push({event:ne,listeners:K}),ne.data=Ce))}yy(ie,s)})}function Il(i,s,l){return{instance:i,listener:s,currentTarget:l}}function Zc(i,s){for(var l=s+"Capture",d=[];i!==null;){var p=i,g=p.stateNode;p.tag===5&&g!==null&&(p=g,g=Cs(i,l),g!=null&&d.unshift(Il(i,g,p)),g=Cs(i,s),g!=null&&d.push(Il(i,g,p))),i=i.return}return d}function Ho(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function wy(i,s,l,d,p){for(var g=s._reactName,T=[];l!==null&&l!==d;){var D=l,V=D.alternate,K=D.stateNode;if(V!==null&&V===d)break;D.tag===5&&K!==null&&(D=K,p?(V=Cs(l,g),V!=null&&T.unshift(Il(l,V,D))):p||(V=Cs(l,g),V!=null&&T.push(Il(l,V,D)))),l=l.return}T.length!==0&&i.push({event:s,listeners:T})}var X1=/\r\n?/g,J1=/\u0000|\uFFFD/g;function _y(i){return(typeof i=="string"?i:""+i).replace(X1,`
`).replace(J1,"")}function eu(i,s,l){if(s=_y(s),_y(i)!==s&&l)throw Error(t(425))}function tu(){}var Kh=null,Qh=null;function Yh(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Xh=typeof setTimeout=="function"?setTimeout:void 0,Z1=typeof clearTimeout=="function"?clearTimeout:void 0,Ey=typeof Promise=="function"?Promise:void 0,ex=typeof queueMicrotask=="function"?queueMicrotask:typeof Ey<"u"?function(i){return Ey.resolve(null).then(i).catch(tx)}:Xh;function tx(i){setTimeout(function(){throw i})}function Jh(i,s){var l=s,d=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(d===0){i.removeChild(p),Li(s);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=p}while(l);Li(s)}function Ui(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return i}function Ty(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return i;s--}else l==="/$"&&s++}i=i.previousSibling}return null}var qo=Math.random().toString(36).slice(2),Sr="__reactFiber$"+qo,Sl="__reactProps$"+qo,ti="__reactContainer$"+qo,Zh="__reactEvents$"+qo,nx="__reactListeners$"+qo,rx="__reactHandles$"+qo;function zs(i){var s=i[Sr];if(s)return s;for(var l=i.parentNode;l;){if(s=l[ti]||l[Sr]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(i=Ty(i);i!==null;){if(l=i[Sr])return l;i=Ty(i)}return s}i=l,l=i.parentNode}return null}function xl(i){return i=i[Sr]||i[ti],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Go(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function nu(i){return i[Sl]||null}var ef=[],Ko=-1;function zi(i){return{current:i}}function it(i){0>Ko||(i.current=ef[Ko],ef[Ko]=null,Ko--)}function tt(i,s){Ko++,ef[Ko]=i.current,i.current=s}var Bi={},Gt=zi(Bi),an=zi(!1),Bs=Bi;function Qo(i,s){var l=i.type.contextTypes;if(!l)return Bi;var d=i.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===s)return d.__reactInternalMemoizedMaskedChildContext;var p={},g;for(g in l)p[g]=s[g];return d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=s,i.__reactInternalMemoizedMaskedChildContext=p),p}function ln(i){return i=i.childContextTypes,i!=null}function ru(){it(an),it(Gt)}function Iy(i,s,l){if(Gt.current!==Bi)throw Error(t(168));tt(Gt,s),tt(an,l)}function Sy(i,s,l){var d=i.stateNode;if(s=s.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var p in d)if(!(p in s))throw Error(t(108,re(i)||"Unknown",p));return ae({},l,d)}function iu(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Bi,Bs=Gt.current,tt(Gt,i),tt(an,an.current),!0}function xy(i,s,l){var d=i.stateNode;if(!d)throw Error(t(169));l?(i=Sy(i,s,Bs),d.__reactInternalMemoizedMergedChildContext=i,it(an),it(Gt),tt(Gt,i)):it(an),tt(an,l)}var ni=null,su=!1,tf=!1;function Ay(i){ni===null?ni=[i]:ni.push(i)}function ix(i){su=!0,Ay(i)}function $i(){if(!tf&&ni!==null){tf=!0;var i=0,s=He;try{var l=ni;for(He=1;i<l.length;i++){var d=l[i];do d=d(!0);while(d!==null)}ni=null,su=!1}catch(p){throw ni!==null&&(ni=ni.slice(i+1)),tl(bo,$i),p}finally{He=s,tf=!1}}return null}var Yo=[],Xo=0,ou=null,au=0,Pn=[],Nn=0,$s=null,ri=1,ii="";function Ws(i,s){Yo[Xo++]=au,Yo[Xo++]=ou,ou=i,au=s}function ky(i,s,l){Pn[Nn++]=ri,Pn[Nn++]=ii,Pn[Nn++]=$s,$s=i;var d=ri;i=ii;var p=32-yn(d)-1;d&=~(1<<p),l+=1;var g=32-yn(s)+p;if(30<g){var T=p-p%5;g=(d&(1<<T)-1).toString(32),d>>=T,p-=T,ri=1<<32-yn(s)+p|l<<p|d,ii=g+i}else ri=1<<g|l<<p|d,ii=i}function nf(i){i.return!==null&&(Ws(i,1),ky(i,1,0))}function rf(i){for(;i===ou;)ou=Yo[--Xo],Yo[Xo]=null,au=Yo[--Xo],Yo[Xo]=null;for(;i===$s;)$s=Pn[--Nn],Pn[Nn]=null,ii=Pn[--Nn],Pn[Nn]=null,ri=Pn[--Nn],Pn[Nn]=null}var Tn=null,In=null,ot=!1,Kn=null;function Cy(i,s){var l=Ln(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=i,s=i.deletions,s===null?(i.deletions=[l],i.flags|=16):s.push(l)}function by(i,s){switch(i.tag){case 5:var l=i.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(i.stateNode=s,Tn=i,In=Ui(s.firstChild),!0):!1;case 6:return s=i.pendingProps===""||s.nodeType!==3?null:s,s!==null?(i.stateNode=s,Tn=i,In=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=$s!==null?{id:ri,overflow:ii}:null,i.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=Ln(18,null,null,0),l.stateNode=s,l.return=i,i.child=l,Tn=i,In=null,!0):!1;default:return!1}}function sf(i){return(i.mode&1)!==0&&(i.flags&128)===0}function of(i){if(ot){var s=In;if(s){var l=s;if(!by(i,s)){if(sf(i))throw Error(t(418));s=Ui(l.nextSibling);var d=Tn;s&&by(i,s)?Cy(d,l):(i.flags=i.flags&-4097|2,ot=!1,Tn=i)}}else{if(sf(i))throw Error(t(418));i.flags=i.flags&-4097|2,ot=!1,Tn=i}}}function Ry(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Tn=i}function lu(i){if(i!==Tn)return!1;if(!ot)return Ry(i),ot=!0,!1;var s;if((s=i.tag!==3)&&!(s=i.tag!==5)&&(s=i.type,s=s!=="head"&&s!=="body"&&!Yh(i.type,i.memoizedProps)),s&&(s=In)){if(sf(i))throw Py(),Error(t(418));for(;s;)Cy(i,s),s=Ui(s.nextSibling)}if(Ry(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(s===0){In=Ui(i.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}i=i.nextSibling}In=null}}else In=Tn?Ui(i.stateNode.nextSibling):null;return!0}function Py(){for(var i=In;i;)i=Ui(i.nextSibling)}function Jo(){In=Tn=null,ot=!1}function af(i){Kn===null?Kn=[i]:Kn.push(i)}var sx=Y.ReactCurrentBatchConfig;function Al(i,s,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var d=l.stateNode}if(!d)throw Error(t(147,i));var p=d,g=""+i;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(T){var D=p.refs;T===null?delete D[g]:D[g]=T},s._stringRef=g,s)}if(typeof i!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,i))}return i}function cu(i,s){throw i=Object.prototype.toString.call(s),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i))}function Ny(i){var s=i._init;return s(i._payload)}function Dy(i){function s(W,j){if(i){var q=W.deletions;q===null?(W.deletions=[j],W.flags|=16):q.push(j)}}function l(W,j){if(!i)return null;for(;j!==null;)s(W,j),j=j.sibling;return null}function d(W,j){for(W=new Map;j!==null;)j.key!==null?W.set(j.key,j):W.set(j.index,j),j=j.sibling;return W}function p(W,j){return W=Xi(W,j),W.index=0,W.sibling=null,W}function g(W,j,q){return W.index=q,i?(q=W.alternate,q!==null?(q=q.index,q<j?(W.flags|=2,j):q):(W.flags|=2,j)):(W.flags|=1048576,j)}function T(W){return i&&W.alternate===null&&(W.flags|=2),W}function D(W,j,q,se){return j===null||j.tag!==6?(j=Jf(q,W.mode,se),j.return=W,j):(j=p(j,q),j.return=W,j)}function V(W,j,q,se){var Ie=q.type;return Ie===b?ne(W,j,q.props.children,se,q.key):j!==null&&(j.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===Te&&Ny(Ie)===j.type)?(se=p(j,q.props),se.ref=Al(W,j,q),se.return=W,se):(se=Du(q.type,q.key,q.props,null,W.mode,se),se.ref=Al(W,j,q),se.return=W,se)}function K(W,j,q,se){return j===null||j.tag!==4||j.stateNode.containerInfo!==q.containerInfo||j.stateNode.implementation!==q.implementation?(j=Zf(q,W.mode,se),j.return=W,j):(j=p(j,q.children||[]),j.return=W,j)}function ne(W,j,q,se,Ie){return j===null||j.tag!==7?(j=Js(q,W.mode,se,Ie),j.return=W,j):(j=p(j,q),j.return=W,j)}function ie(W,j,q){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Jf(""+j,W.mode,q),j.return=W,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Z:return q=Du(j.type,j.key,j.props,null,W.mode,q),q.ref=Al(W,null,j),q.return=W,q;case oe:return j=Zf(j,W.mode,q),j.return=W,j;case Te:var se=j._init;return ie(W,se(j._payload),q)}if(mt(j)||le(j))return j=Js(j,W.mode,q,null),j.return=W,j;cu(W,j)}return null}function te(W,j,q,se){var Ie=j!==null?j.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return Ie!==null?null:D(W,j,""+q,se);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case Z:return q.key===Ie?V(W,j,q,se):null;case oe:return q.key===Ie?K(W,j,q,se):null;case Te:return Ie=q._init,te(W,j,Ie(q._payload),se)}if(mt(q)||le(q))return Ie!==null?null:ne(W,j,q,se,null);cu(W,q)}return null}function de(W,j,q,se,Ie){if(typeof se=="string"&&se!==""||typeof se=="number")return W=W.get(q)||null,D(j,W,""+se,Ie);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case Z:return W=W.get(se.key===null?q:se.key)||null,V(j,W,se,Ie);case oe:return W=W.get(se.key===null?q:se.key)||null,K(j,W,se,Ie);case Te:var ke=se._init;return de(W,j,q,ke(se._payload),Ie)}if(mt(se)||le(se))return W=W.get(q)||null,ne(j,W,se,Ie,null);cu(j,se)}return null}function ge(W,j,q,se){for(var Ie=null,ke=null,Ce=j,Me=j=0,Mt=null;Ce!==null&&Me<q.length;Me++){Ce.index>Me?(Mt=Ce,Ce=null):Mt=Ce.sibling;var Ke=te(W,Ce,q[Me],se);if(Ke===null){Ce===null&&(Ce=Mt);break}i&&Ce&&Ke.alternate===null&&s(W,Ce),j=g(Ke,j,Me),ke===null?Ie=Ke:ke.sibling=Ke,ke=Ke,Ce=Mt}if(Me===q.length)return l(W,Ce),ot&&Ws(W,Me),Ie;if(Ce===null){for(;Me<q.length;Me++)Ce=ie(W,q[Me],se),Ce!==null&&(j=g(Ce,j,Me),ke===null?Ie=Ce:ke.sibling=Ce,ke=Ce);return ot&&Ws(W,Me),Ie}for(Ce=d(W,Ce);Me<q.length;Me++)Mt=de(Ce,W,Me,q[Me],se),Mt!==null&&(i&&Mt.alternate!==null&&Ce.delete(Mt.key===null?Me:Mt.key),j=g(Mt,j,Me),ke===null?Ie=Mt:ke.sibling=Mt,ke=Mt);return i&&Ce.forEach(function(Ji){return s(W,Ji)}),ot&&Ws(W,Me),Ie}function Ee(W,j,q,se){var Ie=le(q);if(typeof Ie!="function")throw Error(t(150));if(q=Ie.call(q),q==null)throw Error(t(151));for(var ke=Ie=null,Ce=j,Me=j=0,Mt=null,Ke=q.next();Ce!==null&&!Ke.done;Me++,Ke=q.next()){Ce.index>Me?(Mt=Ce,Ce=null):Mt=Ce.sibling;var Ji=te(W,Ce,Ke.value,se);if(Ji===null){Ce===null&&(Ce=Mt);break}i&&Ce&&Ji.alternate===null&&s(W,Ce),j=g(Ji,j,Me),ke===null?Ie=Ji:ke.sibling=Ji,ke=Ji,Ce=Mt}if(Ke.done)return l(W,Ce),ot&&Ws(W,Me),Ie;if(Ce===null){for(;!Ke.done;Me++,Ke=q.next())Ke=ie(W,Ke.value,se),Ke!==null&&(j=g(Ke,j,Me),ke===null?Ie=Ke:ke.sibling=Ke,ke=Ke);return ot&&Ws(W,Me),Ie}for(Ce=d(W,Ce);!Ke.done;Me++,Ke=q.next())Ke=de(Ce,W,Me,Ke.value,se),Ke!==null&&(i&&Ke.alternate!==null&&Ce.delete(Ke.key===null?Me:Ke.key),j=g(Ke,j,Me),ke===null?Ie=Ke:ke.sibling=Ke,ke=Ke);return i&&Ce.forEach(function(Fx){return s(W,Fx)}),ot&&Ws(W,Me),Ie}function yt(W,j,q,se){if(typeof q=="object"&&q!==null&&q.type===b&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case Z:e:{for(var Ie=q.key,ke=j;ke!==null;){if(ke.key===Ie){if(Ie=q.type,Ie===b){if(ke.tag===7){l(W,ke.sibling),j=p(ke,q.props.children),j.return=W,W=j;break e}}else if(ke.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===Te&&Ny(Ie)===ke.type){l(W,ke.sibling),j=p(ke,q.props),j.ref=Al(W,ke,q),j.return=W,W=j;break e}l(W,ke);break}else s(W,ke);ke=ke.sibling}q.type===b?(j=Js(q.props.children,W.mode,se,q.key),j.return=W,W=j):(se=Du(q.type,q.key,q.props,null,W.mode,se),se.ref=Al(W,j,q),se.return=W,W=se)}return T(W);case oe:e:{for(ke=q.key;j!==null;){if(j.key===ke)if(j.tag===4&&j.stateNode.containerInfo===q.containerInfo&&j.stateNode.implementation===q.implementation){l(W,j.sibling),j=p(j,q.children||[]),j.return=W,W=j;break e}else{l(W,j);break}else s(W,j);j=j.sibling}j=Zf(q,W.mode,se),j.return=W,W=j}return T(W);case Te:return ke=q._init,yt(W,j,ke(q._payload),se)}if(mt(q))return ge(W,j,q,se);if(le(q))return Ee(W,j,q,se);cu(W,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,j!==null&&j.tag===6?(l(W,j.sibling),j=p(j,q),j.return=W,W=j):(l(W,j),j=Jf(q,W.mode,se),j.return=W,W=j),T(W)):l(W,j)}return yt}var Zo=Dy(!0),My=Dy(!1),uu=zi(null),du=null,ea=null,lf=null;function cf(){lf=ea=du=null}function uf(i){var s=uu.current;it(uu),i._currentValue=s}function df(i,s,l){for(;i!==null;){var d=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),i===l)break;i=i.return}}function ta(i,s){du=i,lf=ea=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&s)!==0&&(cn=!0),i.firstContext=null)}function Dn(i){var s=i._currentValue;if(lf!==i)if(i={context:i,memoizedValue:s,next:null},ea===null){if(du===null)throw Error(t(308));ea=i,du.dependencies={lanes:0,firstContext:i}}else ea=ea.next=i;return s}var Hs=null;function hf(i){Hs===null?Hs=[i]:Hs.push(i)}function Oy(i,s,l,d){var p=s.interleaved;return p===null?(l.next=l,hf(s)):(l.next=p.next,p.next=l),s.interleaved=l,si(i,d)}function si(i,s){i.lanes|=s;var l=i.alternate;for(l!==null&&(l.lanes|=s),l=i,i=i.return;i!==null;)i.childLanes|=s,l=i.alternate,l!==null&&(l.childLanes|=s),l=i,i=i.return;return l.tag===3?l.stateNode:null}var Wi=!1;function ff(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ly(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function oi(i,s){return{eventTime:i,lane:s,tag:0,payload:null,callback:null,next:null}}function Hi(i,s,l){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(Ge&2)!==0){var p=d.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),d.pending=s,si(i,l)}return p=d.interleaved,p===null?(s.next=s,hf(d)):(s.next=p.next,p.next=s),d.interleaved=s,si(i,l)}function hu(i,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var d=s.lanes;d&=i.pendingLanes,l|=d,s.lanes=l,al(i,l)}}function Vy(i,s){var l=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var p=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var T={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};g===null?p=g=T:g=g.next=T,l=l.next}while(l!==null);g===null?p=g=s:g=g.next=s}else p=g=s;l={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:d.shared,effects:d.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=s:i.next=s,l.lastBaseUpdate=s}function fu(i,s,l,d){var p=i.updateQueue;Wi=!1;var g=p.firstBaseUpdate,T=p.lastBaseUpdate,D=p.shared.pending;if(D!==null){p.shared.pending=null;var V=D,K=V.next;V.next=null,T===null?g=K:T.next=K,T=V;var ne=i.alternate;ne!==null&&(ne=ne.updateQueue,D=ne.lastBaseUpdate,D!==T&&(D===null?ne.firstBaseUpdate=K:D.next=K,ne.lastBaseUpdate=V))}if(g!==null){var ie=p.baseState;T=0,ne=K=V=null,D=g;do{var te=D.lane,de=D.eventTime;if((d&te)===te){ne!==null&&(ne=ne.next={eventTime:de,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var ge=i,Ee=D;switch(te=s,de=l,Ee.tag){case 1:if(ge=Ee.payload,typeof ge=="function"){ie=ge.call(de,ie,te);break e}ie=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Ee.payload,te=typeof ge=="function"?ge.call(de,ie,te):ge,te==null)break e;ie=ae({},ie,te);break e;case 2:Wi=!0}}D.callback!==null&&D.lane!==0&&(i.flags|=64,te=p.effects,te===null?p.effects=[D]:te.push(D))}else de={eventTime:de,lane:te,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ne===null?(K=ne=de,V=ie):ne=ne.next=de,T|=te;if(D=D.next,D===null){if(D=p.shared.pending,D===null)break;te=D,D=te.next,te.next=null,p.lastBaseUpdate=te,p.shared.pending=null}}while(!0);if(ne===null&&(V=ie),p.baseState=V,p.firstBaseUpdate=K,p.lastBaseUpdate=ne,s=p.shared.interleaved,s!==null){p=s;do T|=p.lane,p=p.next;while(p!==s)}else g===null&&(p.shared.lanes=0);Ks|=T,i.lanes=T,i.memoizedState=ie}}function Fy(i,s,l){if(i=s.effects,s.effects=null,i!==null)for(s=0;s<i.length;s++){var d=i[s],p=d.callback;if(p!==null){if(d.callback=null,d=l,typeof p!="function")throw Error(t(191,p));p.call(d)}}}var kl={},xr=zi(kl),Cl=zi(kl),bl=zi(kl);function qs(i){if(i===kl)throw Error(t(174));return i}function pf(i,s){switch(tt(bl,s),tt(Cl,i),tt(xr,kl),i=s.nodeType,i){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Io(null,"");break;default:i=i===8?s.parentNode:s,s=i.namespaceURI||null,i=i.tagName,s=Io(s,i)}it(xr),tt(xr,s)}function na(){it(xr),it(Cl),it(bl)}function jy(i){qs(bl.current);var s=qs(xr.current),l=Io(s,i.type);s!==l&&(tt(Cl,i),tt(xr,l))}function mf(i){Cl.current===i&&(it(xr),it(Cl))}var lt=zi(0);function pu(i){for(var s=i;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var gf=[];function yf(){for(var i=0;i<gf.length;i++)gf[i]._workInProgressVersionPrimary=null;gf.length=0}var mu=Y.ReactCurrentDispatcher,vf=Y.ReactCurrentBatchConfig,Gs=0,ct=null,Ct=null,Nt=null,gu=!1,Rl=!1,Pl=0,ox=0;function Kt(){throw Error(t(321))}function wf(i,s){if(s===null)return!1;for(var l=0;l<s.length&&l<i.length;l++)if(!Gn(i[l],s[l]))return!1;return!0}function _f(i,s,l,d,p,g){if(Gs=g,ct=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,mu.current=i===null||i.memoizedState===null?ux:dx,i=l(d,p),Rl){g=0;do{if(Rl=!1,Pl=0,25<=g)throw Error(t(301));g+=1,Nt=Ct=null,s.updateQueue=null,mu.current=hx,i=l(d,p)}while(Rl)}if(mu.current=wu,s=Ct!==null&&Ct.next!==null,Gs=0,Nt=Ct=ct=null,gu=!1,s)throw Error(t(300));return i}function Ef(){var i=Pl!==0;return Pl=0,i}function Ar(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?ct.memoizedState=Nt=i:Nt=Nt.next=i,Nt}function Mn(){if(Ct===null){var i=ct.alternate;i=i!==null?i.memoizedState:null}else i=Ct.next;var s=Nt===null?ct.memoizedState:Nt.next;if(s!==null)Nt=s,Ct=i;else{if(i===null)throw Error(t(310));Ct=i,i={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Nt===null?ct.memoizedState=Nt=i:Nt=Nt.next=i}return Nt}function Nl(i,s){return typeof s=="function"?s(i):s}function Tf(i){var s=Mn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var d=Ct,p=d.baseQueue,g=l.pending;if(g!==null){if(p!==null){var T=p.next;p.next=g.next,g.next=T}d.baseQueue=p=g,l.pending=null}if(p!==null){g=p.next,d=d.baseState;var D=T=null,V=null,K=g;do{var ne=K.lane;if((Gs&ne)===ne)V!==null&&(V=V.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),d=K.hasEagerState?K.eagerState:i(d,K.action);else{var ie={lane:ne,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};V===null?(D=V=ie,T=d):V=V.next=ie,ct.lanes|=ne,Ks|=ne}K=K.next}while(K!==null&&K!==g);V===null?T=d:V.next=D,Gn(d,s.memoizedState)||(cn=!0),s.memoizedState=d,s.baseState=T,s.baseQueue=V,l.lastRenderedState=d}if(i=l.interleaved,i!==null){p=i;do g=p.lane,ct.lanes|=g,Ks|=g,p=p.next;while(p!==i)}else p===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function If(i){var s=Mn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var d=l.dispatch,p=l.pending,g=s.memoizedState;if(p!==null){l.pending=null;var T=p=p.next;do g=i(g,T.action),T=T.next;while(T!==p);Gn(g,s.memoizedState)||(cn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),l.lastRenderedState=g}return[g,d]}function Uy(){}function zy(i,s){var l=ct,d=Mn(),p=s(),g=!Gn(d.memoizedState,p);if(g&&(d.memoizedState=p,cn=!0),d=d.queue,Sf(Wy.bind(null,l,d,i),[i]),d.getSnapshot!==s||g||Nt!==null&&Nt.memoizedState.tag&1){if(l.flags|=2048,Dl(9,$y.bind(null,l,d,p,s),void 0,null),Dt===null)throw Error(t(349));(Gs&30)!==0||By(l,s,p)}return p}function By(i,s,l){i.flags|=16384,i={getSnapshot:s,value:l},s=ct.updateQueue,s===null?(s={lastEffect:null,stores:null},ct.updateQueue=s,s.stores=[i]):(l=s.stores,l===null?s.stores=[i]:l.push(i))}function $y(i,s,l,d){s.value=l,s.getSnapshot=d,Hy(s)&&qy(i)}function Wy(i,s,l){return l(function(){Hy(s)&&qy(i)})}function Hy(i){var s=i.getSnapshot;i=i.value;try{var l=s();return!Gn(i,l)}catch{return!0}}function qy(i){var s=si(i,1);s!==null&&Jn(s,i,1,-1)}function Gy(i){var s=Ar();return typeof i=="function"&&(i=i()),s.memoizedState=s.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nl,lastRenderedState:i},s.queue=i,i=i.dispatch=cx.bind(null,ct,i),[s.memoizedState,i]}function Dl(i,s,l,d){return i={tag:i,create:s,destroy:l,deps:d,next:null},s=ct.updateQueue,s===null?(s={lastEffect:null,stores:null},ct.updateQueue=s,s.lastEffect=i.next=i):(l=s.lastEffect,l===null?s.lastEffect=i.next=i:(d=l.next,l.next=i,i.next=d,s.lastEffect=i)),i}function Ky(){return Mn().memoizedState}function yu(i,s,l,d){var p=Ar();ct.flags|=i,p.memoizedState=Dl(1|s,l,void 0,d===void 0?null:d)}function vu(i,s,l,d){var p=Mn();d=d===void 0?null:d;var g=void 0;if(Ct!==null){var T=Ct.memoizedState;if(g=T.destroy,d!==null&&wf(d,T.deps)){p.memoizedState=Dl(s,l,g,d);return}}ct.flags|=i,p.memoizedState=Dl(1|s,l,g,d)}function Qy(i,s){return yu(8390656,8,i,s)}function Sf(i,s){return vu(2048,8,i,s)}function Yy(i,s){return vu(4,2,i,s)}function Xy(i,s){return vu(4,4,i,s)}function Jy(i,s){if(typeof s=="function")return i=i(),s(i),function(){s(null)};if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Zy(i,s,l){return l=l!=null?l.concat([i]):null,vu(4,4,Jy.bind(null,s,i),l)}function xf(){}function ev(i,s){var l=Mn();s=s===void 0?null:s;var d=l.memoizedState;return d!==null&&s!==null&&wf(s,d[1])?d[0]:(l.memoizedState=[i,s],i)}function tv(i,s){var l=Mn();s=s===void 0?null:s;var d=l.memoizedState;return d!==null&&s!==null&&wf(s,d[1])?d[0]:(i=i(),l.memoizedState=[i,s],i)}function nv(i,s,l){return(Gs&21)===0?(i.baseState&&(i.baseState=!1,cn=!0),i.memoizedState=l):(Gn(l,s)||(l=sl(),ct.lanes|=l,Ks|=l,i.baseState=!0),s)}function ax(i,s){var l=He;He=l!==0&&4>l?l:4,i(!0);var d=vf.transition;vf.transition={};try{i(!1),s()}finally{He=l,vf.transition=d}}function rv(){return Mn().memoizedState}function lx(i,s,l){var d=Qi(i);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},iv(i))sv(s,l);else if(l=Oy(i,s,l,d),l!==null){var p=rn();Jn(l,i,d,p),ov(l,s,d)}}function cx(i,s,l){var d=Qi(i),p={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(iv(i))sv(s,p);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var T=s.lastRenderedState,D=g(T,l);if(p.hasEagerState=!0,p.eagerState=D,Gn(D,T)){var V=s.interleaved;V===null?(p.next=p,hf(s)):(p.next=V.next,V.next=p),s.interleaved=p;return}}catch{}finally{}l=Oy(i,s,p,d),l!==null&&(p=rn(),Jn(l,i,d,p),ov(l,s,d))}}function iv(i){var s=i.alternate;return i===ct||s!==null&&s===ct}function sv(i,s){Rl=gu=!0;var l=i.pending;l===null?s.next=s:(s.next=l.next,l.next=s),i.pending=s}function ov(i,s,l){if((l&4194240)!==0){var d=s.lanes;d&=i.pendingLanes,l|=d,s.lanes=l,al(i,l)}}var wu={readContext:Dn,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},ux={readContext:Dn,useCallback:function(i,s){return Ar().memoizedState=[i,s===void 0?null:s],i},useContext:Dn,useEffect:Qy,useImperativeHandle:function(i,s,l){return l=l!=null?l.concat([i]):null,yu(4194308,4,Jy.bind(null,s,i),l)},useLayoutEffect:function(i,s){return yu(4194308,4,i,s)},useInsertionEffect:function(i,s){return yu(4,2,i,s)},useMemo:function(i,s){var l=Ar();return s=s===void 0?null:s,i=i(),l.memoizedState=[i,s],i},useReducer:function(i,s,l){var d=Ar();return s=l!==void 0?l(s):s,d.memoizedState=d.baseState=s,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:s},d.queue=i,i=i.dispatch=lx.bind(null,ct,i),[d.memoizedState,i]},useRef:function(i){var s=Ar();return i={current:i},s.memoizedState=i},useState:Gy,useDebugValue:xf,useDeferredValue:function(i){return Ar().memoizedState=i},useTransition:function(){var i=Gy(!1),s=i[0];return i=ax.bind(null,i[1]),Ar().memoizedState=i,[s,i]},useMutableSource:function(){},useSyncExternalStore:function(i,s,l){var d=ct,p=Ar();if(ot){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),Dt===null)throw Error(t(349));(Gs&30)!==0||By(d,s,l)}p.memoizedState=l;var g={value:l,getSnapshot:s};return p.queue=g,Qy(Wy.bind(null,d,g,i),[i]),d.flags|=2048,Dl(9,$y.bind(null,d,g,l,s),void 0,null),l},useId:function(){var i=Ar(),s=Dt.identifierPrefix;if(ot){var l=ii,d=ri;l=(d&~(1<<32-yn(d)-1)).toString(32)+l,s=":"+s+"R"+l,l=Pl++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=ox++,s=":"+s+"r"+l.toString(32)+":";return i.memoizedState=s},unstable_isNewReconciler:!1},dx={readContext:Dn,useCallback:ev,useContext:Dn,useEffect:Sf,useImperativeHandle:Zy,useInsertionEffect:Yy,useLayoutEffect:Xy,useMemo:tv,useReducer:Tf,useRef:Ky,useState:function(){return Tf(Nl)},useDebugValue:xf,useDeferredValue:function(i){var s=Mn();return nv(s,Ct.memoizedState,i)},useTransition:function(){var i=Tf(Nl)[0],s=Mn().memoizedState;return[i,s]},useMutableSource:Uy,useSyncExternalStore:zy,useId:rv,unstable_isNewReconciler:!1},hx={readContext:Dn,useCallback:ev,useContext:Dn,useEffect:Sf,useImperativeHandle:Zy,useInsertionEffect:Yy,useLayoutEffect:Xy,useMemo:tv,useReducer:If,useRef:Ky,useState:function(){return If(Nl)},useDebugValue:xf,useDeferredValue:function(i){var s=Mn();return Ct===null?s.memoizedState=i:nv(s,Ct.memoizedState,i)},useTransition:function(){var i=If(Nl)[0],s=Mn().memoizedState;return[i,s]},useMutableSource:Uy,useSyncExternalStore:zy,useId:rv,unstable_isNewReconciler:!1};function Qn(i,s){if(i&&i.defaultProps){s=ae({},s),i=i.defaultProps;for(var l in i)s[l]===void 0&&(s[l]=i[l]);return s}return s}function Af(i,s,l,d){s=i.memoizedState,l=l(d,s),l=l==null?s:ae({},s,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var _u={isMounted:function(i){return(i=i._reactInternals)?Hn(i)===i:!1},enqueueSetState:function(i,s,l){i=i._reactInternals;var d=rn(),p=Qi(i),g=oi(d,p);g.payload=s,l!=null&&(g.callback=l),s=Hi(i,g,p),s!==null&&(Jn(s,i,p,d),hu(s,i,p))},enqueueReplaceState:function(i,s,l){i=i._reactInternals;var d=rn(),p=Qi(i),g=oi(d,p);g.tag=1,g.payload=s,l!=null&&(g.callback=l),s=Hi(i,g,p),s!==null&&(Jn(s,i,p,d),hu(s,i,p))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var l=rn(),d=Qi(i),p=oi(l,d);p.tag=2,s!=null&&(p.callback=s),s=Hi(i,p,d),s!==null&&(Jn(s,i,d,l),hu(s,i,d))}};function av(i,s,l,d,p,g,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,g,T):s.prototype&&s.prototype.isPureReactComponent?!wl(l,d)||!wl(p,g):!0}function lv(i,s,l){var d=!1,p=Bi,g=s.contextType;return typeof g=="object"&&g!==null?g=Dn(g):(p=ln(s)?Bs:Gt.current,d=s.contextTypes,g=(d=d!=null)?Qo(i,p):Bi),s=new s(l,g),i.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=_u,i.stateNode=s,s._reactInternals=i,d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=p,i.__reactInternalMemoizedMaskedChildContext=g),s}function cv(i,s,l,d){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,d),s.state!==i&&_u.enqueueReplaceState(s,s.state,null)}function kf(i,s,l,d){var p=i.stateNode;p.props=l,p.state=i.memoizedState,p.refs={},ff(i);var g=s.contextType;typeof g=="object"&&g!==null?p.context=Dn(g):(g=ln(s)?Bs:Gt.current,p.context=Qo(i,g)),p.state=i.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Af(i,s,g,l),p.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(s=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),s!==p.state&&_u.enqueueReplaceState(p,p.state,null),fu(i,l,p,d),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308)}function ra(i,s){try{var l="",d=s;do l+=Pe(d),d=d.return;while(d);var p=l}catch(g){p=`
Error generating stack: `+g.message+`
`+g.stack}return{value:i,source:s,stack:p,digest:null}}function Cf(i,s,l){return{value:i,source:null,stack:l??null,digest:s??null}}function bf(i,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var fx=typeof WeakMap=="function"?WeakMap:Map;function uv(i,s,l){l=oi(-1,l),l.tag=3,l.payload={element:null};var d=s.value;return l.callback=function(){ku||(ku=!0,Wf=d),bf(i,s)},l}function dv(i,s,l){l=oi(-1,l),l.tag=3;var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var p=s.value;l.payload=function(){return d(p)},l.callback=function(){bf(i,s)}}var g=i.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(l.callback=function(){bf(i,s),typeof d!="function"&&(Gi===null?Gi=new Set([this]):Gi.add(this));var T=s.stack;this.componentDidCatch(s.value,{componentStack:T!==null?T:""})}),l}function hv(i,s,l){var d=i.pingCache;if(d===null){d=i.pingCache=new fx;var p=new Set;d.set(s,p)}else p=d.get(s),p===void 0&&(p=new Set,d.set(s,p));p.has(l)||(p.add(l),i=kx.bind(null,i,s,l),s.then(i,i))}function fv(i){do{var s;if((s=i.tag===13)&&(s=i.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return i;i=i.return}while(i!==null);return null}function pv(i,s,l,d,p){return(i.mode&1)===0?(i===s?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=oi(-1,1),s.tag=2,Hi(l,s,1))),l.lanes|=1),i):(i.flags|=65536,i.lanes=p,i)}var px=Y.ReactCurrentOwner,cn=!1;function nn(i,s,l,d){s.child=i===null?My(s,null,l,d):Zo(s,i.child,l,d)}function mv(i,s,l,d,p){l=l.render;var g=s.ref;return ta(s,p),d=_f(i,s,l,d,g,p),l=Ef(),i!==null&&!cn?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~p,ai(i,s,p)):(ot&&l&&nf(s),s.flags|=1,nn(i,s,d,p),s.child)}function gv(i,s,l,d,p){if(i===null){var g=l.type;return typeof g=="function"&&!Xf(g)&&g.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=g,yv(i,s,g,d,p)):(i=Du(l.type,null,d,s,s.mode,p),i.ref=s.ref,i.return=s,s.child=i)}if(g=i.child,(i.lanes&p)===0){var T=g.memoizedProps;if(l=l.compare,l=l!==null?l:wl,l(T,d)&&i.ref===s.ref)return ai(i,s,p)}return s.flags|=1,i=Xi(g,d),i.ref=s.ref,i.return=s,s.child=i}function yv(i,s,l,d,p){if(i!==null){var g=i.memoizedProps;if(wl(g,d)&&i.ref===s.ref)if(cn=!1,s.pendingProps=d=g,(i.lanes&p)!==0)(i.flags&131072)!==0&&(cn=!0);else return s.lanes=i.lanes,ai(i,s,p)}return Rf(i,s,l,d,p)}function vv(i,s,l){var d=s.pendingProps,p=d.children,g=i!==null?i.memoizedState:null;if(d.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(sa,Sn),Sn|=l;else{if((l&1073741824)===0)return i=g!==null?g.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:i,cachePool:null,transitions:null},s.updateQueue=null,tt(sa,Sn),Sn|=i,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=g!==null?g.baseLanes:l,tt(sa,Sn),Sn|=d}else g!==null?(d=g.baseLanes|l,s.memoizedState=null):d=l,tt(sa,Sn),Sn|=d;return nn(i,s,p,l),s.child}function wv(i,s){var l=s.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function Rf(i,s,l,d,p){var g=ln(l)?Bs:Gt.current;return g=Qo(s,g),ta(s,p),l=_f(i,s,l,d,g,p),d=Ef(),i!==null&&!cn?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~p,ai(i,s,p)):(ot&&d&&nf(s),s.flags|=1,nn(i,s,l,p),s.child)}function _v(i,s,l,d,p){if(ln(l)){var g=!0;iu(s)}else g=!1;if(ta(s,p),s.stateNode===null)Tu(i,s),lv(s,l,d),kf(s,l,d,p),d=!0;else if(i===null){var T=s.stateNode,D=s.memoizedProps;T.props=D;var V=T.context,K=l.contextType;typeof K=="object"&&K!==null?K=Dn(K):(K=ln(l)?Bs:Gt.current,K=Qo(s,K));var ne=l.getDerivedStateFromProps,ie=typeof ne=="function"||typeof T.getSnapshotBeforeUpdate=="function";ie||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(D!==d||V!==K)&&cv(s,T,d,K),Wi=!1;var te=s.memoizedState;T.state=te,fu(s,d,T,p),V=s.memoizedState,D!==d||te!==V||an.current||Wi?(typeof ne=="function"&&(Af(s,l,ne,d),V=s.memoizedState),(D=Wi||av(s,l,D,d,te,V,K))?(ie||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(s.flags|=4194308)):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=V),T.props=d,T.state=V,T.context=K,d=D):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{T=s.stateNode,Ly(i,s),D=s.memoizedProps,K=s.type===s.elementType?D:Qn(s.type,D),T.props=K,ie=s.pendingProps,te=T.context,V=l.contextType,typeof V=="object"&&V!==null?V=Dn(V):(V=ln(l)?Bs:Gt.current,V=Qo(s,V));var de=l.getDerivedStateFromProps;(ne=typeof de=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(D!==ie||te!==V)&&cv(s,T,d,V),Wi=!1,te=s.memoizedState,T.state=te,fu(s,d,T,p);var ge=s.memoizedState;D!==ie||te!==ge||an.current||Wi?(typeof de=="function"&&(Af(s,l,de,d),ge=s.memoizedState),(K=Wi||av(s,l,K,d,te,ge,V)||!1)?(ne||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(d,ge,V),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(d,ge,V)),typeof T.componentDidUpdate=="function"&&(s.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof T.componentDidUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=ge),T.props=d,T.state=ge,T.context=V,d=K):(typeof T.componentDidUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&te===i.memoizedState||(s.flags|=1024),d=!1)}return Pf(i,s,l,d,g,p)}function Pf(i,s,l,d,p,g){wv(i,s);var T=(s.flags&128)!==0;if(!d&&!T)return p&&xy(s,l,!1),ai(i,s,g);d=s.stateNode,px.current=s;var D=T&&typeof l.getDerivedStateFromError!="function"?null:d.render();return s.flags|=1,i!==null&&T?(s.child=Zo(s,i.child,null,g),s.child=Zo(s,null,D,g)):nn(i,s,D,g),s.memoizedState=d.state,p&&xy(s,l,!0),s.child}function Ev(i){var s=i.stateNode;s.pendingContext?Iy(i,s.pendingContext,s.pendingContext!==s.context):s.context&&Iy(i,s.context,!1),pf(i,s.containerInfo)}function Tv(i,s,l,d,p){return Jo(),af(p),s.flags|=256,nn(i,s,l,d),s.child}var Nf={dehydrated:null,treeContext:null,retryLane:0};function Df(i){return{baseLanes:i,cachePool:null,transitions:null}}function Iv(i,s,l){var d=s.pendingProps,p=lt.current,g=!1,T=(s.flags&128)!==0,D;if((D=T)||(D=i!==null&&i.memoizedState===null?!1:(p&2)!==0),D?(g=!0,s.flags&=-129):(i===null||i.memoizedState!==null)&&(p|=1),tt(lt,p&1),i===null)return of(s),i=s.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((s.mode&1)===0?s.lanes=1:i.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(T=d.children,i=d.fallback,g?(d=s.mode,g=s.child,T={mode:"hidden",children:T},(d&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=T):g=Mu(T,d,0,null),i=Js(i,d,l,null),g.return=s,i.return=s,g.sibling=i,s.child=g,s.child.memoizedState=Df(l),s.memoizedState=Nf,i):Mf(s,T));if(p=i.memoizedState,p!==null&&(D=p.dehydrated,D!==null))return mx(i,s,T,d,D,p,l);if(g){g=d.fallback,T=s.mode,p=i.child,D=p.sibling;var V={mode:"hidden",children:d.children};return(T&1)===0&&s.child!==p?(d=s.child,d.childLanes=0,d.pendingProps=V,s.deletions=null):(d=Xi(p,V),d.subtreeFlags=p.subtreeFlags&14680064),D!==null?g=Xi(D,g):(g=Js(g,T,l,null),g.flags|=2),g.return=s,d.return=s,d.sibling=g,s.child=d,d=g,g=s.child,T=i.child.memoizedState,T=T===null?Df(l):{baseLanes:T.baseLanes|l,cachePool:null,transitions:T.transitions},g.memoizedState=T,g.childLanes=i.childLanes&~l,s.memoizedState=Nf,d}return g=i.child,i=g.sibling,d=Xi(g,{mode:"visible",children:d.children}),(s.mode&1)===0&&(d.lanes=l),d.return=s,d.sibling=null,i!==null&&(l=s.deletions,l===null?(s.deletions=[i],s.flags|=16):l.push(i)),s.child=d,s.memoizedState=null,d}function Mf(i,s){return s=Mu({mode:"visible",children:s},i.mode,0,null),s.return=i,i.child=s}function Eu(i,s,l,d){return d!==null&&af(d),Zo(s,i.child,null,l),i=Mf(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function mx(i,s,l,d,p,g,T){if(l)return s.flags&256?(s.flags&=-257,d=Cf(Error(t(422))),Eu(i,s,T,d)):s.memoizedState!==null?(s.child=i.child,s.flags|=128,null):(g=d.fallback,p=s.mode,d=Mu({mode:"visible",children:d.children},p,0,null),g=Js(g,p,T,null),g.flags|=2,d.return=s,g.return=s,d.sibling=g,s.child=d,(s.mode&1)!==0&&Zo(s,i.child,null,T),s.child.memoizedState=Df(T),s.memoizedState=Nf,g);if((s.mode&1)===0)return Eu(i,s,T,null);if(p.data==="$!"){if(d=p.nextSibling&&p.nextSibling.dataset,d)var D=d.dgst;return d=D,g=Error(t(419)),d=Cf(g,d,void 0),Eu(i,s,T,d)}if(D=(T&i.childLanes)!==0,cn||D){if(d=Dt,d!==null){switch(T&-T){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(d.suspendedLanes|T))!==0?0:p,p!==0&&p!==g.retryLane&&(g.retryLane=p,si(i,p),Jn(d,i,p,-1))}return Yf(),d=Cf(Error(t(421))),Eu(i,s,T,d)}return p.data==="$?"?(s.flags|=128,s.child=i.child,s=Cx.bind(null,i),p._reactRetry=s,null):(i=g.treeContext,In=Ui(p.nextSibling),Tn=s,ot=!0,Kn=null,i!==null&&(Pn[Nn++]=ri,Pn[Nn++]=ii,Pn[Nn++]=$s,ri=i.id,ii=i.overflow,$s=s),s=Mf(s,d.children),s.flags|=4096,s)}function Sv(i,s,l){i.lanes|=s;var d=i.alternate;d!==null&&(d.lanes|=s),df(i.return,s,l)}function Of(i,s,l,d,p){var g=i.memoizedState;g===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:p}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=l,g.tailMode=p)}function xv(i,s,l){var d=s.pendingProps,p=d.revealOrder,g=d.tail;if(nn(i,s,d.children,l),d=lt.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Sv(i,l,s);else if(i.tag===19)Sv(i,l,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}if(tt(lt,d),(s.mode&1)===0)s.memoizedState=null;else switch(p){case"forwards":for(l=s.child,p=null;l!==null;)i=l.alternate,i!==null&&pu(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=s.child,s.child=null):(p=l.sibling,l.sibling=null),Of(s,!1,p,l,g);break;case"backwards":for(l=null,p=s.child,s.child=null;p!==null;){if(i=p.alternate,i!==null&&pu(i)===null){s.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}Of(s,!0,l,null,g);break;case"together":Of(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Tu(i,s){(s.mode&1)===0&&i!==null&&(i.alternate=null,s.alternate=null,s.flags|=2)}function ai(i,s,l){if(i!==null&&(s.dependencies=i.dependencies),Ks|=s.lanes,(l&s.childLanes)===0)return null;if(i!==null&&s.child!==i.child)throw Error(t(153));if(s.child!==null){for(i=s.child,l=Xi(i,i.pendingProps),s.child=l,l.return=s;i.sibling!==null;)i=i.sibling,l=l.sibling=Xi(i,i.pendingProps),l.return=s;l.sibling=null}return s.child}function gx(i,s,l){switch(s.tag){case 3:Ev(s),Jo();break;case 5:jy(s);break;case 1:ln(s.type)&&iu(s);break;case 4:pf(s,s.stateNode.containerInfo);break;case 10:var d=s.type._context,p=s.memoizedProps.value;tt(uu,d._currentValue),d._currentValue=p;break;case 13:if(d=s.memoizedState,d!==null)return d.dehydrated!==null?(tt(lt,lt.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?Iv(i,s,l):(tt(lt,lt.current&1),i=ai(i,s,l),i!==null?i.sibling:null);tt(lt,lt.current&1);break;case 19:if(d=(l&s.childLanes)!==0,(i.flags&128)!==0){if(d)return xv(i,s,l);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),tt(lt,lt.current),d)break;return null;case 22:case 23:return s.lanes=0,vv(i,s,l)}return ai(i,s,l)}var Av,Lf,kv,Cv;Av=function(i,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Lf=function(){},kv=function(i,s,l,d){var p=i.memoizedProps;if(p!==d){i=s.stateNode,qs(xr.current);var g=null;switch(l){case"input":p=on(i,p),d=on(i,d),g=[];break;case"select":p=ae({},p,{value:void 0}),d=ae({},d,{value:void 0}),g=[];break;case"textarea":p=Ka(i,p),d=Ka(i,d),g=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(i.onclick=tu)}Wn(l,d);var T;l=null;for(K in p)if(!d.hasOwnProperty(K)&&p.hasOwnProperty(K)&&p[K]!=null)if(K==="style"){var D=p[K];for(T in D)D.hasOwnProperty(T)&&(l||(l={}),l[T]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(o.hasOwnProperty(K)?g||(g=[]):(g=g||[]).push(K,null));for(K in d){var V=d[K];if(D=p?.[K],d.hasOwnProperty(K)&&V!==D&&(V!=null||D!=null))if(K==="style")if(D){for(T in D)!D.hasOwnProperty(T)||V&&V.hasOwnProperty(T)||(l||(l={}),l[T]="");for(T in V)V.hasOwnProperty(T)&&D[T]!==V[T]&&(l||(l={}),l[T]=V[T])}else l||(g||(g=[]),g.push(K,l)),l=V;else K==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,D=D?D.__html:void 0,V!=null&&D!==V&&(g=g||[]).push(K,V)):K==="children"?typeof V!="string"&&typeof V!="number"||(g=g||[]).push(K,""+V):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(o.hasOwnProperty(K)?(V!=null&&K==="onScroll"&&rt("scroll",i),g||D===V||(g=[])):(g=g||[]).push(K,V))}l&&(g=g||[]).push("style",l);var K=g;(s.updateQueue=K)&&(s.flags|=4)}},Cv=function(i,s,l,d){l!==d&&(s.flags|=4)};function Ml(i,s){if(!ot)switch(i.tailMode){case"hidden":s=i.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function Qt(i){var s=i.alternate!==null&&i.alternate.child===i.child,l=0,d=0;if(s)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags&14680064,d|=p.flags&14680064,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=d,i.childLanes=l,s}function yx(i,s,l){var d=s.pendingProps;switch(rf(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(s),null;case 1:return ln(s.type)&&ru(),Qt(s),null;case 3:return d=s.stateNode,na(),it(an),it(Gt),yf(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(lu(s)?s.flags|=4:i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Kn!==null&&(Gf(Kn),Kn=null))),Lf(i,s),Qt(s),null;case 5:mf(s);var p=qs(bl.current);if(l=s.type,i!==null&&s.stateNode!=null)kv(i,s,l,d,p),i.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!d){if(s.stateNode===null)throw Error(t(166));return Qt(s),null}if(i=qs(xr.current),lu(s)){d=s.stateNode,l=s.type;var g=s.memoizedProps;switch(d[Sr]=s,d[Sl]=g,i=(s.mode&1)!==0,l){case"dialog":rt("cancel",d),rt("close",d);break;case"iframe":case"object":case"embed":rt("load",d);break;case"video":case"audio":for(p=0;p<El.length;p++)rt(El[p],d);break;case"source":rt("error",d);break;case"img":case"image":case"link":rt("error",d),rt("load",d);break;case"details":rt("toggle",d);break;case"input":Ii(d,g),rt("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!g.multiple},rt("invalid",d);break;case"textarea":Qa(d,g),rt("invalid",d)}Wn(l,g),p=null;for(var T in g)if(g.hasOwnProperty(T)){var D=g[T];T==="children"?typeof D=="string"?d.textContent!==D&&(g.suppressHydrationWarning!==!0&&eu(d.textContent,D,i),p=["children",D]):typeof D=="number"&&d.textContent!==""+D&&(g.suppressHydrationWarning!==!0&&eu(d.textContent,D,i),p=["children",""+D]):o.hasOwnProperty(T)&&D!=null&&T==="onScroll"&&rt("scroll",d)}switch(l){case"input":We(d),Ga(d,g,!0);break;case"textarea":We(d),Si(d);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(d.onclick=tu)}d=p,s.updateQueue=d,d!==null&&(s.flags|=4)}else{T=p.nodeType===9?p:p.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Ya(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=T.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof d.is=="string"?i=T.createElement(l,{is:d.is}):(i=T.createElement(l),l==="select"&&(T=i,d.multiple?T.multiple=!0:d.size&&(T.size=d.size))):i=T.createElementNS(i,l),i[Sr]=s,i[Sl]=d,Av(i,s,!1,!1),s.stateNode=i;e:{switch(T=xo(l,d),l){case"dialog":rt("cancel",i),rt("close",i),p=d;break;case"iframe":case"object":case"embed":rt("load",i),p=d;break;case"video":case"audio":for(p=0;p<El.length;p++)rt(El[p],i);p=d;break;case"source":rt("error",i),p=d;break;case"img":case"image":case"link":rt("error",i),rt("load",i),p=d;break;case"details":rt("toggle",i),p=d;break;case"input":Ii(i,d),p=on(i,d),rt("invalid",i);break;case"option":p=d;break;case"select":i._wrapperState={wasMultiple:!!d.multiple},p=ae({},d,{value:void 0}),rt("invalid",i);break;case"textarea":Qa(i,d),p=Ka(i,d),rt("invalid",i);break;default:p=d}Wn(l,p),D=p;for(g in D)if(D.hasOwnProperty(g)){var V=D[g];g==="style"?So(i,V):g==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&Cc(i,V)):g==="children"?typeof V=="string"?(l!=="textarea"||V!=="")&&ks(i,V):typeof V=="number"&&ks(i,""+V):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?V!=null&&g==="onScroll"&&rt("scroll",i):V!=null&&G(i,g,V,T))}switch(l){case"input":We(i),Ga(i,d,!1);break;case"textarea":We(i),Si(i);break;case"option":d.value!=null&&i.setAttribute("value",""+Se(d.value));break;case"select":i.multiple=!!d.multiple,g=d.value,g!=null?$n(i,!!d.multiple,g,!1):d.defaultValue!=null&&$n(i,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(i.onclick=tu)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Qt(s),null;case 6:if(i&&s.stateNode!=null)Cv(i,s,i.memoizedProps,d);else{if(typeof d!="string"&&s.stateNode===null)throw Error(t(166));if(l=qs(bl.current),qs(xr.current),lu(s)){if(d=s.stateNode,l=s.memoizedProps,d[Sr]=s,(g=d.nodeValue!==l)&&(i=Tn,i!==null))switch(i.tag){case 3:eu(d.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&eu(d.nodeValue,l,(i.mode&1)!==0)}g&&(s.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[Sr]=s,s.stateNode=d}return Qt(s),null;case 13:if(it(lt),d=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(ot&&In!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Py(),Jo(),s.flags|=98560,g=!1;else if(g=lu(s),d!==null&&d.dehydrated!==null){if(i===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Sr]=s}else Jo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Qt(s),g=!1}else Kn!==null&&(Gf(Kn),Kn=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(d=d!==null,d!==(i!==null&&i.memoizedState!==null)&&d&&(s.child.flags|=8192,(s.mode&1)!==0&&(i===null||(lt.current&1)!==0?bt===0&&(bt=3):Yf())),s.updateQueue!==null&&(s.flags|=4),Qt(s),null);case 4:return na(),Lf(i,s),i===null&&Tl(s.stateNode.containerInfo),Qt(s),null;case 10:return uf(s.type._context),Qt(s),null;case 17:return ln(s.type)&&ru(),Qt(s),null;case 19:if(it(lt),g=s.memoizedState,g===null)return Qt(s),null;if(d=(s.flags&128)!==0,T=g.rendering,T===null)if(d)Ml(g,!1);else{if(bt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(T=pu(i),T!==null){for(s.flags|=128,Ml(g,!1),d=T.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),s.subtreeFlags=0,d=l,l=s.child;l!==null;)g=l,i=d,g.flags&=14680066,T=g.alternate,T===null?(g.childLanes=0,g.lanes=i,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=T.childLanes,g.lanes=T.lanes,g.child=T.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=T.memoizedProps,g.memoizedState=T.memoizedState,g.updateQueue=T.updateQueue,g.type=T.type,i=T.dependencies,g.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return tt(lt,lt.current&1|2),s.child}i=i.sibling}g.tail!==null&&nt()>oa&&(s.flags|=128,d=!0,Ml(g,!1),s.lanes=4194304)}else{if(!d)if(i=pu(T),i!==null){if(s.flags|=128,d=!0,l=i.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),Ml(g,!0),g.tail===null&&g.tailMode==="hidden"&&!T.alternate&&!ot)return Qt(s),null}else 2*nt()-g.renderingStartTime>oa&&l!==1073741824&&(s.flags|=128,d=!0,Ml(g,!1),s.lanes=4194304);g.isBackwards?(T.sibling=s.child,s.child=T):(l=g.last,l!==null?l.sibling=T:s.child=T,g.last=T)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=nt(),s.sibling=null,l=lt.current,tt(lt,d?l&1|2:l&1),s):(Qt(s),null);case 22:case 23:return Qf(),d=s.memoizedState!==null,i!==null&&i.memoizedState!==null!==d&&(s.flags|=8192),d&&(s.mode&1)!==0?(Sn&1073741824)!==0&&(Qt(s),s.subtreeFlags&6&&(s.flags|=8192)):Qt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function vx(i,s){switch(rf(s),s.tag){case 1:return ln(s.type)&&ru(),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return na(),it(an),it(Gt),yf(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 5:return mf(s),null;case 13:if(it(lt),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Jo()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return it(lt),null;case 4:return na(),null;case 10:return uf(s.type._context),null;case 22:case 23:return Qf(),null;case 24:return null;default:return null}}var Iu=!1,Yt=!1,wx=typeof WeakSet=="function"?WeakSet:Set,fe=null;function ia(i,s){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){ht(i,s,d)}else l.current=null}function Vf(i,s,l){try{l()}catch(d){ht(i,s,d)}}var bv=!1;function _x(i,s){if(Kh=Jr,i=ay(),Uh(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var p=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var T=0,D=-1,V=-1,K=0,ne=0,ie=i,te=null;t:for(;;){for(var de;ie!==l||p!==0&&ie.nodeType!==3||(D=T+p),ie!==g||d!==0&&ie.nodeType!==3||(V=T+d),ie.nodeType===3&&(T+=ie.nodeValue.length),(de=ie.firstChild)!==null;)te=ie,ie=de;for(;;){if(ie===i)break t;if(te===l&&++K===p&&(D=T),te===g&&++ne===d&&(V=T),(de=ie.nextSibling)!==null)break;ie=te,te=ie.parentNode}ie=de}l=D===-1||V===-1?null:{start:D,end:V}}else l=null}l=l||{start:0,end:0}}else l=null;for(Qh={focusedElem:i,selectionRange:l},Jr=!1,fe=s;fe!==null;)if(s=fe,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,fe=i;else for(;fe!==null;){s=fe;try{var ge=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var Ee=ge.memoizedProps,yt=ge.memoizedState,W=s.stateNode,j=W.getSnapshotBeforeUpdate(s.elementType===s.type?Ee:Qn(s.type,Ee),yt);W.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var q=s.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){ht(s,s.return,se)}if(i=s.sibling,i!==null){i.return=s.return,fe=i;break}fe=s.return}return ge=bv,bv=!1,ge}function Ol(i,s,l){var d=s.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&i)===i){var g=p.destroy;p.destroy=void 0,g!==void 0&&Vf(s,l,g)}p=p.next}while(p!==d)}}function Su(i,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&i)===i){var d=l.create;l.destroy=d()}l=l.next}while(l!==s)}}function Ff(i){var s=i.ref;if(s!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof s=="function"?s(i):s.current=i}}function Rv(i){var s=i.alternate;s!==null&&(i.alternate=null,Rv(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&(delete s[Sr],delete s[Sl],delete s[Zh],delete s[nx],delete s[rx])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Pv(i){return i.tag===5||i.tag===3||i.tag===4}function Nv(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Pv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function jf(i,s,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(i,s):l.insertBefore(i,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(i,l)):(s=l,s.appendChild(i)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=tu));else if(d!==4&&(i=i.child,i!==null))for(jf(i,s,l),i=i.sibling;i!==null;)jf(i,s,l),i=i.sibling}function Uf(i,s,l){var d=i.tag;if(d===5||d===6)i=i.stateNode,s?l.insertBefore(i,s):l.appendChild(i);else if(d!==4&&(i=i.child,i!==null))for(Uf(i,s,l),i=i.sibling;i!==null;)Uf(i,s,l),i=i.sibling}var Ft=null,Yn=!1;function qi(i,s,l){for(l=l.child;l!==null;)Dv(i,s,l),l=l.sibling}function Dv(i,s,l){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(Ns,l)}catch{}switch(l.tag){case 5:Yt||ia(l,s);case 6:var d=Ft,p=Yn;Ft=null,qi(i,s,l),Ft=d,Yn=p,Ft!==null&&(Yn?(i=Ft,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):Ft.removeChild(l.stateNode));break;case 18:Ft!==null&&(Yn?(i=Ft,l=l.stateNode,i.nodeType===8?Jh(i.parentNode,l):i.nodeType===1&&Jh(i,l),Li(i)):Jh(Ft,l.stateNode));break;case 4:d=Ft,p=Yn,Ft=l.stateNode.containerInfo,Yn=!0,qi(i,s,l),Ft=d,Yn=p;break;case 0:case 11:case 14:case 15:if(!Yt&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){p=d=d.next;do{var g=p,T=g.destroy;g=g.tag,T!==void 0&&((g&2)!==0||(g&4)!==0)&&Vf(l,s,T),p=p.next}while(p!==d)}qi(i,s,l);break;case 1:if(!Yt&&(ia(l,s),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(D){ht(l,s,D)}qi(i,s,l);break;case 21:qi(i,s,l);break;case 22:l.mode&1?(Yt=(d=Yt)||l.memoizedState!==null,qi(i,s,l),Yt=d):qi(i,s,l);break;default:qi(i,s,l)}}function Mv(i){var s=i.updateQueue;if(s!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new wx),s.forEach(function(d){var p=bx.bind(null,i,d);l.has(d)||(l.add(d),d.then(p,p))})}}function Xn(i,s){var l=s.deletions;if(l!==null)for(var d=0;d<l.length;d++){var p=l[d];try{var g=i,T=s,D=T;e:for(;D!==null;){switch(D.tag){case 5:Ft=D.stateNode,Yn=!1;break e;case 3:Ft=D.stateNode.containerInfo,Yn=!0;break e;case 4:Ft=D.stateNode.containerInfo,Yn=!0;break e}D=D.return}if(Ft===null)throw Error(t(160));Dv(g,T,p),Ft=null,Yn=!1;var V=p.alternate;V!==null&&(V.return=null),p.return=null}catch(K){ht(p,s,K)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Ov(s,i),s=s.sibling}function Ov(i,s){var l=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Xn(s,i),kr(i),d&4){try{Ol(3,i,i.return),Su(3,i)}catch(Ee){ht(i,i.return,Ee)}try{Ol(5,i,i.return)}catch(Ee){ht(i,i.return,Ee)}}break;case 1:Xn(s,i),kr(i),d&512&&l!==null&&ia(l,l.return);break;case 5:if(Xn(s,i),kr(i),d&512&&l!==null&&ia(l,l.return),i.flags&32){var p=i.stateNode;try{ks(p,"")}catch(Ee){ht(i,i.return,Ee)}}if(d&4&&(p=i.stateNode,p!=null)){var g=i.memoizedProps,T=l!==null?l.memoizedProps:g,D=i.type,V=i.updateQueue;if(i.updateQueue=null,V!==null)try{D==="input"&&g.type==="radio"&&g.name!=null&&cr(p,g),xo(D,T);var K=xo(D,g);for(T=0;T<V.length;T+=2){var ne=V[T],ie=V[T+1];ne==="style"?So(p,ie):ne==="dangerouslySetInnerHTML"?Cc(p,ie):ne==="children"?ks(p,ie):G(p,ne,ie,K)}switch(D){case"input":Bn(p,g);break;case"textarea":kc(p,g);break;case"select":var te=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!g.multiple;var de=g.value;de!=null?$n(p,!!g.multiple,de,!1):te!==!!g.multiple&&(g.defaultValue!=null?$n(p,!!g.multiple,g.defaultValue,!0):$n(p,!!g.multiple,g.multiple?[]:"",!1))}p[Sl]=g}catch(Ee){ht(i,i.return,Ee)}}break;case 6:if(Xn(s,i),kr(i),d&4){if(i.stateNode===null)throw Error(t(162));p=i.stateNode,g=i.memoizedProps;try{p.nodeValue=g}catch(Ee){ht(i,i.return,Ee)}}break;case 3:if(Xn(s,i),kr(i),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Li(s.containerInfo)}catch(Ee){ht(i,i.return,Ee)}break;case 4:Xn(s,i),kr(i);break;case 13:Xn(s,i),kr(i),p=i.child,p.flags&8192&&(g=p.memoizedState!==null,p.stateNode.isHidden=g,!g||p.alternate!==null&&p.alternate.memoizedState!==null||($f=nt())),d&4&&Mv(i);break;case 22:if(ne=l!==null&&l.memoizedState!==null,i.mode&1?(Yt=(K=Yt)||ne,Xn(s,i),Yt=K):Xn(s,i),kr(i),d&8192){if(K=i.memoizedState!==null,(i.stateNode.isHidden=K)&&!ne&&(i.mode&1)!==0)for(fe=i,ne=i.child;ne!==null;){for(ie=fe=ne;fe!==null;){switch(te=fe,de=te.child,te.tag){case 0:case 11:case 14:case 15:Ol(4,te,te.return);break;case 1:ia(te,te.return);var ge=te.stateNode;if(typeof ge.componentWillUnmount=="function"){d=te,l=te.return;try{s=d,ge.props=s.memoizedProps,ge.state=s.memoizedState,ge.componentWillUnmount()}catch(Ee){ht(d,l,Ee)}}break;case 5:ia(te,te.return);break;case 22:if(te.memoizedState!==null){Fv(ie);continue}}de!==null?(de.return=te,fe=de):Fv(ie)}ne=ne.sibling}e:for(ne=null,ie=i;;){if(ie.tag===5){if(ne===null){ne=ie;try{p=ie.stateNode,K?(g=p.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(D=ie.stateNode,V=ie.memoizedProps.style,T=V!=null&&V.hasOwnProperty("display")?V.display:null,D.style.display=ki("display",T))}catch(Ee){ht(i,i.return,Ee)}}}else if(ie.tag===6){if(ne===null)try{ie.stateNode.nodeValue=K?"":ie.memoizedProps}catch(Ee){ht(i,i.return,Ee)}}else if((ie.tag!==22&&ie.tag!==23||ie.memoizedState===null||ie===i)&&ie.child!==null){ie.child.return=ie,ie=ie.child;continue}if(ie===i)break e;for(;ie.sibling===null;){if(ie.return===null||ie.return===i)break e;ne===ie&&(ne=null),ie=ie.return}ne===ie&&(ne=null),ie.sibling.return=ie.return,ie=ie.sibling}}break;case 19:Xn(s,i),kr(i),d&4&&Mv(i);break;case 21:break;default:Xn(s,i),kr(i)}}function kr(i){var s=i.flags;if(s&2){try{e:{for(var l=i.return;l!==null;){if(Pv(l)){var d=l;break e}l=l.return}throw Error(t(160))}switch(d.tag){case 5:var p=d.stateNode;d.flags&32&&(ks(p,""),d.flags&=-33);var g=Nv(i);Uf(i,g,p);break;case 3:case 4:var T=d.stateNode.containerInfo,D=Nv(i);jf(i,D,T);break;default:throw Error(t(161))}}catch(V){ht(i,i.return,V)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Ex(i,s,l){fe=i,Lv(i)}function Lv(i,s,l){for(var d=(i.mode&1)!==0;fe!==null;){var p=fe,g=p.child;if(p.tag===22&&d){var T=p.memoizedState!==null||Iu;if(!T){var D=p.alternate,V=D!==null&&D.memoizedState!==null||Yt;D=Iu;var K=Yt;if(Iu=T,(Yt=V)&&!K)for(fe=p;fe!==null;)T=fe,V=T.child,T.tag===22&&T.memoizedState!==null?jv(p):V!==null?(V.return=T,fe=V):jv(p);for(;g!==null;)fe=g,Lv(g),g=g.sibling;fe=p,Iu=D,Yt=K}Vv(i)}else(p.subtreeFlags&8772)!==0&&g!==null?(g.return=p,fe=g):Vv(i)}}function Vv(i){for(;fe!==null;){var s=fe;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Yt||Su(5,s);break;case 1:var d=s.stateNode;if(s.flags&4&&!Yt)if(l===null)d.componentDidMount();else{var p=s.elementType===s.type?l.memoizedProps:Qn(s.type,l.memoizedProps);d.componentDidUpdate(p,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&Fy(s,g,d);break;case 3:var T=s.updateQueue;if(T!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}Fy(s,T,l)}break;case 5:var D=s.stateNode;if(l===null&&s.flags&4){l=D;var V=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&l.focus();break;case"img":V.src&&(l.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var K=s.alternate;if(K!==null){var ne=K.memoizedState;if(ne!==null){var ie=ne.dehydrated;ie!==null&&Li(ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Yt||s.flags&512&&Ff(s)}catch(te){ht(s,s.return,te)}}if(s===i){fe=null;break}if(l=s.sibling,l!==null){l.return=s.return,fe=l;break}fe=s.return}}function Fv(i){for(;fe!==null;){var s=fe;if(s===i){fe=null;break}var l=s.sibling;if(l!==null){l.return=s.return,fe=l;break}fe=s.return}}function jv(i){for(;fe!==null;){var s=fe;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{Su(4,s)}catch(V){ht(s,l,V)}break;case 1:var d=s.stateNode;if(typeof d.componentDidMount=="function"){var p=s.return;try{d.componentDidMount()}catch(V){ht(s,p,V)}}var g=s.return;try{Ff(s)}catch(V){ht(s,g,V)}break;case 5:var T=s.return;try{Ff(s)}catch(V){ht(s,T,V)}}}catch(V){ht(s,s.return,V)}if(s===i){fe=null;break}var D=s.sibling;if(D!==null){D.return=s.return,fe=D;break}fe=s.return}}var Tx=Math.ceil,xu=Y.ReactCurrentDispatcher,zf=Y.ReactCurrentOwner,On=Y.ReactCurrentBatchConfig,Ge=0,Dt=null,Tt=null,jt=0,Sn=0,sa=zi(0),bt=0,Ll=null,Ks=0,Au=0,Bf=0,Vl=null,un=null,$f=0,oa=1/0,li=null,ku=!1,Wf=null,Gi=null,Cu=!1,Ki=null,bu=0,Fl=0,Hf=null,Ru=-1,Pu=0;function rn(){return(Ge&6)!==0?nt():Ru!==-1?Ru:Ru=nt()}function Qi(i){return(i.mode&1)===0?1:(Ge&2)!==0&&jt!==0?jt&-jt:sx.transition!==null?(Pu===0&&(Pu=sl()),Pu):(i=He,i!==0||(i=window.event,i=i===void 0?16:Oo(i.type)),i)}function Jn(i,s,l,d){if(50<Fl)throw Fl=0,Hf=null,Error(t(185));Ls(i,l,d),((Ge&2)===0||i!==Dt)&&(i===Dt&&((Ge&2)===0&&(Au|=l),bt===4&&Yi(i,jt)),dn(i,d),l===1&&Ge===0&&(s.mode&1)===0&&(oa=nt()+500,su&&$i()))}function dn(i,s){var l=i.callbackNode;Os(i,s);var d=Qr(i,i===Dt?jt:0);if(d===0)l!==null&&Co(l),i.callbackNode=null,i.callbackPriority=0;else if(s=d&-d,i.callbackPriority!==s){if(l!=null&&Co(l),s===1)i.tag===0?ix(zv.bind(null,i)):Ay(zv.bind(null,i)),ex(function(){(Ge&6)===0&&$i()}),l=null;else{switch(pr(d)){case 1:l=bo;break;case 4:l=nl;break;case 16:l=Ps;break;case 536870912:l=Ro;break;default:l=Ps}l=Qv(l,Uv.bind(null,i))}i.callbackPriority=s,i.callbackNode=l}}function Uv(i,s){if(Ru=-1,Pu=0,(Ge&6)!==0)throw Error(t(327));var l=i.callbackNode;if(aa()&&i.callbackNode!==l)return null;var d=Qr(i,i===Dt?jt:0);if(d===0)return null;if((d&30)!==0||(d&i.expiredLanes)!==0||s)s=Nu(i,d);else{s=d;var p=Ge;Ge|=2;var g=$v();(Dt!==i||jt!==s)&&(li=null,oa=nt()+500,Ys(i,s));do try{xx();break}catch(D){Bv(i,D)}while(!0);cf(),xu.current=g,Ge=p,Tt!==null?s=0:(Dt=null,jt=0,s=bt)}if(s!==0){if(s===2&&(p=il(i),p!==0&&(d=p,s=qf(i,p))),s===1)throw l=Ll,Ys(i,0),Yi(i,d),dn(i,nt()),l;if(s===6)Yi(i,d);else{if(p=i.current.alternate,(d&30)===0&&!Ix(p)&&(s=Nu(i,d),s===2&&(g=il(i),g!==0&&(d=g,s=qf(i,g))),s===1))throw l=Ll,Ys(i,0),Yi(i,d),dn(i,nt()),l;switch(i.finishedWork=p,i.finishedLanes=d,s){case 0:case 1:throw Error(t(345));case 2:Xs(i,un,li);break;case 3:if(Yi(i,d),(d&130023424)===d&&(s=$f+500-nt(),10<s)){if(Qr(i,0)!==0)break;if(p=i.suspendedLanes,(p&d)!==d){rn(),i.pingedLanes|=i.suspendedLanes&p;break}i.timeoutHandle=Xh(Xs.bind(null,i,un,li),s);break}Xs(i,un,li);break;case 4:if(Yi(i,d),(d&4194240)===d)break;for(s=i.eventTimes,p=-1;0<d;){var T=31-yn(d);g=1<<T,T=s[T],T>p&&(p=T),d&=~g}if(d=p,d=nt()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*Tx(d/1960))-d,10<d){i.timeoutHandle=Xh(Xs.bind(null,i,un,li),d);break}Xs(i,un,li);break;case 5:Xs(i,un,li);break;default:throw Error(t(329))}}}return dn(i,nt()),i.callbackNode===l?Uv.bind(null,i):null}function qf(i,s){var l=Vl;return i.current.memoizedState.isDehydrated&&(Ys(i,s).flags|=256),i=Nu(i,s),i!==2&&(s=un,un=l,s!==null&&Gf(s)),i}function Gf(i){un===null?un=i:un.push.apply(un,i)}function Ix(i){for(var s=i;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var p=l[d],g=p.getSnapshot;p=p.value;try{if(!Gn(g(),p))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Yi(i,s){for(s&=~Bf,s&=~Au,i.suspendedLanes|=s,i.pingedLanes&=~s,i=i.expirationTimes;0<s;){var l=31-yn(s),d=1<<l;i[l]=-1,s&=~d}}function zv(i){if((Ge&6)!==0)throw Error(t(327));aa();var s=Qr(i,0);if((s&1)===0)return dn(i,nt()),null;var l=Nu(i,s);if(i.tag!==0&&l===2){var d=il(i);d!==0&&(s=d,l=qf(i,d))}if(l===1)throw l=Ll,Ys(i,0),Yi(i,s),dn(i,nt()),l;if(l===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=s,Xs(i,un,li),dn(i,nt()),null}function Kf(i,s){var l=Ge;Ge|=1;try{return i(s)}finally{Ge=l,Ge===0&&(oa=nt()+500,su&&$i())}}function Qs(i){Ki!==null&&Ki.tag===0&&(Ge&6)===0&&aa();var s=Ge;Ge|=1;var l=On.transition,d=He;try{if(On.transition=null,He=1,i)return i()}finally{He=d,On.transition=l,Ge=s,(Ge&6)===0&&$i()}}function Qf(){Sn=sa.current,it(sa)}function Ys(i,s){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,Z1(l)),Tt!==null)for(l=Tt.return;l!==null;){var d=l;switch(rf(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&ru();break;case 3:na(),it(an),it(Gt),yf();break;case 5:mf(d);break;case 4:na();break;case 13:it(lt);break;case 19:it(lt);break;case 10:uf(d.type._context);break;case 22:case 23:Qf()}l=l.return}if(Dt=i,Tt=i=Xi(i.current,null),jt=Sn=s,bt=0,Ll=null,Bf=Au=Ks=0,un=Vl=null,Hs!==null){for(s=0;s<Hs.length;s++)if(l=Hs[s],d=l.interleaved,d!==null){l.interleaved=null;var p=d.next,g=l.pending;if(g!==null){var T=g.next;g.next=p,d.next=T}l.pending=d}Hs=null}return i}function Bv(i,s){do{var l=Tt;try{if(cf(),mu.current=wu,gu){for(var d=ct.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}gu=!1}if(Gs=0,Nt=Ct=ct=null,Rl=!1,Pl=0,zf.current=null,l===null||l.return===null){bt=1,Ll=s,Tt=null;break}e:{var g=i,T=l.return,D=l,V=s;if(s=jt,D.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var K=V,ne=D,ie=ne.tag;if((ne.mode&1)===0&&(ie===0||ie===11||ie===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var de=fv(T);if(de!==null){de.flags&=-257,pv(de,T,D,g,s),de.mode&1&&hv(g,K,s),s=de,V=K;var ge=s.updateQueue;if(ge===null){var Ee=new Set;Ee.add(V),s.updateQueue=Ee}else ge.add(V);break e}else{if((s&1)===0){hv(g,K,s),Yf();break e}V=Error(t(426))}}else if(ot&&D.mode&1){var yt=fv(T);if(yt!==null){(yt.flags&65536)===0&&(yt.flags|=256),pv(yt,T,D,g,s),af(ra(V,D));break e}}g=V=ra(V,D),bt!==4&&(bt=2),Vl===null?Vl=[g]:Vl.push(g),g=T;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var W=uv(g,V,s);Vy(g,W);break e;case 1:D=V;var j=g.type,q=g.stateNode;if((g.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(Gi===null||!Gi.has(q)))){g.flags|=65536,s&=-s,g.lanes|=s;var se=dv(g,D,s);Vy(g,se);break e}}g=g.return}while(g!==null)}Hv(l)}catch(Ie){s=Ie,Tt===l&&l!==null&&(Tt=l=l.return);continue}break}while(!0)}function $v(){var i=xu.current;return xu.current=wu,i===null?wu:i}function Yf(){(bt===0||bt===3||bt===2)&&(bt=4),Dt===null||(Ks&268435455)===0&&(Au&268435455)===0||Yi(Dt,jt)}function Nu(i,s){var l=Ge;Ge|=2;var d=$v();(Dt!==i||jt!==s)&&(li=null,Ys(i,s));do try{Sx();break}catch(p){Bv(i,p)}while(!0);if(cf(),Ge=l,xu.current=d,Tt!==null)throw Error(t(261));return Dt=null,jt=0,bt}function Sx(){for(;Tt!==null;)Wv(Tt)}function xx(){for(;Tt!==null&&!Rs();)Wv(Tt)}function Wv(i){var s=Kv(i.alternate,i,Sn);i.memoizedProps=i.pendingProps,s===null?Hv(i):Tt=s,zf.current=null}function Hv(i){var s=i;do{var l=s.alternate;if(i=s.return,(s.flags&32768)===0){if(l=yx(l,s,Sn),l!==null){Tt=l;return}}else{if(l=vx(l,s),l!==null){l.flags&=32767,Tt=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{bt=6,Tt=null;return}}if(s=s.sibling,s!==null){Tt=s;return}Tt=s=i}while(s!==null);bt===0&&(bt=5)}function Xs(i,s,l){var d=He,p=On.transition;try{On.transition=null,He=1,Ax(i,s,l,d)}finally{On.transition=p,He=d}return null}function Ax(i,s,l,d){do aa();while(Ki!==null);if((Ge&6)!==0)throw Error(t(327));l=i.finishedWork;var p=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var g=l.lanes|l.childLanes;if(Oh(i,g),i===Dt&&(Tt=Dt=null,jt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Cu||(Cu=!0,Qv(Ps,function(){return aa(),null})),g=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||g){g=On.transition,On.transition=null;var T=He;He=1;var D=Ge;Ge|=4,zf.current=null,_x(i,l),Ov(l,i),q1(Qh),Jr=!!Kh,Qh=Kh=null,i.current=l,Ex(l),Kr(),Ge=D,He=T,On.transition=g}else i.current=l;if(Cu&&(Cu=!1,Ki=i,bu=p),g=i.pendingLanes,g===0&&(Gi=null),jc(l.stateNode),dn(i,nt()),s!==null)for(d=i.onRecoverableError,l=0;l<s.length;l++)p=s[l],d(p.value,{componentStack:p.stack,digest:p.digest});if(ku)throw ku=!1,i=Wf,Wf=null,i;return(bu&1)!==0&&i.tag!==0&&aa(),g=i.pendingLanes,(g&1)!==0?i===Hf?Fl++:(Fl=0,Hf=i):Fl=0,$i(),null}function aa(){if(Ki!==null){var i=pr(bu),s=On.transition,l=He;try{if(On.transition=null,He=16>i?16:i,Ki===null)var d=!1;else{if(i=Ki,Ki=null,bu=0,(Ge&6)!==0)throw Error(t(331));var p=Ge;for(Ge|=4,fe=i.current;fe!==null;){var g=fe,T=g.child;if((fe.flags&16)!==0){var D=g.deletions;if(D!==null){for(var V=0;V<D.length;V++){var K=D[V];for(fe=K;fe!==null;){var ne=fe;switch(ne.tag){case 0:case 11:case 15:Ol(8,ne,g)}var ie=ne.child;if(ie!==null)ie.return=ne,fe=ie;else for(;fe!==null;){ne=fe;var te=ne.sibling,de=ne.return;if(Rv(ne),ne===K){fe=null;break}if(te!==null){te.return=de,fe=te;break}fe=de}}}var ge=g.alternate;if(ge!==null){var Ee=ge.child;if(Ee!==null){ge.child=null;do{var yt=Ee.sibling;Ee.sibling=null,Ee=yt}while(Ee!==null)}}fe=g}}if((g.subtreeFlags&2064)!==0&&T!==null)T.return=g,fe=T;else e:for(;fe!==null;){if(g=fe,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Ol(9,g,g.return)}var W=g.sibling;if(W!==null){W.return=g.return,fe=W;break e}fe=g.return}}var j=i.current;for(fe=j;fe!==null;){T=fe;var q=T.child;if((T.subtreeFlags&2064)!==0&&q!==null)q.return=T,fe=q;else e:for(T=j;fe!==null;){if(D=fe,(D.flags&2048)!==0)try{switch(D.tag){case 0:case 11:case 15:Su(9,D)}}catch(Ie){ht(D,D.return,Ie)}if(D===T){fe=null;break e}var se=D.sibling;if(se!==null){se.return=D.return,fe=se;break e}fe=D.return}}if(Ge=p,$i(),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(Ns,i)}catch{}d=!0}return d}finally{He=l,On.transition=s}}return!1}function qv(i,s,l){s=ra(l,s),s=uv(i,s,1),i=Hi(i,s,1),s=rn(),i!==null&&(Ls(i,1,s),dn(i,s))}function ht(i,s,l){if(i.tag===3)qv(i,i,l);else for(;s!==null;){if(s.tag===3){qv(s,i,l);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Gi===null||!Gi.has(d))){i=ra(l,i),i=dv(s,i,1),s=Hi(s,i,1),i=rn(),s!==null&&(Ls(s,1,i),dn(s,i));break}}s=s.return}}function kx(i,s,l){var d=i.pingCache;d!==null&&d.delete(s),s=rn(),i.pingedLanes|=i.suspendedLanes&l,Dt===i&&(jt&l)===l&&(bt===4||bt===3&&(jt&130023424)===jt&&500>nt()-$f?Ys(i,0):Bf|=l),dn(i,s)}function Gv(i,s){s===0&&((i.mode&1)===0?s=1:(s=Di,Di<<=1,(Di&130023424)===0&&(Di=4194304)));var l=rn();i=si(i,s),i!==null&&(Ls(i,s,l),dn(i,l))}function Cx(i){var s=i.memoizedState,l=0;s!==null&&(l=s.retryLane),Gv(i,l)}function bx(i,s){var l=0;switch(i.tag){case 13:var d=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:d=i.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(s),Gv(i,l)}var Kv;Kv=function(i,s,l){if(i!==null)if(i.memoizedProps!==s.pendingProps||an.current)cn=!0;else{if((i.lanes&l)===0&&(s.flags&128)===0)return cn=!1,gx(i,s,l);cn=(i.flags&131072)!==0}else cn=!1,ot&&(s.flags&1048576)!==0&&ky(s,au,s.index);switch(s.lanes=0,s.tag){case 2:var d=s.type;Tu(i,s),i=s.pendingProps;var p=Qo(s,Gt.current);ta(s,l),p=_f(null,s,d,i,p,l);var g=Ef();return s.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,ln(d)?(g=!0,iu(s)):g=!1,s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,ff(s),p.updater=_u,s.stateNode=p,p._reactInternals=s,kf(s,d,i,l),s=Pf(null,s,d,!0,g,l)):(s.tag=0,ot&&g&&nf(s),nn(null,s,p,l),s=s.child),s;case 16:d=s.elementType;e:{switch(Tu(i,s),i=s.pendingProps,p=d._init,d=p(d._payload),s.type=d,p=s.tag=Px(d),i=Qn(d,i),p){case 0:s=Rf(null,s,d,i,l);break e;case 1:s=_v(null,s,d,i,l);break e;case 11:s=mv(null,s,d,i,l);break e;case 14:s=gv(null,s,d,Qn(d.type,i),l);break e}throw Error(t(306,d,""))}return s;case 0:return d=s.type,p=s.pendingProps,p=s.elementType===d?p:Qn(d,p),Rf(i,s,d,p,l);case 1:return d=s.type,p=s.pendingProps,p=s.elementType===d?p:Qn(d,p),_v(i,s,d,p,l);case 3:e:{if(Ev(s),i===null)throw Error(t(387));d=s.pendingProps,g=s.memoizedState,p=g.element,Ly(i,s),fu(s,d,null,l);var T=s.memoizedState;if(d=T.element,g.isDehydrated)if(g={element:d,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){p=ra(Error(t(423)),s),s=Tv(i,s,d,l,p);break e}else if(d!==p){p=ra(Error(t(424)),s),s=Tv(i,s,d,l,p);break e}else for(In=Ui(s.stateNode.containerInfo.firstChild),Tn=s,ot=!0,Kn=null,l=My(s,null,d,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Jo(),d===p){s=ai(i,s,l);break e}nn(i,s,d,l)}s=s.child}return s;case 5:return jy(s),i===null&&of(s),d=s.type,p=s.pendingProps,g=i!==null?i.memoizedProps:null,T=p.children,Yh(d,p)?T=null:g!==null&&Yh(d,g)&&(s.flags|=32),wv(i,s),nn(i,s,T,l),s.child;case 6:return i===null&&of(s),null;case 13:return Iv(i,s,l);case 4:return pf(s,s.stateNode.containerInfo),d=s.pendingProps,i===null?s.child=Zo(s,null,d,l):nn(i,s,d,l),s.child;case 11:return d=s.type,p=s.pendingProps,p=s.elementType===d?p:Qn(d,p),mv(i,s,d,p,l);case 7:return nn(i,s,s.pendingProps,l),s.child;case 8:return nn(i,s,s.pendingProps.children,l),s.child;case 12:return nn(i,s,s.pendingProps.children,l),s.child;case 10:e:{if(d=s.type._context,p=s.pendingProps,g=s.memoizedProps,T=p.value,tt(uu,d._currentValue),d._currentValue=T,g!==null)if(Gn(g.value,T)){if(g.children===p.children&&!an.current){s=ai(i,s,l);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var D=g.dependencies;if(D!==null){T=g.child;for(var V=D.firstContext;V!==null;){if(V.context===d){if(g.tag===1){V=oi(-1,l&-l),V.tag=2;var K=g.updateQueue;if(K!==null){K=K.shared;var ne=K.pending;ne===null?V.next=V:(V.next=ne.next,ne.next=V),K.pending=V}}g.lanes|=l,V=g.alternate,V!==null&&(V.lanes|=l),df(g.return,l,s),D.lanes|=l;break}V=V.next}}else if(g.tag===10)T=g.type===s.type?null:g.child;else if(g.tag===18){if(T=g.return,T===null)throw Error(t(341));T.lanes|=l,D=T.alternate,D!==null&&(D.lanes|=l),df(T,l,s),T=g.sibling}else T=g.child;if(T!==null)T.return=g;else for(T=g;T!==null;){if(T===s){T=null;break}if(g=T.sibling,g!==null){g.return=T.return,T=g;break}T=T.return}g=T}nn(i,s,p.children,l),s=s.child}return s;case 9:return p=s.type,d=s.pendingProps.children,ta(s,l),p=Dn(p),d=d(p),s.flags|=1,nn(i,s,d,l),s.child;case 14:return d=s.type,p=Qn(d,s.pendingProps),p=Qn(d.type,p),gv(i,s,d,p,l);case 15:return yv(i,s,s.type,s.pendingProps,l);case 17:return d=s.type,p=s.pendingProps,p=s.elementType===d?p:Qn(d,p),Tu(i,s),s.tag=1,ln(d)?(i=!0,iu(s)):i=!1,ta(s,l),lv(s,d,p),kf(s,d,p,l),Pf(null,s,d,!0,i,l);case 19:return xv(i,s,l);case 22:return vv(i,s,l)}throw Error(t(156,s.tag))};function Qv(i,s){return tl(i,s)}function Rx(i,s,l,d){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(i,s,l,d){return new Rx(i,s,l,d)}function Xf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Px(i){if(typeof i=="function")return Xf(i)?1:0;if(i!=null){if(i=i.$$typeof,i===F)return 11;if(i===be)return 14}return 2}function Xi(i,s){var l=i.alternate;return l===null?(l=Ln(i.tag,s,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=s,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,s=i.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function Du(i,s,l,d,p,g){var T=2;if(d=i,typeof i=="function")Xf(i)&&(T=1);else if(typeof i=="string")T=5;else e:switch(i){case b:return Js(l.children,p,g,s);case A:T=8,p|=8;break;case N:return i=Ln(12,l,s,p|2),i.elementType=N,i.lanes=g,i;case R:return i=Ln(13,l,s,p),i.elementType=R,i.lanes=g,i;case _e:return i=Ln(19,l,s,p),i.elementType=_e,i.lanes=g,i;case we:return Mu(l,p,g,s);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case L:T=10;break e;case O:T=9;break e;case F:T=11;break e;case be:T=14;break e;case Te:T=16,d=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return s=Ln(T,l,s,p),s.elementType=i,s.type=d,s.lanes=g,s}function Js(i,s,l,d){return i=Ln(7,i,d,s),i.lanes=l,i}function Mu(i,s,l,d){return i=Ln(22,i,d,s),i.elementType=we,i.lanes=l,i.stateNode={isHidden:!1},i}function Jf(i,s,l){return i=Ln(6,i,null,s),i.lanes=l,i}function Zf(i,s,l){return s=Ln(4,i.children!==null?i.children:[],i.key,s),s.lanes=l,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}function Nx(i,s,l,d,p){this.tag=s,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ol(0),this.expirationTimes=ol(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ol(0),this.identifierPrefix=d,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function ep(i,s,l,d,p,g,T,D,V){return i=new Nx(i,s,l,D,V),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Ln(3,null,null,s),i.current=g,g.stateNode=i,g.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},ff(g),i}function Dx(i,s,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oe,key:d==null?null:""+d,children:i,containerInfo:s,implementation:l}}function Yv(i){if(!i)return Bi;i=i._reactInternals;e:{if(Hn(i)!==i||i.tag!==1)throw Error(t(170));var s=i;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(ln(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(i.tag===1){var l=i.type;if(ln(l))return Sy(i,l,s)}return s}function Xv(i,s,l,d,p,g,T,D,V){return i=ep(l,d,!0,i,p,g,T,D,V),i.context=Yv(null),l=i.current,d=rn(),p=Qi(l),g=oi(d,p),g.callback=s??null,Hi(l,g,p),i.current.lanes=p,Ls(i,p,d),dn(i,d),i}function Ou(i,s,l,d){var p=s.current,g=rn(),T=Qi(p);return l=Yv(l),s.context===null?s.context=l:s.pendingContext=l,s=oi(g,T),s.payload={element:i},d=d===void 0?null:d,d!==null&&(s.callback=d),i=Hi(p,s,T),i!==null&&(Jn(i,p,T,g),hu(i,p,T)),T}function Lu(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Jv(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<s?l:s}}function tp(i,s){Jv(i,s),(i=i.alternate)&&Jv(i,s)}function Mx(){return null}var Zv=typeof reportError=="function"?reportError:function(i){console.error(i)};function np(i){this._internalRoot=i}Vu.prototype.render=np.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(t(409));Ou(i,s,null,null)},Vu.prototype.unmount=np.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;Qs(function(){Ou(null,i,null,null)}),s[ti]=null}};function Vu(i){this._internalRoot=i}Vu.prototype.unstable_scheduleHydration=function(i){if(i){var s=ul();i={blockedOn:null,target:i,priority:s};for(var l=0;l<vn.length&&s!==0&&s<vn[l].priority;l++);vn.splice(l,0,i),l===0&&Do(i)}};function rp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Fu(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function ew(){}function Ox(i,s,l,d,p){if(p){if(typeof d=="function"){var g=d;d=function(){var K=Lu(T);g.call(K)}}var T=Xv(s,d,i,0,null,!1,!1,"",ew);return i._reactRootContainer=T,i[ti]=T.current,Tl(i.nodeType===8?i.parentNode:i),Qs(),T}for(;p=i.lastChild;)i.removeChild(p);if(typeof d=="function"){var D=d;d=function(){var K=Lu(V);D.call(K)}}var V=ep(i,0,!1,null,null,!1,!1,"",ew);return i._reactRootContainer=V,i[ti]=V.current,Tl(i.nodeType===8?i.parentNode:i),Qs(function(){Ou(s,V,l,d)}),V}function ju(i,s,l,d,p){var g=l._reactRootContainer;if(g){var T=g;if(typeof p=="function"){var D=p;p=function(){var V=Lu(T);D.call(V)}}Ou(s,T,i,p)}else T=Ox(l,s,i,p,d);return Lu(T)}ll=function(i){switch(i.tag){case 3:var s=i.stateNode;if(s.current.memoizedState.isDehydrated){var l=Ye(s.pendingLanes);l!==0&&(al(s,l|1),dn(s,nt()),(Ge&6)===0&&(oa=nt()+500,$i()))}break;case 13:Qs(function(){var d=si(i,1);if(d!==null){var p=rn();Jn(d,i,1,p)}}),tp(i,1)}},Po=function(i){if(i.tag===13){var s=si(i,134217728);if(s!==null){var l=rn();Jn(s,i,134217728,l)}tp(i,134217728)}},cl=function(i){if(i.tag===13){var s=Qi(i),l=si(i,s);if(l!==null){var d=rn();Jn(l,i,s,d)}tp(i,s)}},ul=function(){return He},dl=function(i,s){var l=He;try{return He=i,s()}finally{He=l}},Hr=function(i,s,l){switch(s){case"input":if(Bn(i,l),s=l.name,l.type==="radio"&&s!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var d=l[s];if(d!==i&&d.form===i.form){var p=nu(d);if(!p)throw Error(t(90));Qe(d),Bn(d,p)}}}break;case"textarea":kc(i,l);break;case"select":s=l.value,s!=null&&$n(i,!!l.multiple,s,!1)}},Rc=Kf,Pc=Qs;var Lx={usingClientEntryPoint:!1,Events:[xl,Go,nu,bi,Ri,Kf]},jl={findFiberByHostInstance:zs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vx={bundleType:jl.bundleType,version:jl.version,rendererPackageName:jl.rendererPackageName,rendererConfig:jl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Y.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Fc(i),i===null?null:i.stateNode},findFiberByHostInstance:jl.findFiberByHostInstance||Mx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uu.isDisabled&&Uu.supportsFiber)try{Ns=Uu.inject(Vx),gn=Uu}catch{}}return hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lx,hn.createPortal=function(i,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rp(s))throw Error(t(200));return Dx(i,s,null,l)},hn.createRoot=function(i,s){if(!rp(i))throw Error(t(299));var l=!1,d="",p=Zv;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(p=s.onRecoverableError)),s=ep(i,1,!1,null,null,l,!1,d,p),i[ti]=s.current,Tl(i.nodeType===8?i.parentNode:i),new np(s)},hn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Fc(s),i=i===null?null:i.stateNode,i},hn.flushSync=function(i){return Qs(i)},hn.hydrate=function(i,s,l){if(!Fu(s))throw Error(t(200));return ju(null,i,s,!0,l)},hn.hydrateRoot=function(i,s,l){if(!rp(i))throw Error(t(405));var d=l!=null&&l.hydratedSources||null,p=!1,g="",T=Zv;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),s=Xv(s,null,i,1,l??null,p,!1,g,T),i[ti]=s.current,Tl(i),d)for(i=0;i<d.length;i++)l=d[i],p=l._getVersion,p=p(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,p]:s.mutableSourceEagerHydrationData.push(l,p);return new Vu(s)},hn.render=function(i,s,l){if(!Fu(s))throw Error(t(200));return ju(null,i,s,!1,l)},hn.unmountComponentAtNode=function(i){if(!Fu(i))throw Error(t(40));return i._reactRootContainer?(Qs(function(){ju(null,null,i,!1,function(){i._reactRootContainer=null,i[ti]=null})}),!0):!1},hn.unstable_batchedUpdates=Kf,hn.unstable_renderSubtreeIntoContainer=function(i,s,l,d){if(!Fu(l))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return ju(i,s,l,!1,d)},hn.version="18.3.1-next-f1338f8080-20240426",hn}var lw;function B0(){if(lw)return op.exports;lw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),op.exports=Hx(),op.exports}var cw;function qx(){if(cw)return zu;cw=1;var n=B0();return zu.createRoot=n.createRoot,zu.hydrateRoot=n.hydrateRoot,zu}var Gx=qx(),P=Wd();const ts=z0(P),$0=jx({__proto__:null,default:ts},[P]);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Qx=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),uw=n=>{const e=Qx(n);return e.charAt(0).toUpperCase()+e.slice(1)},W0=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=P.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:o="",children:a,iconNode:c,...h},f)=>P.createElement("svg",{ref:f,...Yx,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:W0("lucide",o),...h},[...c.map(([m,v])=>P.createElement(m,v)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=(n,e)=>{const t=P.forwardRef(({className:r,...o},a)=>P.createElement(Xx,{ref:a,iconNode:e,className:W0(`lucide-${Kx(uw(n))}`,`lucide-${n}`,r),...o}));return t.displayName=uw(n),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],md=wt("arrow-left",Jx);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],eA=wt("check",Zx);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],H0=wt("chevron-down",tA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],rA=wt("chevron-up",nA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],sA=wt("compass",iA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],aA=wt("frown",oA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],cA=wt("funnel",lA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],q0=wt("heart",uA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ei=wt("loader-circle",dA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],fA=wt("log-out",hA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],td=wt("map-pin",pA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],gA=wt("message-circle",mA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],vA=wt("save",yA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],_A=wt("search",wA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],TA=wt("send",EA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],SA=wt("sliders-horizontal",IA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],AA=wt("square-pen",xA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Sm=wt("star",kA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],bA=wt("trending-up",CA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],PA=wt("wind",RA);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],G0=wt("x",NA),DA=()=>{};var dw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let o=n.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},MA=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const o=n[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[r++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],c=n[t++],h=n[t++],f=((o&7)<<18|(a&63)<<12|(c&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],c=n[t++];e[r++]=String.fromCharCode((o&15)<<12|(a&63)<<6|c&63)}}return e.join("")},Q0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<n.length;o+=3){const a=n[o],c=o+1<n.length,h=c?n[o+1]:0,f=o+2<n.length,m=f?n[o+2]:0,v=a>>2,_=(a&3)<<4|h>>4;let E=(h&15)<<2|m>>6,S=m&63;f||(S=64,c||(E=64)),r.push(t[v],t[_],t[E],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(K0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):MA(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],h=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const _=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||h==null||m==null||_==null)throw new OA;const E=a<<2|h>>4;if(r.push(E),m!==64){const S=h<<4&240|m>>2;if(r.push(S),_!==64){const M=m<<6&192|_;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class OA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const LA=function(n){const e=K0(n);return Q0.encodeByteArray(e,!0)},gd=function(n){return LA(n).replace(/\./g,"")},Y0=function(n){try{return Q0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=()=>VA().__FIREBASE_DEFAULTS__,jA=()=>{if(typeof process>"u"||typeof dw>"u")return;const n=dw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},UA=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Y0(n[1]);return e&&JSON.parse(e)},Hd=()=>{try{return DA()||FA()||jA()||UA()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},X0=n=>Hd()?.emulatorHosts?.[n],zA=n=>{const e=X0(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},J0=()=>Hd()?.config,Z0=n=>Hd()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function eE(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[gd(JSON.stringify(t)),gd(JSON.stringify(c)),""].join(".")}const Yl={};function WA(){const n={prod:[],emulator:[]};for(const e of Object.keys(Yl))Yl[e]?n.emulator.push(e):n.prod.push(e);return n}function HA(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let hw=!1;function tE(n,e){if(typeof window>"u"||typeof document>"u"||!Ma(window.location.host)||Yl[n]===e||Yl[n]||hw)return;Yl[n]=e;function t(E){return`__firebase__banner__${E}`}const r="__firebase__banner",a=WA().prod.length>0;function c(){const E=document.getElementById(r);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function f(E,S){E.setAttribute("width","24"),E.setAttribute("id",S),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function m(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{hw=!0,c()},E}function v(E,S){E.setAttribute("id",S),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function _(){const E=HA(r),S=t("text"),M=document.getElementById(S)||document.createElement("span"),x=t("learnmore"),C=document.getElementById(x)||document.createElement("a"),U=t("preprendIcon"),B=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const G=E.element;h(G),v(C,x);const Y=m();f(B,U),G.append(B,M,C,Y),document.body.appendChild(G)}a?(M.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function GA(){const n=Hd()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xm(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function QA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YA(){const n=en();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function XA(){return!GA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Am(){try{return typeof indexedDB=="object"}catch{return!1}}function km(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}function nE(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="FirebaseError";class lr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=JA,Object.setPrototypeOf(this,lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mo.prototype.create)}}class mo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],c=a?ZA(a,r):"Error",h=`${this.serviceName}: ${c} (${o}).`;return new lr(o,h,r)}}function ZA(n,e){return n.replace(ek,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const ek=/\{\$([^}]+)}/g;function tk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function jr(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const a=n[o],c=e[o];if(fw(a)&&fw(c)){if(!jr(a,c))return!1}else if(a!==c)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function fw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $l(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,a]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function Wl(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function nk(n,e){const t=new rk(n,e);return t.subscribe.bind(t)}class rk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");ik(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=cp),o.error===void 0&&(o.error=cp),o.complete===void 0&&(o.complete=cp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ik(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function cp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=1e3,ok=2,ak=14400*1e3,lk=.5;function pw(n,e=sk,t=ok){const r=e*Math.pow(t,n),o=Math.round(lk*r*(Math.random()-.5)*2);return Math.min(ak,r+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(n){return n&&n._delegate?n._delegate:n}class ir{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new BA;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dk(e))try{this.getOrInitializeService({instanceIdentifier:eo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});r.resolve(a)}catch{}}}}clearInstance(e=eo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=eo){return this.instances.has(e)}getOptions(e=eo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&c.resolve(o)}return o}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const a=this.instances.get(r);return a&&e(a,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:uk(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=eo){return this.component?this.component.multipleInstances?e:eo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uk(n){return n===eo?void 0:n}function dk(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ck(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ze||(ze={}));const fk={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},pk=ze.INFO,mk={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},gk=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),o=mk[e];if(o)console[o](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qd{constructor(e){this.name=e,this._logLevel=pk,this._logHandler=gk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const yk=(n,e)=>e.some(t=>n instanceof t);let mw,gw;function vk(){return mw||(mw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wk(){return gw||(gw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rE=new WeakMap,Vp=new WeakMap,iE=new WeakMap,up=new WeakMap,Cm=new WeakMap;function _k(n){const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(as(n.result)),o()},c=()=>{r(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&rE.set(t,n)}).catch(()=>{}),Cm.set(e,n),e}function Ek(n){if(Vp.has(n))return;const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),o()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});Vp.set(n,e)}let Fp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Vp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||iE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return as(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Tk(n){Fp=n(Fp)}function Ik(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(dp(this),e,...t);return iE.set(r,e.sort?e.sort():[e]),as(r)}:wk().includes(n)?function(...e){return n.apply(dp(this),e),as(rE.get(this))}:function(...e){return as(n.apply(dp(this),e))}}function Sk(n){return typeof n=="function"?Ik(n):(n instanceof IDBTransaction&&Ek(n),yk(n,vk())?new Proxy(n,Fp):n)}function as(n){if(n instanceof IDBRequest)return _k(n);if(up.has(n))return up.get(n);const e=Sk(n);return e!==n&&(up.set(n,e),Cm.set(e,n)),e}const dp=n=>Cm.get(n);function sE(n,e,{blocked:t,upgrade:r,blocking:o,terminated:a}={}){const c=indexedDB.open(n,e),h=as(c);return r&&c.addEventListener("upgradeneeded",f=>{r(as(c.result),f.oldVersion,f.newVersion,as(c.transaction),f)}),t&&c.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),o&&f.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const xk=["get","getKey","getAll","getAllKeys","count"],Ak=["put","add","delete","clear"],hp=new Map;function yw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(hp.get(e))return hp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=Ak.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||xk.includes(t)))return;const a=async function(c,...h){const f=this.transaction(c,o?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),o&&f.done]))[0]};return hp.set(e,a),a}Tk(n=>({...n,get:(e,t,r)=>yw(e,t)||n.get(e,t,r),has:(e,t)=>!!yw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Ck(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Ck(n){return n.getComponent()?.type==="VERSION"}const jp="@firebase/app",vw="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=new qd("@firebase/app"),bk="@firebase/app-compat",Rk="@firebase/analytics-compat",Pk="@firebase/analytics",Nk="@firebase/app-check-compat",Dk="@firebase/app-check",Mk="@firebase/auth",Ok="@firebase/auth-compat",Lk="@firebase/database",Vk="@firebase/data-connect",Fk="@firebase/database-compat",jk="@firebase/functions",Uk="@firebase/functions-compat",zk="@firebase/installations",Bk="@firebase/installations-compat",$k="@firebase/messaging",Wk="@firebase/messaging-compat",Hk="@firebase/performance",qk="@firebase/performance-compat",Gk="@firebase/remote-config",Kk="@firebase/remote-config-compat",Qk="@firebase/storage",Yk="@firebase/storage-compat",Xk="@firebase/firestore",Jk="@firebase/ai",Zk="@firebase/firestore-compat",eC="firebase",tC="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="[DEFAULT]",nC={[jp]:"fire-core",[bk]:"fire-core-compat",[Pk]:"fire-analytics",[Rk]:"fire-analytics-compat",[Dk]:"fire-app-check",[Nk]:"fire-app-check-compat",[Mk]:"fire-auth",[Ok]:"fire-auth-compat",[Lk]:"fire-rtdb",[Vk]:"fire-data-connect",[Fk]:"fire-rtdb-compat",[jk]:"fire-fn",[Uk]:"fire-fn-compat",[zk]:"fire-iid",[Bk]:"fire-iid-compat",[$k]:"fire-fcm",[Wk]:"fire-fcm-compat",[Hk]:"fire-perf",[qk]:"fire-perf-compat",[Gk]:"fire-rc",[Kk]:"fire-rc-compat",[Qk]:"fire-gcs",[Yk]:"fire-gcs-compat",[Xk]:"fire-fst",[Zk]:"fire-fst-compat",[Jk]:"fire-vertex","fire-js":"fire-js",[eC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=new Map,rC=new Map,zp=new Map;function ww(n,e){try{n.container.addComponent(e)}catch(t){mi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ur(n){const e=n.name;if(zp.has(e))return mi.debug(`There were multiple attempts to register component ${e}.`),!1;zp.set(e,n);for(const t of nc.values())ww(t,n);for(const t of rC.values())ww(t,n);return!0}function go(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Vn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ls=new mo("app","Firebase",iC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ls.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=tC;function oE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Up,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw ls.create("bad-app-name",{appName:String(o)});if(t||(t=J0()),!t)throw ls.create("no-options");const a=nc.get(o);if(a){if(jr(t,a.options)&&jr(r,a.config))return a;throw ls.create("duplicate-app",{appName:o})}const c=new hk(o);for(const f of zp.values())c.addComponent(f);const h=new sC(t,r,c);return nc.set(o,h),h}function Gd(n=Up){const e=nc.get(n);if(!e&&n===Up&&J0())return oE();if(!e)throw ls.create("no-app",{appName:n});return e}function oC(){return Array.from(nc.values())}function jn(n,e,t){let r=nC[n]??n;t&&(r+=`-${t}`);const o=r.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mi.warn(c.join(" "));return}Ur(new ir(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="firebase-heartbeat-database",lC=1,rc="firebase-heartbeat-store";let fp=null;function aE(){return fp||(fp=sE(aC,lC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(rc)}catch(t){console.warn(t)}}}}).catch(n=>{throw ls.create("idb-open",{originalErrorMessage:n.message})})),fp}async function cC(n){try{const t=(await aE()).transaction(rc),r=await t.objectStore(rc).get(lE(n));return await t.done,r}catch(e){if(e instanceof lr)mi.warn(e.message);else{const t=ls.create("idb-get",{originalErrorMessage:e?.message});mi.warn(t.message)}}}async function _w(n,e){try{const r=(await aE()).transaction(rc,"readwrite");await r.objectStore(rc).put(e,lE(n)),await r.done}catch(t){if(t instanceof lr)mi.warn(t.message);else{const r=ls.create("idb-set",{originalErrorMessage:t?.message});mi.warn(r.message)}}}function lE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=1024,dC=30;class hC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new pC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ew();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>dC){const o=mC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){mi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Ew(),{heartbeatsToSend:t,unsentEntries:r}=fC(this._heartbeatsCache.heartbeats),o=gd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return mi.warn(e),""}}}function Ew(){return new Date().toISOString().substring(0,10)}function fC(n,e=uC){const t=[];let r=n.slice();for(const o of n){const a=t.find(c=>c.agent===o.agent);if(a){if(a.dates.push(o.date),Tw(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Tw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class pC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Am()?km().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await cC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return _w(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return _w(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Tw(n){return gd(JSON.stringify({version:2,heartbeats:n})).length}function mC(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(n){Ur(new ir("platform-logger",e=>new kk(e),"PRIVATE")),Ur(new ir("heartbeat",e=>new hC(e),"PRIVATE")),jn(jp,vw,n),jn(jp,vw,"esm2020"),jn("fire-js","")}gC("");var yC="firebase",vC="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jn(yC,vC,"app");const cE="@firebase/installations",bm="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=1e4,dE=`w:${bm}`,hE="FIS_v2",wC="https://firebaseinstallations.googleapis.com/v1",_C=3600*1e3,EC="installations",TC="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},oo=new mo(EC,TC,IC);function fE(n){return n instanceof lr&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE({projectId:n}){return`${wC}/projects/${n}/installations`}function mE(n){return{token:n.token,requestStatus:2,expiresIn:xC(n.expiresIn),creationTime:Date.now()}}async function gE(n,e){const r=(await e.json()).error;return oo.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function yE({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function SC(n,{refreshToken:e}){const t=yE(n);return t.append("Authorization",AC(e)),t}async function vE(n){const e=await n();return e.status>=500&&e.status<600?n():e}function xC(n){return Number(n.replace("s","000"))}function AC(n){return`${hE} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kC({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=pE(n),o=yE(n),a=e.getImmediate({optional:!0});if(a){const m=await a.getHeartbeatsHeader();m&&o.append("x-firebase-client",m)}const c={fid:t,authVersion:hE,appId:n.appId,sdkVersion:dE},h={method:"POST",headers:o,body:JSON.stringify(c)},f=await vE(()=>fetch(r,h));if(f.ok){const m=await f.json();return{fid:m.fid||t,registrationStatus:2,refreshToken:m.refreshToken,authToken:mE(m.authToken)}}else throw await gE("Create Installation",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=/^[cdef][\w-]{21}$/,Bp="";function RC(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=PC(n);return bC.test(t)?t:Bp}catch{return Bp}}function PC(n){return CC(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E=new Map;function EE(n,e){const t=Kd(n);TE(t,e),NC(t,e)}function TE(n,e){const t=_E.get(n);if(t)for(const r of t)r(e)}function NC(n,e){const t=DC();t&&t.postMessage({key:n,fid:e}),MC()}let to=null;function DC(){return!to&&"BroadcastChannel"in self&&(to=new BroadcastChannel("[Firebase] FID Change"),to.onmessage=n=>{TE(n.data.key,n.data.fid)}),to}function MC(){_E.size===0&&to&&(to.close(),to=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="firebase-installations-database",LC=1,ao="firebase-installations-store";let pp=null;function Rm(){return pp||(pp=sE(OC,LC,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(ao)}}})),pp}async function yd(n,e){const t=Kd(n),o=(await Rm()).transaction(ao,"readwrite"),a=o.objectStore(ao),c=await a.get(t);return await a.put(e,t),await o.done,(!c||c.fid!==e.fid)&&EE(n,e.fid),e}async function IE(n){const e=Kd(n),r=(await Rm()).transaction(ao,"readwrite");await r.objectStore(ao).delete(e),await r.done}async function Qd(n,e){const t=Kd(n),o=(await Rm()).transaction(ao,"readwrite"),a=o.objectStore(ao),c=await a.get(t),h=e(c);return h===void 0?await a.delete(t):await a.put(h,t),await o.done,h&&(!c||c.fid!==h.fid)&&EE(n,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pm(n){let e;const t=await Qd(n.appConfig,r=>{const o=VC(r),a=FC(n,o);return e=a.registrationPromise,a.installationEntry});return t.fid===Bp?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function VC(n){const e=n||{fid:RC(),registrationStatus:0};return SE(e)}function FC(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(oo.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=jC(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:UC(n)}:{installationEntry:e}}async function jC(n,e){try{const t=await kC(n,e);return yd(n.appConfig,t)}catch(t){throw fE(t)&&t.customData.serverCode===409?await IE(n.appConfig):await yd(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function UC(n){let e=await Iw(n.appConfig);for(;e.registrationStatus===1;)await wE(100),e=await Iw(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await Pm(n);return r||t}return e}function Iw(n){return Qd(n,e=>{if(!e)throw oo.create("installation-not-found");return SE(e)})}function SE(n){return zC(n)?{fid:n.fid,registrationStatus:0}:n}function zC(n){return n.registrationStatus===1&&n.registrationTime+uE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BC({appConfig:n,heartbeatServiceProvider:e},t){const r=$C(n,t),o=SC(n,t),a=e.getImmediate({optional:!0});if(a){const m=await a.getHeartbeatsHeader();m&&o.append("x-firebase-client",m)}const c={installation:{sdkVersion:dE,appId:n.appId}},h={method:"POST",headers:o,body:JSON.stringify(c)},f=await vE(()=>fetch(r,h));if(f.ok){const m=await f.json();return mE(m)}else throw await gE("Generate Auth Token",f)}function $C(n,{fid:e}){return`${pE(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nm(n,e=!1){let t;const r=await Qd(n.appConfig,a=>{if(!xE(a))throw oo.create("not-registered");const c=a.authToken;if(!e&&qC(c))return a;if(c.requestStatus===1)return t=WC(n,e),a;{if(!navigator.onLine)throw oo.create("app-offline");const h=KC(a);return t=HC(n,h),h}});return t?await t:r.authToken}async function WC(n,e){let t=await Sw(n.appConfig);for(;t.authToken.requestStatus===1;)await wE(100),t=await Sw(n.appConfig);const r=t.authToken;return r.requestStatus===0?Nm(n,e):r}function Sw(n){return Qd(n,e=>{if(!xE(e))throw oo.create("not-registered");const t=e.authToken;return QC(t)?{...e,authToken:{requestStatus:0}}:e})}async function HC(n,e){try{const t=await BC(n,e),r={...e,authToken:t};return await yd(n.appConfig,r),t}catch(t){if(fE(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await IE(n.appConfig);else{const r={...e,authToken:{requestStatus:0}};await yd(n.appConfig,r)}throw t}}function xE(n){return n!==void 0&&n.registrationStatus===2}function qC(n){return n.requestStatus===2&&!GC(n)}function GC(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+_C}function KC(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function QC(n){return n.requestStatus===1&&n.requestTime+uE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YC(n){const e=n,{installationEntry:t,registrationPromise:r}=await Pm(e);return r?r.catch(console.error):Nm(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XC(n,e=!1){const t=n;return await JC(t),(await Nm(t,e)).token}async function JC(n){const{registrationPromise:e}=await Pm(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(n){if(!n||!n.options)throw mp("App Configuration");if(!n.name)throw mp("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw mp(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function mp(n){return oo.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="installations",eb="installations-internal",tb=n=>{const e=n.getProvider("app").getImmediate(),t=ZC(e),r=go(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},nb=n=>{const e=n.getProvider("app").getImmediate(),t=go(e,AE).getImmediate();return{getId:()=>YC(t),getToken:o=>XC(t,o)}};function rb(){Ur(new ir(AE,tb,"PUBLIC")),Ur(new ir(eb,nb,"PRIVATE"))}rb();jn(cE,bm);jn(cE,bm,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd="analytics",ib="firebase_id",sb="origin",ob=60*1e3,ab="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Dm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn=new qd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},kn=new mo("analytics","Analytics",lb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(n){if(!n.startsWith(Dm)){const e=kn.create("invalid-gtag-resource",{gtagURL:n});return sn.warn(e.message),""}return n}function kE(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function ub(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function db(n,e){const t=ub("firebase-js-sdk-policy",{createScriptURL:cb}),r=document.createElement("script"),o=`${Dm}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function hb(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function fb(n,e,t,r,o,a){const c=r[o];try{if(c)await e[c];else{const f=(await kE(t)).find(m=>m.measurementId===o);f&&await e[f.appId]}}catch(h){sn.error(h)}n("config",o,a)}async function pb(n,e,t,r,o){try{let a=[];if(o&&o.send_to){let c=o.send_to;Array.isArray(c)||(c=[c]);const h=await kE(t);for(const f of c){const m=h.find(_=>_.measurementId===f),v=m&&e[m.appId];if(v)a.push(v);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",r,o||{})}catch(a){sn.error(a)}}function mb(n,e,t,r){async function o(a,...c){try{if(a==="event"){const[h,f]=c;await pb(n,e,t,h,f)}else if(a==="config"){const[h,f]=c;await fb(n,e,t,r,h,f)}else if(a==="consent"){const[h,f]=c;n("consent",h,f)}else if(a==="get"){const[h,f,m]=c;n("get",h,f,m)}else if(a==="set"){const[h]=c;n("set",h)}else n(a,...c)}catch(h){sn.error(h)}}return o}function gb(n,e,t,r,o){let a=function(...c){window[r].push(arguments)};return window[o]&&typeof window[o]=="function"&&(a=window[o]),window[o]=mb(a,n,e,t),{gtagCore:a,wrappedGtag:window[o]}}function yb(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Dm)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb=30,wb=1e3;class _b{constructor(e={},t=wb){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const CE=new _b;function Eb(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function Tb(n){const{appId:e,apiKey:t}=n,r={method:"GET",headers:Eb(t)},o=ab.replace("{app-id}",e),a=await fetch(o,r);if(a.status!==200&&a.status!==304){let c="";try{const h=await a.json();h.error?.message&&(c=h.error.message)}catch{}throw kn.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c})}return a.json()}async function Ib(n,e=CE,t){const{appId:r,apiKey:o,measurementId:a}=n.options;if(!r)throw kn.create("no-app-id");if(!o){if(a)return{measurementId:a,appId:r};throw kn.create("no-api-key")}const c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new Ab;return setTimeout(async()=>{h.abort()},ob),bE({appId:r,apiKey:o,measurementId:a},c,h,e)}async function bE(n,{throttleEndTimeMillis:e,backoffCount:t},r,o=CE){const{appId:a,measurementId:c}=n;try{await Sb(r,e)}catch(h){if(c)return sn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:a,measurementId:c};throw h}try{const h=await Tb(n);return o.deleteThrottleMetadata(a),h}catch(h){const f=h;if(!xb(f)){if(o.deleteThrottleMetadata(a),c)return sn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:a,measurementId:c};throw h}const m=Number(f?.customData?.httpStatus)===503?pw(t,o.intervalMillis,vb):pw(t,o.intervalMillis),v={throttleEndTimeMillis:Date.now()+m,backoffCount:t+1};return o.setThrottleMetadata(a,v),sn.debug(`Calling attemptFetch again in ${m} millis`),bE(n,v,r,o)}}function Sb(n,e){return new Promise((t,r)=>{const o=Math.max(e-Date.now(),0),a=setTimeout(t,o);n.addEventListener(()=>{clearTimeout(a),r(kn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function xb(n){if(!(n instanceof lr)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class Ab{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function kb(n,e,t,r,o){if(o&&o.global){n("event",t,r);return}else{const a=await e,c={...r,send_to:a};n("event",t,c)}}async function Cb(n,e,t,r){if(r&&r.global){const o={};for(const a of Object.keys(t))o[`user_properties.${a}`]=t[a];return n("set",o),Promise.resolve()}else{const o=await e;n("config",o,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bb(){if(Am())try{await km()}catch(n){return sn.warn(kn.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return sn.warn(kn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Rb(n,e,t,r,o,a,c){const h=Ib(n);h.then(E=>{t[E.measurementId]=E.appId,n.options.measurementId&&E.measurementId!==n.options.measurementId&&sn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${E.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(E=>sn.error(E)),e.push(h);const f=bb().then(E=>{if(E)return r.getId()}),[m,v]=await Promise.all([h,f]);yb(a)||db(a,m.measurementId),o("js",new Date);const _=c?.config??{};return _[sb]="firebase",_.update=!0,v!=null&&(_[ib]=v),o("config",m.measurementId,_),m.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e){this.app=e}_delete(){return delete ga[this.app.options.appId],Promise.resolve()}}let ga={},xw=[];const Aw={};let gp="dataLayer",Nb="gtag",kw,Mm,Cw=!1;function Db(){const n=[];if(xm()&&n.push("This is a browser extension environment."),nE()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,o)=>`(${o+1}) ${r}`).join(" "),t=kn.create("invalid-analytics-context",{errorInfo:e});sn.warn(t.message)}}function Mb(n,e,t){Db();const r=n.options.appId;if(!r)throw kn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)sn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw kn.create("no-api-key");if(ga[r]!=null)throw kn.create("already-exists",{id:r});if(!Cw){hb(gp);const{wrappedGtag:a,gtagCore:c}=gb(ga,xw,Aw,gp,Nb);Mm=a,kw=c,Cw=!0}return ga[r]=Rb(n,xw,Aw,e,kw,gp,t),new Pb(n)}function Ob(n=Gd()){n=kt(n);const e=go(n,vd);return e.isInitialized()?e.getImmediate():Lb(n)}function Lb(n,e={}){const t=go(n,vd);if(t.isInitialized()){const o=t.getImmediate();if(jr(e,t.getOptions()))return o;throw kn.create("already-initialized")}return t.initialize({options:e})}async function Vb(){if(xm()||!nE()||!Am())return!1;try{return await km()}catch{return!1}}function Fb(n,e,t){n=kt(n),Cb(Mm,ga[n.app.options.appId],e,t).catch(r=>sn.error(r))}function jb(n,e,t,r){n=kt(n),kb(Mm,ga[n.app.options.appId],e,t,r).catch(o=>sn.error(o))}const bw="@firebase/analytics",Rw="0.10.19";function Ub(){Ur(new ir(vd,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return Mb(r,o,t)},"PUBLIC")),Ur(new ir("analytics-internal",n,"PRIVATE")),jn(bw,Rw),jn(bw,Rw,"esm2020");function n(e){try{const t=e.getProvider(vd).getImmediate();return{logEvent:(r,o,a)=>jb(t,r,o,a),setUserProperties:(r,o)=>Fb(t,r,o)}}catch(t){throw kn.create("interop-component-reg-failed",{reason:t})}}}Ub();var Pw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cs,RE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,A){function N(){}N.prototype=A.prototype,b.F=A.prototype,b.prototype=new N,b.prototype.constructor=b,b.D=function(L,O,F){for(var R=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)R[_e-2]=arguments[_e];return A.prototype[O].apply(L,R)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(b,A,N){N||(N=0);const L=Array(16);if(typeof A=="string")for(var O=0;O<16;++O)L[O]=A.charCodeAt(N++)|A.charCodeAt(N++)<<8|A.charCodeAt(N++)<<16|A.charCodeAt(N++)<<24;else for(O=0;O<16;++O)L[O]=A[N++]|A[N++]<<8|A[N++]<<16|A[N++]<<24;A=b.g[0],N=b.g[1],O=b.g[2];let F=b.g[3],R;R=A+(F^N&(O^F))+L[0]+3614090360&4294967295,A=N+(R<<7&4294967295|R>>>25),R=F+(O^A&(N^O))+L[1]+3905402710&4294967295,F=A+(R<<12&4294967295|R>>>20),R=O+(N^F&(A^N))+L[2]+606105819&4294967295,O=F+(R<<17&4294967295|R>>>15),R=N+(A^O&(F^A))+L[3]+3250441966&4294967295,N=O+(R<<22&4294967295|R>>>10),R=A+(F^N&(O^F))+L[4]+4118548399&4294967295,A=N+(R<<7&4294967295|R>>>25),R=F+(O^A&(N^O))+L[5]+1200080426&4294967295,F=A+(R<<12&4294967295|R>>>20),R=O+(N^F&(A^N))+L[6]+2821735955&4294967295,O=F+(R<<17&4294967295|R>>>15),R=N+(A^O&(F^A))+L[7]+4249261313&4294967295,N=O+(R<<22&4294967295|R>>>10),R=A+(F^N&(O^F))+L[8]+1770035416&4294967295,A=N+(R<<7&4294967295|R>>>25),R=F+(O^A&(N^O))+L[9]+2336552879&4294967295,F=A+(R<<12&4294967295|R>>>20),R=O+(N^F&(A^N))+L[10]+4294925233&4294967295,O=F+(R<<17&4294967295|R>>>15),R=N+(A^O&(F^A))+L[11]+2304563134&4294967295,N=O+(R<<22&4294967295|R>>>10),R=A+(F^N&(O^F))+L[12]+1804603682&4294967295,A=N+(R<<7&4294967295|R>>>25),R=F+(O^A&(N^O))+L[13]+4254626195&4294967295,F=A+(R<<12&4294967295|R>>>20),R=O+(N^F&(A^N))+L[14]+2792965006&4294967295,O=F+(R<<17&4294967295|R>>>15),R=N+(A^O&(F^A))+L[15]+1236535329&4294967295,N=O+(R<<22&4294967295|R>>>10),R=A+(O^F&(N^O))+L[1]+4129170786&4294967295,A=N+(R<<5&4294967295|R>>>27),R=F+(N^O&(A^N))+L[6]+3225465664&4294967295,F=A+(R<<9&4294967295|R>>>23),R=O+(A^N&(F^A))+L[11]+643717713&4294967295,O=F+(R<<14&4294967295|R>>>18),R=N+(F^A&(O^F))+L[0]+3921069994&4294967295,N=O+(R<<20&4294967295|R>>>12),R=A+(O^F&(N^O))+L[5]+3593408605&4294967295,A=N+(R<<5&4294967295|R>>>27),R=F+(N^O&(A^N))+L[10]+38016083&4294967295,F=A+(R<<9&4294967295|R>>>23),R=O+(A^N&(F^A))+L[15]+3634488961&4294967295,O=F+(R<<14&4294967295|R>>>18),R=N+(F^A&(O^F))+L[4]+3889429448&4294967295,N=O+(R<<20&4294967295|R>>>12),R=A+(O^F&(N^O))+L[9]+568446438&4294967295,A=N+(R<<5&4294967295|R>>>27),R=F+(N^O&(A^N))+L[14]+3275163606&4294967295,F=A+(R<<9&4294967295|R>>>23),R=O+(A^N&(F^A))+L[3]+4107603335&4294967295,O=F+(R<<14&4294967295|R>>>18),R=N+(F^A&(O^F))+L[8]+1163531501&4294967295,N=O+(R<<20&4294967295|R>>>12),R=A+(O^F&(N^O))+L[13]+2850285829&4294967295,A=N+(R<<5&4294967295|R>>>27),R=F+(N^O&(A^N))+L[2]+4243563512&4294967295,F=A+(R<<9&4294967295|R>>>23),R=O+(A^N&(F^A))+L[7]+1735328473&4294967295,O=F+(R<<14&4294967295|R>>>18),R=N+(F^A&(O^F))+L[12]+2368359562&4294967295,N=O+(R<<20&4294967295|R>>>12),R=A+(N^O^F)+L[5]+4294588738&4294967295,A=N+(R<<4&4294967295|R>>>28),R=F+(A^N^O)+L[8]+2272392833&4294967295,F=A+(R<<11&4294967295|R>>>21),R=O+(F^A^N)+L[11]+1839030562&4294967295,O=F+(R<<16&4294967295|R>>>16),R=N+(O^F^A)+L[14]+4259657740&4294967295,N=O+(R<<23&4294967295|R>>>9),R=A+(N^O^F)+L[1]+2763975236&4294967295,A=N+(R<<4&4294967295|R>>>28),R=F+(A^N^O)+L[4]+1272893353&4294967295,F=A+(R<<11&4294967295|R>>>21),R=O+(F^A^N)+L[7]+4139469664&4294967295,O=F+(R<<16&4294967295|R>>>16),R=N+(O^F^A)+L[10]+3200236656&4294967295,N=O+(R<<23&4294967295|R>>>9),R=A+(N^O^F)+L[13]+681279174&4294967295,A=N+(R<<4&4294967295|R>>>28),R=F+(A^N^O)+L[0]+3936430074&4294967295,F=A+(R<<11&4294967295|R>>>21),R=O+(F^A^N)+L[3]+3572445317&4294967295,O=F+(R<<16&4294967295|R>>>16),R=N+(O^F^A)+L[6]+76029189&4294967295,N=O+(R<<23&4294967295|R>>>9),R=A+(N^O^F)+L[9]+3654602809&4294967295,A=N+(R<<4&4294967295|R>>>28),R=F+(A^N^O)+L[12]+3873151461&4294967295,F=A+(R<<11&4294967295|R>>>21),R=O+(F^A^N)+L[15]+530742520&4294967295,O=F+(R<<16&4294967295|R>>>16),R=N+(O^F^A)+L[2]+3299628645&4294967295,N=O+(R<<23&4294967295|R>>>9),R=A+(O^(N|~F))+L[0]+4096336452&4294967295,A=N+(R<<6&4294967295|R>>>26),R=F+(N^(A|~O))+L[7]+1126891415&4294967295,F=A+(R<<10&4294967295|R>>>22),R=O+(A^(F|~N))+L[14]+2878612391&4294967295,O=F+(R<<15&4294967295|R>>>17),R=N+(F^(O|~A))+L[5]+4237533241&4294967295,N=O+(R<<21&4294967295|R>>>11),R=A+(O^(N|~F))+L[12]+1700485571&4294967295,A=N+(R<<6&4294967295|R>>>26),R=F+(N^(A|~O))+L[3]+2399980690&4294967295,F=A+(R<<10&4294967295|R>>>22),R=O+(A^(F|~N))+L[10]+4293915773&4294967295,O=F+(R<<15&4294967295|R>>>17),R=N+(F^(O|~A))+L[1]+2240044497&4294967295,N=O+(R<<21&4294967295|R>>>11),R=A+(O^(N|~F))+L[8]+1873313359&4294967295,A=N+(R<<6&4294967295|R>>>26),R=F+(N^(A|~O))+L[15]+4264355552&4294967295,F=A+(R<<10&4294967295|R>>>22),R=O+(A^(F|~N))+L[6]+2734768916&4294967295,O=F+(R<<15&4294967295|R>>>17),R=N+(F^(O|~A))+L[13]+1309151649&4294967295,N=O+(R<<21&4294967295|R>>>11),R=A+(O^(N|~F))+L[4]+4149444226&4294967295,A=N+(R<<6&4294967295|R>>>26),R=F+(N^(A|~O))+L[11]+3174756917&4294967295,F=A+(R<<10&4294967295|R>>>22),R=O+(A^(F|~N))+L[2]+718787259&4294967295,O=F+(R<<15&4294967295|R>>>17),R=N+(F^(O|~A))+L[9]+3951481745&4294967295,b.g[0]=b.g[0]+A&4294967295,b.g[1]=b.g[1]+(O+(R<<21&4294967295|R>>>11))&4294967295,b.g[2]=b.g[2]+O&4294967295,b.g[3]=b.g[3]+F&4294967295}r.prototype.v=function(b,A){A===void 0&&(A=b.length);const N=A-this.blockSize,L=this.C;let O=this.h,F=0;for(;F<A;){if(O==0)for(;F<=N;)o(this,b,F),F+=this.blockSize;if(typeof b=="string"){for(;F<A;)if(L[O++]=b.charCodeAt(F++),O==this.blockSize){o(this,L),O=0;break}}else for(;F<A;)if(L[O++]=b[F++],O==this.blockSize){o(this,L),O=0;break}}this.h=O,this.o+=A},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var A=1;A<b.length-8;++A)b[A]=0;A=this.o*8;for(var N=b.length-8;N<b.length;++N)b[N]=A&255,A/=256;for(this.v(b),b=Array(16),A=0,N=0;N<4;++N)for(let L=0;L<32;L+=8)b[A++]=this.g[N]>>>L&255;return b};function a(b,A){var N=h;return Object.prototype.hasOwnProperty.call(N,b)?N[b]:N[b]=A(b)}function c(b,A){this.h=A;const N=[];let L=!0;for(let O=b.length-1;O>=0;O--){const F=b[O]|0;L&&F==A||(N[O]=F,L=!1)}this.g=N}var h={};function f(b){return-128<=b&&b<128?a(b,function(A){return new c([A|0],A<0?-1:0)}):new c([b|0],b<0?-1:0)}function m(b){if(isNaN(b)||!isFinite(b))return _;if(b<0)return C(m(-b));const A=[];let N=1;for(let L=0;b>=N;L++)A[L]=b/N|0,N*=4294967296;return new c(A,0)}function v(b,A){if(b.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(b.charAt(0)=="-")return C(v(b.substring(1),A));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=m(Math.pow(A,8));let L=_;for(let F=0;F<b.length;F+=8){var O=Math.min(8,b.length-F);const R=parseInt(b.substring(F,F+O),A);O<8?(O=m(Math.pow(A,O)),L=L.j(O).add(m(R))):(L=L.j(N),L=L.add(m(R)))}return L}var _=f(0),E=f(1),S=f(16777216);n=c.prototype,n.m=function(){if(x(this))return-C(this).m();let b=0,A=1;for(let N=0;N<this.g.length;N++){const L=this.i(N);b+=(L>=0?L:4294967296+L)*A,A*=4294967296}return b},n.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(M(this))return"0";if(x(this))return"-"+C(this).toString(b);const A=m(Math.pow(b,6));var N=this;let L="";for(;;){const O=Y(N,A).g;N=U(N,O.j(A));let F=((N.g.length>0?N.g[0]:N.h)>>>0).toString(b);if(N=O,M(N))return F+L;for(;F.length<6;)F="0"+F;L=F+L}},n.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function M(b){if(b.h!=0)return!1;for(let A=0;A<b.g.length;A++)if(b.g[A]!=0)return!1;return!0}function x(b){return b.h==-1}n.l=function(b){return b=U(this,b),x(b)?-1:M(b)?0:1};function C(b){const A=b.g.length,N=[];for(let L=0;L<A;L++)N[L]=~b.g[L];return new c(N,~b.h).add(E)}n.abs=function(){return x(this)?C(this):this},n.add=function(b){const A=Math.max(this.g.length,b.g.length),N=[];let L=0;for(let O=0;O<=A;O++){let F=L+(this.i(O)&65535)+(b.i(O)&65535),R=(F>>>16)+(this.i(O)>>>16)+(b.i(O)>>>16);L=R>>>16,F&=65535,R&=65535,N[O]=R<<16|F}return new c(N,N[N.length-1]&-2147483648?-1:0)};function U(b,A){return b.add(C(A))}n.j=function(b){if(M(this)||M(b))return _;if(x(this))return x(b)?C(this).j(C(b)):C(C(this).j(b));if(x(b))return C(this.j(C(b)));if(this.l(S)<0&&b.l(S)<0)return m(this.m()*b.m());const A=this.g.length+b.g.length,N=[];for(var L=0;L<2*A;L++)N[L]=0;for(L=0;L<this.g.length;L++)for(let O=0;O<b.g.length;O++){const F=this.i(L)>>>16,R=this.i(L)&65535,_e=b.i(O)>>>16,be=b.i(O)&65535;N[2*L+2*O]+=R*be,B(N,2*L+2*O),N[2*L+2*O+1]+=F*be,B(N,2*L+2*O+1),N[2*L+2*O+1]+=R*_e,B(N,2*L+2*O+1),N[2*L+2*O+2]+=F*_e,B(N,2*L+2*O+2)}for(b=0;b<A;b++)N[b]=N[2*b+1]<<16|N[2*b];for(b=A;b<2*A;b++)N[b]=0;return new c(N,0)};function B(b,A){for(;(b[A]&65535)!=b[A];)b[A+1]+=b[A]>>>16,b[A]&=65535,A++}function G(b,A){this.g=b,this.h=A}function Y(b,A){if(M(A))throw Error("division by zero");if(M(b))return new G(_,_);if(x(b))return A=Y(C(b),A),new G(C(A.g),C(A.h));if(x(A))return A=Y(b,C(A)),new G(C(A.g),A.h);if(b.g.length>30){if(x(b)||x(A))throw Error("slowDivide_ only works with positive integers.");for(var N=E,L=A;L.l(b)<=0;)N=Z(N),L=Z(L);var O=oe(N,1),F=oe(L,1);for(L=oe(L,2),N=oe(N,2);!M(L);){var R=F.add(L);R.l(b)<=0&&(O=O.add(N),F=R),L=oe(L,1),N=oe(N,1)}return A=U(b,O.j(A)),new G(O,A)}for(O=_;b.l(A)>=0;){for(N=Math.max(1,Math.floor(b.m()/A.m())),L=Math.ceil(Math.log(N)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),F=m(N),R=F.j(A);x(R)||R.l(b)>0;)N-=L,F=m(N),R=F.j(A);M(F)&&(F=E),O=O.add(F),b=U(b,R)}return new G(O,b)}n.B=function(b){return Y(this,b).h},n.and=function(b){const A=Math.max(this.g.length,b.g.length),N=[];for(let L=0;L<A;L++)N[L]=this.i(L)&b.i(L);return new c(N,this.h&b.h)},n.or=function(b){const A=Math.max(this.g.length,b.g.length),N=[];for(let L=0;L<A;L++)N[L]=this.i(L)|b.i(L);return new c(N,this.h|b.h)},n.xor=function(b){const A=Math.max(this.g.length,b.g.length),N=[];for(let L=0;L<A;L++)N[L]=this.i(L)^b.i(L);return new c(N,this.h^b.h)};function Z(b){const A=b.g.length+1,N=[];for(let L=0;L<A;L++)N[L]=b.i(L)<<1|b.i(L-1)>>>31;return new c(N,b.h)}function oe(b,A){const N=A>>5;A%=32;const L=b.g.length-N,O=[];for(let F=0;F<L;F++)O[F]=A>0?b.i(F+N)>>>A|b.i(F+N+1)<<32-A:b.i(F+N);return new c(O,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,RE=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=v,cs=c}).apply(typeof Pw<"u"?Pw:typeof self<"u"?self:typeof window<"u"?window:{});var Bu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var PE,Hl,NE,nd,$p,DE,ME,OE;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bu=="object"&&Bu];for(var y=0;y<u.length;++y){var w=u[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function o(u,y){if(y)e:{var w=r;u=u.split(".");for(var k=0;k<u.length-1;k++){var H=u[k];if(!(H in w))break e;w=w[H]}u=u[u.length-1],k=w[u],y=y(k),y!=k&&y!=null&&e(w,u,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(y){var w=[],k;for(k in y)Object.prototype.hasOwnProperty.call(y,k)&&w.push([k,y[k]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function h(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function f(u,y,w){return u.call.apply(u.bind,arguments)}function m(u,y,w){return m=f,m.apply(null,arguments)}function v(u,y){var w=Array.prototype.slice.call(arguments,1);return function(){var k=w.slice();return k.push.apply(k,arguments),u.apply(this,k)}}function _(u,y){function w(){}w.prototype=y.prototype,u.Z=y.prototype,u.prototype=new w,u.prototype.constructor=u,u.Ob=function(k,H,Q){for(var ce=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)ce[Ve-2]=arguments[Ve];return y.prototype[H].apply(k,ce)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function S(u){const y=u.length;if(y>0){const w=Array(y);for(let k=0;k<y;k++)w[k]=u[k];return w}return[]}function M(u,y){for(let k=1;k<arguments.length;k++){const H=arguments[k];var w=typeof H;if(w=w!="object"?w:H?Array.isArray(H)?"array":w:"null",w=="array"||w=="object"&&typeof H.length=="number"){w=u.length||0;const Q=H.length||0;u.length=w+Q;for(let ce=0;ce<Q;ce++)u[w+ce]=H[ce]}else u.push(H)}}class x{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function C(u){c.setTimeout(()=>{throw u},0)}function U(){var u=b;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class B{constructor(){this.h=this.g=null}add(y,w){const k=G.get();k.set(y,w),this.h?this.h.next=k:this.g=k,this.h=k}}var G=new x(()=>new Y,u=>u.reset());class Y{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,oe=!1,b=new B,A=()=>{const u=Promise.resolve(void 0);Z=()=>{u.then(N)}};function N(){for(var u;u=U();){try{u.h.call(u.g)}catch(w){C(w)}var y=G;y.j(u),y.h<100&&(y.h++,u.next=y.g,y.g=u)}oe=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const w=()=>{};c.addEventListener("test",w,y),c.removeEventListener("test",w,y)}catch{}return u})();function R(u){return/^[\s\xa0]*$/.test(u)}function _e(u,y){O.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,y)}_(_e,O),_e.prototype.init=function(u,y){const w=this.type=u.type,k=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget,y||(w=="mouseover"?y=u.fromElement:w=="mouseout"&&(y=u.toElement)),this.relatedTarget=y,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&_e.Z.h.call(this)},_e.prototype.h=function(){_e.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var be="closure_listenable_"+(Math.random()*1e6|0),Te=0;function we(u,y,w,k,H){this.listener=u,this.proxy=null,this.src=y,this.type=w,this.capture=!!k,this.ha=H,this.key=++Te,this.da=this.fa=!1}function $(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function le(u,y,w){for(const k in u)y.call(w,u[k],k,u)}function ae(u,y){for(const w in u)y.call(void 0,u[w],w,u)}function z(u){const y={};for(const w in u)y[w]=u[w];return y}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function me(u,y){let w,k;for(let H=1;H<arguments.length;H++){k=arguments[H];for(w in k)u[w]=k[w];for(let Q=0;Q<J.length;Q++)w=J[Q],Object.prototype.hasOwnProperty.call(k,w)&&(u[w]=k[w])}}function pe(u){this.src=u,this.g={},this.h=0}pe.prototype.add=function(u,y,w,k,H){const Q=u.toString();u=this.g[Q],u||(u=this.g[Q]=[],this.h++);const ce=De(u,y,k,H);return ce>-1?(y=u[ce],w||(y.fa=!1)):(y=new we(y,this.src,Q,!!k,H),y.fa=w,u.push(y)),y};function Pe(u,y){const w=y.type;if(w in u.g){var k=u.g[w],H=Array.prototype.indexOf.call(k,y,void 0),Q;(Q=H>=0)&&Array.prototype.splice.call(k,H,1),Q&&($(y),u.g[w].length==0&&(delete u.g[w],u.h--))}}function De(u,y,w,k){for(let H=0;H<u.length;++H){const Q=u[H];if(!Q.da&&Q.listener==y&&Q.capture==!!w&&Q.ha==k)return H}return-1}var re="closure_lm_"+(Math.random()*1e6|0),Se={};function Ne(u,y,w,k,H){if(Array.isArray(y)){for(let Q=0;Q<y.length;Q++)Ne(u,y[Q],w,k,H);return null}return w=Ga(w),u&&u[be]?u.J(y,w,h(k)?!!k.capture:!1,H):Oe(u,y,w,!1,k,H)}function Oe(u,y,w,k,H,Q){if(!y)throw Error("Invalid event type");const ce=h(H)?!!H.capture:!!H;let Ve=cr(u);if(Ve||(u[re]=Ve=new pe(u)),w=Ve.add(y,w,k,ce,Q),w.proxy)return w;if(k=We(),w.proxy=k,k.src=u,k.listener=w,u.addEventListener)F||(H=ce),H===void 0&&(H=!1),u.addEventListener(y.toString(),k,H);else if(u.attachEvent)u.attachEvent(on(y.toString()),k);else if(u.addListener&&u.removeListener)u.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return w}function We(){function u(w){return y.call(u.src,u.listener,w)}const y=Ii;return u}function Qe(u,y,w,k,H){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)Qe(u,y[Q],w,k,H);else k=h(k)?!!k.capture:!!k,w=Ga(w),u&&u[be]?(u=u.i,Q=String(y).toString(),Q in u.g&&(y=u.g[Q],w=De(y,w,k,H),w>-1&&($(y[w]),Array.prototype.splice.call(y,w,1),y.length==0&&(delete u.g[Q],u.h--)))):u&&(u=cr(u))&&(y=u.g[y.toString()],u=-1,y&&(u=De(y,w,k,H)),(w=u>-1?y[u]:null)&&pt(w))}function pt(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[be])Pe(y.i,u);else{var w=u.type,k=u.proxy;y.removeEventListener?y.removeEventListener(w,k,u.capture):y.detachEvent?y.detachEvent(on(w),k):y.addListener&&y.removeListener&&y.removeListener(k),(w=cr(y))?(Pe(w,u),w.h==0&&(w.src=null,y[re]=null)):$(u)}}}function on(u){return u in Se?Se[u]:Se[u]="on"+u}function Ii(u,y){if(u.da)u=!0;else{y=new _e(y,this);const w=u.listener,k=u.ha||u.src;u.fa&&pt(u),u=w.call(k,y)}return u}function cr(u){return u=u[re],u instanceof pe?u:null}var Bn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ga(u){return typeof u=="function"?u:(u[Bn]||(u[Bn]=function(y){return u.handleEvent(y)}),u[Bn])}function _t(){L.call(this),this.i=new pe(this),this.M=this,this.G=null}_(_t,L),_t.prototype[be]=!0,_t.prototype.removeEventListener=function(u,y,w,k){Qe(this,u,y,w,k)};function mt(u,y){var w,k=u.G;if(k)for(w=[];k;k=k.G)w.push(k);if(u=u.M,k=y.type||y,typeof y=="string")y=new O(y,u);else if(y instanceof O)y.target=y.target||u;else{var H=y;y=new O(k,u),me(y,H)}H=!0;let Q,ce;if(w)for(ce=w.length-1;ce>=0;ce--)Q=y.g=w[ce],H=$n(Q,k,!0,y)&&H;if(Q=y.g=u,H=$n(Q,k,!0,y)&&H,H=$n(Q,k,!1,y)&&H,w)for(ce=0;ce<w.length;ce++)Q=y.g=w[ce],H=$n(Q,k,!1,y)&&H}_t.prototype.N=function(){if(_t.Z.N.call(this),this.i){var u=this.i;for(const y in u.g){const w=u.g[y];for(let k=0;k<w.length;k++)$(w[k]);delete u.g[y],u.h--}}this.G=null},_t.prototype.J=function(u,y,w,k){return this.i.add(String(u),y,!1,w,k)},_t.prototype.K=function(u,y,w,k){return this.i.add(String(u),y,!0,w,k)};function $n(u,y,w,k){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();let H=!0;for(let Q=0;Q<y.length;++Q){const ce=y[Q];if(ce&&!ce.da&&ce.capture==w){const Ve=ce.listener,gt=ce.ha||ce.src;ce.fa&&Pe(u.i,ce),H=Ve.call(gt,k)!==!1&&H}}return H&&!k.defaultPrevented}function Ka(u,y){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(u,y||0)}function Qa(u){u.g=Ka(()=>{u.g=null,u.i&&(u.i=!1,Qa(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class kc extends L{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Qa(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Si(u){L.call(this),this.h=u,this.g={}}_(Si,L);var Ya=[];function Io(u){le(u.g,function(y,w){this.g.hasOwnProperty(w)&&pt(y)},u),u.g={}}Si.prototype.N=function(){Si.Z.N.call(this),Io(this)},Si.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xi=c.JSON.stringify,Cc=c.JSON.parse,ks=class{stringify(u){return c.JSON.stringify(u,void 0)}parse(u){return c.JSON.parse(u,void 0)}};function Ai(){}function bc(){}var ki={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function So(){O.call(this,"d")}_(So,O);function Xa(){O.call(this,"c")}_(Xa,O);var Wn={},xo=null;function Ci(){return xo=xo||new _t}Wn.Ia="serverreachability";function Ao(u){O.call(this,Wn.Ia,u)}_(Ao,O);function Hr(u){const y=Ci();mt(y,new Ao(y))}Wn.STAT_EVENT="statevent";function qr(u,y){O.call(this,Wn.STAT_EVENT,u),this.stat=y}_(qr,O);function dt(u){const y=Ci();mt(y,new qr(y,u))}Wn.Ja="timingevent";function Ja(u,y){O.call(this,Wn.Ja,u),this.size=y}_(Ja,O);function bi(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){u()},y)}function Ri(){this.g=!0}Ri.prototype.ua=function(){this.g=!1};function Rc(u,y,w,k,H,Q){u.info(function(){if(u.g)if(Q){var ce="",Ve=Q.split("&");for(let Je=0;Je<Ve.length;Je++){var gt=Ve[Je].split("=");if(gt.length>1){const Et=gt[0];gt=gt[1];const En=Et.split("_");ce=En.length>=2&&En[1]=="type"?ce+(Et+"="+gt+"&"):ce+(Et+"=redacted&")}}}else ce=null;else ce=Q;return"XMLHTTP REQ ("+k+") [attempt "+H+"]: "+y+`
`+w+`
`+ce})}function Pc(u,y,w,k,H,Q,ce){u.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+H+"]: "+y+`
`+w+`
`+Q+" "+ce})}function ur(u,y,w,k){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+Cs(u,w)+(k?" "+k:"")})}function Nc(u,y){u.info(function(){return"TIMEOUT: "+y})}Ri.prototype.info=function(){};function Cs(u,y){if(!u.g)return y;if(!y)return null;try{const Q=JSON.parse(y);if(Q){for(u=0;u<Q.length;u++)if(Array.isArray(Q[u])){var w=Q[u];if(!(w.length<2)){var k=w[1];if(Array.isArray(k)&&!(k.length<1)){var H=k[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ce=1;ce<k.length;ce++)k[ce]=""}}}}return xi(Q)}catch{return y}}var Pi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ni={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Dc;function Gr(){}_(Gr,Ai),Gr.prototype.g=function(){return new XMLHttpRequest},Dc=new Gr;function dr(u){return encodeURIComponent(String(u))}function ko(u){var y=1;u=u.split(":");const w=[];for(;y>0&&u.length;)w.push(u.shift()),y--;return u.length&&w.push(u.join(":")),w}function bn(u,y,w,k){this.j=u,this.i=y,this.l=w,this.S=k||1,this.V=new Si(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Mc}function Mc(){this.i=null,this.g="",this.h=!1}var Oc={},Za={};function Hn(u,y,w){u.M=1,u.A=Qr(Rn(y)),u.u=w,u.R=!0,el(u,null)}function el(u,y){u.F=Date.now(),bs(u),u.B=Rn(u.A);var w=u.B,k=u.S;Array.isArray(k)||(k=[String(k)]),ul(w.i,"t",k),u.C=0,w=u.j.L,u.h=new Mc,u.g=Hc(u.j,w?y:null,!u.u),u.P>0&&(u.O=new kc(m(u.Y,u,u.g),u.P)),y=u.V,w=u.g,k=u.ba;var H="readystatechange";Array.isArray(H)||(H&&(Ya[0]=H.toString()),H=Ya);for(let Q=0;Q<H.length;Q++){const ce=Ne(w,H[Q],k||y.handleEvent,!1,y.h||y);if(!ce)break;y.g[ce.key]=ce}y=u.J?z(u.J):{},u.u?(u.v||(u.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,y)):(u.v="GET",u.g.ea(u.B,u.v,null,y)),Hr(),Rc(u.i,u.v,u.B,u.l,u.S,u.u)}bn.prototype.ba=function(u){u=u.target;const y=this.O;y&&vr(u)==3?y.j():this.Y(u)},bn.prototype.Y=function(u){try{if(u==this.g)e:{const Ve=vr(this.g),gt=this.g.ya(),Je=this.g.ca();if(!(Ve<3)&&(Ve!=3||this.g&&(this.h.h||this.g.la()||$c(this.g)))){this.K||Ve!=4||gt==7||(gt==8||Je<=0?Hr(3):Hr(2)),Co(this);var y=this.g.ca();this.X=y;var w=Lc(this);if(this.o=y==200,Pc(this.i,this.v,this.B,this.l,this.S,Ve,y),this.o){if(this.U&&!this.L){t:{if(this.g){var k,H=this.g;if((k=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(k)){var Q=k;break t}}Q=null}if(u=Q)ur(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,nt(this,u);else{this.o=!1,this.m=3,dt(12),Kr(this),Rs(this);break e}}if(this.R){u=!0;let Et;for(;!this.K&&this.C<w.length;)if(Et=Fc(this,w),Et==Za){Ve==4&&(this.m=4,dt(14),u=!1),ur(this.i,this.l,null,"[Incomplete Response]");break}else if(Et==Oc){this.m=4,dt(15),ur(this.i,this.l,w,"[Invalid Chunk]"),u=!1;break}else ur(this.i,this.l,Et,null),nt(this,Et);if(Vc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||w.length!=0||this.h.h||(this.m=1,dt(16),u=!1),this.o=this.o&&u,!u)ur(this.i,this.l,w,"[Invalid Chunked Response]"),Kr(this),Rs(this);else if(w.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),js(ce),ce.P=!0,dt(11))}}else ur(this.i,this.l,w,null),nt(this,w);Ve==4&&Kr(this),this.o&&!this.K&&(Ve==4?Fo(this.j,this):(this.o=!1,bs(this)))}else hl(this.g),y==400&&w.indexOf("Unknown SID")>0?(this.m=3,dt(12)):(this.m=0,dt(13)),Kr(this),Rs(this)}}}catch{}finally{}};function Lc(u){if(!Vc(u))return u.g.la();const y=$c(u.g);if(y==="")return"";let w="";const k=y.length,H=vr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Kr(u),Rs(u),"";u.h.i=new c.TextDecoder}for(let Q=0;Q<k;Q++)u.h.h=!0,w+=u.h.i.decode(y[Q],{stream:!(H&&Q==k-1)});return y.length=0,u.h.g+=w,u.C=0,u.h.g}function Vc(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Fc(u,y){var w=u.C,k=y.indexOf(`
`,w);return k==-1?Za:(w=Number(y.substring(w,k)),isNaN(w)?Oc:(k+=1,k+w>y.length?Za:(y=y.slice(k,k+w),u.C=k+w,y)))}bn.prototype.cancel=function(){this.K=!0,Kr(this)};function bs(u){u.T=Date.now()+u.H,tl(u,u.H)}function tl(u,y){if(u.D!=null)throw Error("WatchDog timer not null");u.D=bi(m(u.aa,u),y)}function Co(u){u.D&&(c.clearTimeout(u.D),u.D=null)}bn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Nc(this.i,this.B),this.M!=2&&(Hr(),dt(17)),Kr(this),this.m=2,Rs(this)):tl(this,this.T-u)};function Rs(u){u.j.I==0||u.K||Fo(u.j,u)}function Kr(u){Co(u);var y=u.O;y&&typeof y.dispose=="function"&&y.dispose(),u.O=null,Io(u.V),u.g&&(y=u.g,u.g=null,y.abort(),y.dispose())}function nt(u,y){try{var w=u.j;if(w.I!=0&&(w.g==u||rl(w.h,u))){if(!u.L&&rl(w.h,u)&&w.I==3){try{var k=w.Ba.g.parse(y)}catch{k=null}if(Array.isArray(k)&&k.length==3){var H=k;if(H[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<u.F)Vo(w),wn(w);else break e;Er(w),dt(18)}}else w.xa=H[1],0<w.xa-w.K&&H[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=bi(m(w.Va,w),6e3));Ps(w.h)<=1&&w.ta&&(w.ta=void 0)}else _n(w,11)}else if((u.L||w.g==u)&&Vo(w),!R(y))for(H=w.Ba.g.parse(y),y=0;y<H.length;y++){let Je=H[y];const Et=Je[0];if(!(Et<=w.K))if(w.K=Et,Je=Je[1],w.I==2)if(Je[0]=="c"){w.M=Je[1],w.ba=Je[2];const En=Je[3];En!=null&&(w.ka=En,w.j.info("VER="+w.ka));const ei=Je[4];ei!=null&&(w.za=ei,w.j.info("SVER="+w.za));const Tr=Je[5];Tr!=null&&typeof Tr=="number"&&Tr>0&&(k=1.5*Tr,w.O=k,w.j.info("backChannelRequestTimeoutMs_="+k)),k=w;const Ir=u.g;if(Ir){const zo=Ir.g?Ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zo){var Q=k.h;Q.g||zo.indexOf("spdy")==-1&&zo.indexOf("quic")==-1&&zo.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Ro(Q,Q.h),Q.h=null))}if(k.G){const ml=Ir.g?Ir.g.getResponseHeader("X-HTTP-Session-Id"):null;ml&&(k.wa=ml,Ye(k.J,k.G,ml))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-u.F,w.j.info("Handshake RTT: "+w.T+"ms")),k=w;var ce=u;if(k.na=pl(k,k.L?k.ba:null,k.W),ce.L){Ns(k.h,ce);var Ve=ce,gt=k.O;gt&&(Ve.H=gt),Ve.D&&(Co(Ve),bs(Ve)),k.g=ce}else qt(k);w.i.length>0&&Zr(w)}else Je[0]!="stop"&&Je[0]!="close"||_n(w,7);else w.I==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?_n(w,7):Oo(w):Je[0]!="noop"&&w.l&&w.l.qa(Je),w.A=0)}}Hr(4)}catch{}}var Mh=class{constructor(u,y){this.g=u,this.map=y}};function bo(u){this.l=u||10,c.PerformanceNavigationTiming?(u=c.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function nl(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ps(u){return u.h?1:u.g?u.g.size:0}function rl(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function Ro(u,y){u.g?u.g.add(y):u.h=y}function Ns(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}bo.prototype.cancel=function(){if(this.i=gn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function gn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const w of u.g.values())y=y.concat(w.G);return y}return S(u.i)}var jc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yn(u,y){if(u){u=u.split("&");for(let w=0;w<u.length;w++){const k=u[w].indexOf("=");let H,Q=null;k>=0?(H=u[w].substring(0,k),Q=u[w].substring(k+1)):H=u[w],y(H,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function hr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;u instanceof hr?(this.l=u.l,Ds(this,u.j),this.o=u.o,this.g=u.g,fr(this,u.u),this.h=u.h,Di(this,dl(u.i)),this.m=u.m):u&&(y=String(u).match(jc))?(this.l=!1,Ds(this,y[1]||"",!0),this.o=Ms(y[2]||""),this.g=Ms(y[3]||"",!0),fr(this,y[4]),this.h=Ms(y[5]||"",!0),Di(this,y[6]||"",!0),this.m=Ms(y[7]||"")):(this.l=!1,this.i=new He(null,this.l))}hr.prototype.toString=function(){const u=[];var y=this.j;y&&u.push(Os(y,sl,!0),":");var w=this.g;return(w||y=="file")&&(u.push("//"),(y=this.o)&&u.push(Os(y,sl,!0),"@"),u.push(dr(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&u.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&u.push("/"),u.push(Os(w,w.charAt(0)=="/"?Ls:ol,!0))),(w=this.i.toString())&&u.push("?",w),(w=this.m)&&u.push("#",Os(w,al)),u.join("")},hr.prototype.resolve=function(u){const y=Rn(this);let w=!!u.j;w?Ds(y,u.j):w=!!u.o,w?y.o=u.o:w=!!u.g,w?y.g=u.g:w=u.u!=null;var k=u.h;if(w)fr(y,u.u);else if(w=!!u.h){if(k.charAt(0)!="/")if(this.g&&!this.h)k="/"+k;else{var H=y.h.lastIndexOf("/");H!=-1&&(k=y.h.slice(0,H+1)+k)}if(H=k,H==".."||H==".")k="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){k=H.lastIndexOf("/",0)==0,H=H.split("/");const Q=[];for(let ce=0;ce<H.length;){const Ve=H[ce++];Ve=="."?k&&ce==H.length&&Q.push(""):Ve==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),k&&ce==H.length&&Q.push("")):(Q.push(Ve),k=!0)}k=Q.join("/")}else k=H}return w?y.h=k:w=u.i.toString()!=="",w?Di(y,dl(u.i)):w=!!u.m,w&&(y.m=u.m),y};function Rn(u){return new hr(u)}function Ds(u,y,w){u.j=w?Ms(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function fr(u,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);u.u=y}else u.u=null}function Di(u,y,w){y instanceof He?(u.i=y,No(u.i,u.l)):(w||(y=Os(y,Oh)),u.i=new He(y,u.l))}function Ye(u,y,w){u.i.set(y,w)}function Qr(u){return Ye(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ms(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Os(u,y,w){return typeof u=="string"?(u=encodeURI(u).replace(y,il),w&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function il(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var sl=/[#\/\?@]/g,ol=/[#\?:]/g,Ls=/[#\?]/g,Oh=/[#\?@]/g,al=/#/g;function He(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function pr(u){u.g||(u.g=new Map,u.h=0,u.i&&yn(u.i,function(y,w){u.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}n=He.prototype,n.add=function(u,y){pr(this),this.i=null,u=mr(this,u);let w=this.g.get(u);return w||this.g.set(u,w=[]),w.push(y),this.h+=1,this};function ll(u,y){pr(u),y=mr(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function Po(u,y){return pr(u),y=mr(u,y),u.g.has(y)}n.forEach=function(u,y){pr(this),this.g.forEach(function(w,k){w.forEach(function(H){u.call(y,H,k,this)},this)},this)};function cl(u,y){pr(u);let w=[];if(typeof y=="string")Po(u,y)&&(w=w.concat(u.g.get(mr(u,y))));else for(u=Array.from(u.g.values()),y=0;y<u.length;y++)w=w.concat(u[y]);return w}n.set=function(u,y){return pr(this),this.i=null,u=mr(this,u),Po(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},n.get=function(u,y){return u?(u=cl(this,u),u.length>0?String(u[0]):y):y};function ul(u,y,w){ll(u,y),w.length>0&&(u.i=null,u.g.set(mr(u,y),S(w)),u.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(let k=0;k<y.length;k++){var w=y[k];const H=dr(w);w=cl(this,w);for(let Q=0;Q<w.length;Q++){let ce=H;w[Q]!==""&&(ce+="="+dr(w[Q])),u.push(ce)}}return this.i=u.join("&")};function dl(u){const y=new He;return y.i=u.i,u.g&&(y.g=new Map(u.g),y.h=u.h),y}function mr(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function No(u,y){y&&!u.j&&(pr(u),u.i=null,u.g.forEach(function(w,k){const H=k.toLowerCase();k!=H&&(ll(this,k),ul(this,H,w))},u)),u.j=y}function gr(u,y){const w=new Ri;if(c.Image){const k=new Image;k.onload=v(Lt,w,"TestLoadImage: loaded",!0,y,k),k.onerror=v(Lt,w,"TestLoadImage: error",!1,y,k),k.onabort=v(Lt,w,"TestLoadImage: abort",!1,y,k),k.ontimeout=v(Lt,w,"TestLoadImage: timeout",!1,y,k),c.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=u}else y(!1)}function yr(u,y){const w=new Ri,k=new AbortController,H=setTimeout(()=>{k.abort(),Lt(w,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:k.signal}).then(Q=>{clearTimeout(H),Q.ok?Lt(w,"TestPingServer: ok",!0,y):Lt(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),Lt(w,"TestPingServer: error",!1,y)})}function Lt(u,y,w,k,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),k(w)}catch{}}function Vs(){this.g=new ks}function Yr(u){this.i=u.Sb||null,this.h=u.ab||!1}_(Yr,Ai),Yr.prototype.g=function(){return new vn(this.i,this.h)};function vn(u,y){_t.call(this),this.H=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(vn,_t),n=vn.prototype,n.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=y,this.readyState=1,qn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(y.body=u),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Mi(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,qn(this)),this.g&&(this.readyState=3,qn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Uc(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Uc(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?Mi(this):qn(this),this.readyState==3&&Uc(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,Mi(this))},n.Na=function(u){this.g&&(this.response=u,Mi(this))},n.ga=function(){this.g&&Mi(this)};function Mi(u){u.readyState=4,u.l=null,u.j=null,u.B=null,qn(u)}n.setRequestHeader=function(u,y){this.A.append(u,y)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,u.push(w[0]+": "+w[1]),w=y.next();return u.join(`\r
`)};function qn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(vn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function zc(u){let y="";return le(u,function(w,k){y+=k,y+=":",y+=w,y+=`\r
`}),y}function Do(u,y,w){e:{for(k in w){var k=!1;break e}k=!0}k||(w=zc(w),typeof u=="string"?w!=null&&dr(w):Ye(u,y,w))}function Ze(u){_t.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(Ze,_t);var Bc=/^https?$/i,Lh=["POST","PUT"];n=Ze.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,y,w,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Dc.g(),this.g.onreadystatechange=E(m(this.Ca,this));try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(Q){Oi(this,Q);return}if(u=w||"",w=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var H in k)w.set(H,k[H]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const Q of k.keys())w.set(Q,k.get(Q));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(w.keys()).find(Q=>Q.toLowerCase()=="content-type"),H=c.FormData&&u instanceof c.FormData,!(Array.prototype.indexOf.call(Lh,y,void 0)>=0)||k||H||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ce]of w)this.g.setRequestHeader(Q,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(Q){Oi(this,Q)}};function Oi(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.o=5,Li(u),Jr(u)}function Li(u){u.A||(u.A=!0,mt(u,"complete"),mt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,mt(this,"complete"),mt(this,"abort"),Jr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jr(this,!0)),Ze.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Xr(this):this.Xa())},n.Xa=function(){Xr(this)};function Xr(u){if(u.h&&typeof a<"u"){if(u.v&&vr(u)==4)setTimeout(u.Ca.bind(u),0);else if(mt(u,"readystatechange"),vr(u)==4){u.h=!1;try{const Q=u.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var k;if(k=Q===0){let ce=String(u.D).match(jc)[1]||null;!ce&&c.self&&c.self.location&&(ce=c.self.location.protocol.slice(0,-1)),k=!Bc.test(ce?ce.toLowerCase():"")}w=k}if(w)mt(u,"complete"),mt(u,"success");else{u.o=6;try{var H=vr(u)>2?u.g.statusText:""}catch{H=""}u.l=H+" ["+u.ca()+"]",Li(u)}}finally{Jr(u)}}}}function Jr(u,y){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const w=u.g;u.g=null,y||mt(u,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function vr(u){return u.g?u.g.readyState:0}n.ca=function(){try{return vr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),Cc(y)}};function $c(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function hl(u){const y={};u=(u.g&&vr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<u.length;k++){if(R(u[k]))continue;var w=ko(u[k]);const H=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const Q=y[H]||[];y[H]=Q,Q.push(w)}ae(y,function(k){return k.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wr(u,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[u]||y}function Mo(u){this.za=0,this.i=[],this.j=new Ri,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wr("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wr("baseRetryDelayMs",5e3,u),this.Za=wr("retryDelaySeedMs",1e4,u),this.Ta=wr("forwardChannelMaxRetries",2,u),this.va=wr("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new bo(u&&u.concurrentRequestLimit),this.Ba=new Vs,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Mo.prototype,n.ka=8,n.I=1,n.connect=function(u,y,w,k){dt(0),this.W=u,this.H=y||{},w&&k!==void 0&&(this.H.OSID=w,this.H.OAID=k),this.F=this.X,this.J=pl(this,null,this.W),Zr(this)};function Oo(u){if(Lo(u),u.I==3){var y=u.V++,w=Rn(u.J);if(Ye(w,"SID",u.M),Ye(w,"RID",y),Ye(w,"TYPE","terminate"),_r(u,w),y=new bn(u,u.j,y),y.M=2,y.A=Qr(Rn(w)),w=!1,c.navigator&&c.navigator.sendBeacon)try{w=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!w&&c.Image&&(new Image().src=y.A,w=!0),w||(y.g=Hc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),bs(y)}Us(u)}function wn(u){u.g&&(js(u),u.g.cancel(),u.g=null)}function Lo(u){wn(u),u.v&&(c.clearTimeout(u.v),u.v=null),Vo(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&c.clearTimeout(u.m),u.m=null)}function Zr(u){if(!nl(u.h)&&!u.m){u.m=!0;var y=u.Ea;Z||A(),oe||(Z(),oe=!0),b.add(y,u),u.D=0}}function Wc(u,y){return Ps(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=y.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=bi(m(u.Ea,u,y),jo(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const H=new bn(this,this.j,u);let Q=this.o;if(this.U&&(Q?(Q=z(Q),me(Q,this.U)):Q=this.U),this.u!==null||this.R||(H.J=Q,Q=null),this.S)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var k=this.i[w];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(y+=k,y>4096){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=fl(this,H,y),w=Rn(this.J),Ye(w,"RID",u),Ye(w,"CVER",22),this.G&&Ye(w,"X-HTTP-Session-Id",this.G),_r(this,w),Q&&(this.R?y="headers="+dr(zc(Q))+"&"+y:this.u&&Do(w,this.u,Q)),Ro(this.h,H),this.Ra&&Ye(w,"TYPE","init"),this.S?(Ye(w,"$req",y),Ye(w,"SID","null"),H.U=!0,Hn(H,w,null)):Hn(H,w,y),this.I=2}}else this.I==3&&(u?Fs(this,u):this.i.length==0||nl(this.h)||Fs(this))};function Fs(u,y){var w;y?w=y.l:w=u.V++;const k=Rn(u.J);Ye(k,"SID",u.M),Ye(k,"RID",w),Ye(k,"AID",u.K),_r(u,k),u.u&&u.o&&Do(k,u.u,u.o),w=new bn(u,u.j,w,u.D+1),u.u===null&&(w.J=u.o),y&&(u.i=y.G.concat(u.i)),y=fl(u,w,1e3),w.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Ro(u.h,w),Hn(w,k,y)}function _r(u,y){u.H&&le(u.H,function(w,k){Ye(y,k,w)}),u.l&&le({},function(w,k){Ye(y,k,w)})}function fl(u,y,w){w=Math.min(u.i.length,w);const k=u.l?m(u.l.Ka,u.l,u):null;e:{var H=u.i;let Ve=-1;for(;;){const gt=["count="+w];Ve==-1?w>0?(Ve=H[0].g,gt.push("ofs="+Ve)):Ve=0:gt.push("ofs="+Ve);let Je=!0;for(let Et=0;Et<w;Et++){var Q=H[Et].g;const En=H[Et].map;if(Q-=Ve,Q<0)Ve=Math.max(0,H[Et].g-100),Je=!1;else try{Q="req"+Q+"_"||"";try{var ce=En instanceof Map?En:Object.entries(En);for(const[ei,Tr]of ce){let Ir=Tr;h(Tr)&&(Ir=xi(Tr)),gt.push(Q+ei+"="+encodeURIComponent(Ir))}}catch(ei){throw gt.push(Q+"type="+encodeURIComponent("_badmap")),ei}}catch{k&&k(En)}}if(Je){ce=gt.join("&");break e}}ce=void 0}return u=u.i.splice(0,w),y.G=u,ce}function qt(u){if(!u.g&&!u.v){u.Y=1;var y=u.Da;Z||A(),oe||(Z(),oe=!0),b.add(y,u),u.A=0}}function Er(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=bi(m(u.Da,u),jo(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,Vi(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=bi(m(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,dt(10),wn(this),Vi(this))};function js(u){u.B!=null&&(c.clearTimeout(u.B),u.B=null)}function Vi(u){u.g=new bn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var y=Rn(u.na);Ye(y,"RID","rpc"),Ye(y,"SID",u.M),Ye(y,"AID",u.K),Ye(y,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ye(y,"TO",u.ia),Ye(y,"TYPE","xmlhttp"),_r(u,y),u.u&&u.o&&Do(y,u.u,u.o),u.O&&(u.g.H=u.O);var w=u.g;u=u.ba,w.M=1,w.A=Qr(Rn(y)),w.u=null,w.R=!0,el(w,u)}n.Va=function(){this.C!=null&&(this.C=null,wn(this),Er(this),dt(19))};function Vo(u){u.C!=null&&(c.clearTimeout(u.C),u.C=null)}function Fo(u,y){var w=null;if(u.g==y){Vo(u),js(u),u.g=null;var k=2}else if(rl(u.h,y))w=y.G,Ns(u.h,y),k=1;else return;if(u.I!=0){if(y.o)if(k==1){w=y.u?y.u.length:0,y=Date.now()-y.F;var H=u.D;k=Ci(),mt(k,new Ja(k,w)),Zr(u)}else qt(u);else if(H=y.m,H==3||H==0&&y.X>0||!(k==1&&Wc(u,y)||k==2&&Er(u)))switch(w&&w.length>0&&(y=u.h,y.i=y.i.concat(w)),H){case 1:_n(u,5);break;case 4:_n(u,10);break;case 3:_n(u,6);break;default:_n(u,2)}}}function jo(u,y){let w=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(w*=2),w*y}function _n(u,y){if(u.j.info("Error code "+y),y==2){var w=m(u.bb,u),k=u.Ua;const H=!k;k=new hr(k||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ds(k,"https"),Qr(k),H?gr(k.toString(),w):yr(k.toString(),w)}else dt(2);u.I=0,u.l&&u.l.pa(y),Us(u),Lo(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function Us(u){if(u.I=0,u.ja=[],u.l){const y=gn(u.h);(y.length!=0||u.i.length!=0)&&(M(u.ja,y),M(u.ja,u.i),u.h.i.length=0,S(u.i),u.i.length=0),u.l.oa()}}function pl(u,y,w){var k=w instanceof hr?Rn(w):new hr(w);if(k.g!="")y&&(k.g=y+"."+k.g),fr(k,k.u);else{var H=c.location;k=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;const Q=new hr(null);k&&Ds(Q,k),y&&(Q.g=y),H&&fr(Q,H),w&&(Q.h=w),k=Q}return w=u.G,y=u.wa,w&&y&&Ye(k,w,y),Ye(k,"VER",u.ka),_r(u,k),k}function Hc(u,y,w){if(y&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Aa&&!u.ma?new Ze(new Yr({ab:w})):new Ze(u.ma),y.Fa(u.L),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function qc(){}n=qc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Uo(){}Uo.prototype.g=function(u,y){return new Vt(u,y)};function Vt(u,y){_t.call(this),this.g=new Mo(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(u?u["X-WebChannel-Client-Profile"]=y.sa:u={"X-WebChannel-Client-Profile":y.sa}),this.g.U=u,(u=y&&y.Qb)&&!R(u)&&(this.g.u=u),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!R(y)&&(this.g.G=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new Fi(this)}_(Vt,_t),Vt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){Oo(this.g)},Vt.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var w={};w.__data__=u,u=w}else this.v&&(w={},w.__data__=xi(u),u=w);y.i.push(new Mh(y.Ya++,u)),y.I==3&&Zr(y)},Vt.prototype.N=function(){this.g.l=null,delete this.j,Oo(this.g),delete this.g,Vt.Z.N.call(this)};function Gc(u){So.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const w in y){u=w;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}_(Gc,So);function Kc(){Xa.call(this),this.status=1}_(Kc,Xa);function Fi(u){this.g=u}_(Fi,qc),Fi.prototype.ra=function(){mt(this.g,"a")},Fi.prototype.qa=function(u){mt(this.g,new Gc(u))},Fi.prototype.pa=function(u){mt(this.g,new Kc)},Fi.prototype.oa=function(){mt(this.g,"b")},Uo.prototype.createWebChannel=Uo.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,OE=function(){return new Uo},ME=function(){return Ci()},DE=Wn,$p={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Pi.NO_ERROR=0,Pi.TIMEOUT=8,Pi.HTTP_ERROR=6,nd=Pi,Ni.COMPLETE="complete",NE=Ni,bc.EventType=ki,ki.OPEN="a",ki.CLOSE="b",ki.ERROR="c",ki.MESSAGE="d",_t.prototype.listen=_t.prototype.J,Hl=bc,Ze.prototype.listenOnce=Ze.prototype.K,Ze.prototype.getLastError=Ze.prototype.Ha,Ze.prototype.getLastErrorCode=Ze.prototype.ya,Ze.prototype.getStatus=Ze.prototype.ca,Ze.prototype.getResponseJson=Ze.prototype.La,Ze.prototype.getResponseText=Ze.prototype.la,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Fa,PE=Ze}).apply(typeof Bu<"u"?Bu:typeof self<"u"?self:typeof window<"u"?window:{});const Nw="@firebase/firestore",Dw="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let La="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo=new qd("@firebase/firestore");function ha(){return lo.logLevel}function he(n,...e){if(lo.logLevel<=ze.DEBUG){const t=e.map(Om);lo.debug(`Firestore (${La}): ${n}`,...t)}}function gi(n,...e){if(lo.logLevel<=ze.ERROR){const t=e.map(Om);lo.error(`Firestore (${La}): ${n}`,...t)}}function Sa(n,...e){if(lo.logLevel<=ze.WARN){const t=e.map(Om);lo.warn(`Firestore (${La}): ${n}`,...t)}}function Om(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,LE(n,r,t)}function LE(n,e,t){let r=`FIRESTORE (${La}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw gi(r),new Error(r)}function Xe(n,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,n||LE(e,o,r)}function Fe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends lr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Jt.UNAUTHENTICATED)))}shutdown(){}}class Bb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class $b{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Xe(this.o===void 0,42304);let r=this.i;const o=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new pi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new pi,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await o(this.currentUser)}))},h=f=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((f=>h(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new pi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xe(typeof r.accessToken=="string",31837,{l:r}),new VE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new Jt(e)}}class Wb{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Hb{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Wb(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Jt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Mw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qb{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Xe(this.o===void 0,3512);const r=a=>{a.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,he("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const o=a=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Mw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Xe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Mw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=Gb(40);for(let a=0;a<o.length;++a)r.length<20&&o[a]<t&&(r+=e.charAt(o[a]%62))}return r}}function Be(n,e){return n<e?-1:n>e?1:0}function Wp(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const o=n.charAt(r),a=e.charAt(r);if(o!==a)return yp(o)===yp(a)?Be(o,a):yp(o)?1:-1}return Be(n.length,e.length)}const Kb=55296,Qb=57343;function yp(n){const e=n.charCodeAt(0);return e>=Kb&&e<=Qb}function xa(n,e,t){return n.length===e.length&&n.every(((r,o)=>t(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="__name__";class Cr{constructor(e,t,r){t===void 0?t=0:t>e.length&&Re(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Re(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Cr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Cr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const a=Cr.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return Be(e.length,t.length)}static compareSegments(e,t){const r=Cr.isNumericId(e),o=Cr.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?Cr.extractNumericId(e).compare(Cr.extractNumericId(t)):Wp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return cs.fromString(e.substring(4,e.length-2))}}class et extends Cr{construct(e,t,r){return new et(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ue(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new et(t)}static emptyPath(){return new et([])}}const Yb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends Cr{construct(e,t,r){return new zt(e,t,r)}static isValidIdentifier(e){return Yb.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ow}static keyField(){return new zt([Ow])}static fromServerFormat(e){const t=[];let r="",o=0;const a=()=>{if(r.length===0)throw new ue(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const h=e[o];if(h==="\\"){if(o+1===e.length)throw new ue(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[o+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ue(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,o+=2}else h==="`"?(c=!c,o++):h!=="."||c?(r+=h,o++):(a(),o++)}if(a(),c)throw new ue(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(t)}static emptyPath(){return new zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(et.fromString(e))}static fromName(e){return new Ae(et.fromString(e).popFirst(5))}static empty(){return new Ae(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new et(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(n,e,t){if(!t)throw new ue(X.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Xb(n,e,t,r){if(e===!0&&r===!0)throw new ue(X.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Lw(n){if(!Ae.isDocumentKey(n))throw new ue(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Vw(n){if(Ae.isDocumentKey(n))throw new ue(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function FE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Yd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Re(12329,{type:typeof n})}function mn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ue(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Yd(n);throw new ue(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Jb(n,e){if(e<=0)throw new ue(X.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(n,e){const t={typeString:n};return e&&(t.value=e),t}function gc(n,e){if(!FE(n))throw new ue(X.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(o&&typeof c!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(a!==void 0&&c!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new ue(X.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=-62135596800,jw=1e6;class st{static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*jw);return new st(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ue(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ue(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Fw)throw new ue(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jw}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:st._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(gc(e,st._jsonSchema))return new st(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Fw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}st._jsonSchemaVersion="firestore/timestamp/1.0",st._jsonSchema={type:At("string",st._jsonSchemaVersion),seconds:At("number"),nanoseconds:At("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new st(0,0))}static max(){return new Le(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=-1;function Zb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Le.fromTimestamp(r===1e9?new st(t+1,0):new st(t,r));return new hs(o,Ae.empty(),e)}function eR(n){return new hs(n.readTime,n.key,ic)}class hs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new hs(Le.min(),Ae.empty(),ic)}static max(){return new hs(Le.max(),Ae.empty(),ic)}}function tR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ae.comparator(n.documentKey,e.documentKey),t!==0?t:Be(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Va(n){if(n.code!==X.FAILED_PRECONDITION||n.message!==nR)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee(((r,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ee.reject(t)}static resolve(e){return new ee(((t,r)=>{t(e)}))}static reject(e){return new ee(((t,r)=>{r(e)}))}static waitFor(e){return new ee(((t,r)=>{let o=0,a=0,c=!1;e.forEach((h=>{++o,h.next((()=>{++a,c&&a===o&&t()}),(f=>r(f)))})),c=!0,a===o&&t()}))}static or(e){let t=ee.resolve(!1);for(const r of e)t=t.next((o=>o?ee.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,a)=>{r.push(t.call(this,o,a))})),this.waitFor(r)}static mapArray(e,t){return new ee(((r,o)=>{const a=e.length,c=new Array(a);let h=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next((v=>{c[m]=v,++h,h===a&&r(c)}),(v=>o(v)))}}))}static doWhile(e,t){return new ee(((r,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):r()};a()}))}}function iR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Fa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Xd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm=-1;function Jd(n){return n==null}function wd(n){return n===0&&1/n==-1/0}function sR(n){return typeof n=="number"&&Number.isInteger(n)&&!wd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE="";function oR(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Uw(e)),e=aR(n.get(t),e);return Uw(e)}function aR(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case jE:t+="";break;default:t+=a}}return t}function Uw(n){return n+jE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ts(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function UE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,t){this.comparator=e,this.root=t||Ut.EMPTY}insert(e,t){return new ut(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ut.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ut.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $u(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $u(this.root,e,this.comparator,!1)}getReverseIterator(){return new $u(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $u(this.root,e,this.comparator,!0)}}class $u{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ut{constructor(e,t,r,o,a){this.key=e,this.value=t,this.color=r??Ut.RED,this.left=o??Ut.EMPTY,this.right=a??Ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,a){return new Ut(e??this.key,t??this.value,r??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const a=r(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,r),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ut.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}Ut.EMPTY=null,Ut.RED=!0,Ut.BLACK=!1;Ut.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,t,r,o,a){return this}insert(e,t,r){return new Ut(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Bw(this.data.getIterator())}getIteratorFrom(e){return new Bw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Pt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Pt(this.comparator);return t.data=e,t}}class Bw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new An([])}unionWith(e){let t=new Pt(zt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new An(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xa(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new zE("Invalid base64 string: "+a):a}})(e);return new $t(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let c=0;c<o.length;++c)a+=String.fromCharCode(o[c]);return a})(e);return new $t(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$t.EMPTY_BYTE_STRING=new $t("");const lR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fs(n){if(Xe(!!n,39018),typeof n=="string"){let e=0;const t=lR.exec(n);if(Xe(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vt(n.seconds),nanos:vt(n.nanos)}}function vt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ps(n){return typeof n=="string"?$t.fromBase64String(n):$t.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="server_timestamp",$E="__type__",WE="__previous_value__",HE="__local_write_time__";function jm(n){return(n?.mapValue?.fields||{})[$E]?.stringValue===BE}function Zd(n){const e=n.mapValue.fields[WE];return jm(e)?Zd(e):e}function sc(n){const e=fs(n.mapValue.fields[HE].timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,t,r,o,a,c,h,f,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=v}}const _d="(default)";class oc{constructor(e,t){this.projectId=e,this.database=t||_d}static empty(){return new oc("","")}get isDefaultDatabase(){return this.database===_d}isEqual(e){return e instanceof oc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="__type__",uR="__max__",Wu={mapValue:{}},GE="__vector__",Ed="value";function ms(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?jm(n)?4:hR(n)?9007199254740991:dR(n)?10:11:Re(28295,{value:n})}function zr(n,e){if(n===e)return!0;const t=ms(n);if(t!==ms(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return sc(n).isEqual(sc(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const c=fs(o.timestampValue),h=fs(a.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return ps(o.bytesValue).isEqual(ps(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return vt(o.geoPointValue.latitude)===vt(a.geoPointValue.latitude)&&vt(o.geoPointValue.longitude)===vt(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return vt(o.integerValue)===vt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const c=vt(o.doubleValue),h=vt(a.doubleValue);return c===h?wd(c)===wd(h):isNaN(c)&&isNaN(h)}return!1})(n,e);case 9:return xa(n.arrayValue.values||[],e.arrayValue.values||[],zr);case 10:case 11:return(function(o,a){const c=o.mapValue.fields||{},h=a.mapValue.fields||{};if(zw(c)!==zw(h))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(h[f]===void 0||!zr(c[f],h[f])))return!1;return!0})(n,e);default:return Re(52216,{left:n})}}function ac(n,e){return(n.values||[]).find((t=>zr(t,e)))!==void 0}function Aa(n,e){if(n===e)return 0;const t=ms(n),r=ms(e);if(t!==r)return Be(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(n.booleanValue,e.booleanValue);case 2:return(function(a,c){const h=vt(a.integerValue||a.doubleValue),f=vt(c.integerValue||c.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1})(n,e);case 3:return $w(n.timestampValue,e.timestampValue);case 4:return $w(sc(n),sc(e));case 5:return Wp(n.stringValue,e.stringValue);case 6:return(function(a,c){const h=ps(a),f=ps(c);return h.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,c){const h=a.split("/"),f=c.split("/");for(let m=0;m<h.length&&m<f.length;m++){const v=Be(h[m],f[m]);if(v!==0)return v}return Be(h.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,c){const h=Be(vt(a.latitude),vt(c.latitude));return h!==0?h:Be(vt(a.longitude),vt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Ww(n.arrayValue,e.arrayValue);case 10:return(function(a,c){const h=a.fields||{},f=c.fields||{},m=h[Ed]?.arrayValue,v=f[Ed]?.arrayValue,_=Be(m?.values?.length||0,v?.values?.length||0);return _!==0?_:Ww(m,v)})(n.mapValue,e.mapValue);case 11:return(function(a,c){if(a===Wu.mapValue&&c===Wu.mapValue)return 0;if(a===Wu.mapValue)return 1;if(c===Wu.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),m=c.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let _=0;_<f.length&&_<v.length;++_){const E=Wp(f[_],v[_]);if(E!==0)return E;const S=Aa(h[f[_]],m[v[_]]);if(S!==0)return S}return Be(f.length,v.length)})(n.mapValue,e.mapValue);default:throw Re(23264,{he:t})}}function $w(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Be(n,e);const t=fs(n),r=fs(e),o=Be(t.seconds,r.seconds);return o!==0?o:Be(t.nanos,r.nanos)}function Ww(n,e){const t=n.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const a=Aa(t[o],r[o]);if(a)return a}return Be(t.length,r.length)}function ka(n){return Hp(n)}function Hp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=fs(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ps(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ae.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",o=!0;for(const a of t.values||[])o?o=!1:r+=",",r+=Hp(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const c of r)a?a=!1:o+=",",o+=`${c}:${Hp(t.fields[c])}`;return o+"}"})(n.mapValue):Re(61005,{value:n})}function rd(n){switch(ms(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Zd(n);return e?16+rd(e):16;case 5:return 2*n.stringValue.length;case 6:return ps(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,a)=>o+rd(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let o=0;return Ts(r.fields,((a,c)=>{o+=a.length+rd(c)})),o})(n.mapValue);default:throw Re(13486,{value:n})}}function Hw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function qp(n){return!!n&&"integerValue"in n}function Um(n){return!!n&&"arrayValue"in n}function qw(n){return!!n&&"nullValue"in n}function Gw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function id(n){return!!n&&"mapValue"in n}function dR(n){return(n?.mapValue?.fields||{})[qE]?.stringValue===GE}function Xl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ts(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Xl(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xl(n.arrayValue.values[t]);return e}return{...n}}function hR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===uR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.value=e}static empty(){return new pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!id(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xl(t)}setAll(e){let t=zt.emptyPath(),r={},o=[];e.forEach(((c,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,r,o),r={},o=[],t=h.popLast()}c?r[h.lastSegment()]=Xl(c):o.push(h.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,o)}delete(e){const t=this.field(e.popLast());id(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];id(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Ts(t,((o,a)=>e[o]=a));for(const o of r)delete e[o]}clone(){return new pn(Xl(this.value))}}function KE(n){const e=[];return Ts(n.fields,((t,r)=>{const o=new zt([t]);if(id(r)){const a=KE(r.mapValue).fields;if(a.length===0)e.push(o);else for(const c of a)e.push(o.child(c))}else e.push(o)})),new An(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,t,r,o,a,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=a,this.data=c,this.documentState=h}static newInvalidDocument(e){return new Zt(e,0,Le.min(),Le.min(),Le.min(),pn.empty(),0)}static newFoundDocument(e,t,r,o){return new Zt(e,1,t,Le.min(),r,o,0)}static newNoDocument(e,t){return new Zt(e,2,t,Le.min(),Le.min(),pn.empty(),0)}static newUnknownDocument(e,t){return new Zt(e,3,t,Le.min(),Le.min(),pn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,t){this.position=e,this.inclusive=t}}function Kw(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const a=e[o],c=n.position[o];if(a.field.isKeyField()?r=Ae.comparator(Ae.fromName(c.referenceValue),t.key):r=Aa(c,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Qw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!zr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,t="asc"){this.field=e,this.dir=t}}function fR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{}class xt extends QE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new mR(e,t,r):t==="array-contains"?new vR(e,r):t==="in"?new wR(e,r):t==="not-in"?new _R(e,r):t==="array-contains-any"?new ER(e,r):new xt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new gR(e,r):new yR(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Aa(t,this.value)):t!==null&&ms(this.value)===ms(t)&&this.matchesComparison(Aa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sr extends QE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new sr(e,t)}matches(e){return YE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function YE(n){return n.op==="and"}function XE(n){return pR(n)&&YE(n)}function pR(n){for(const e of n.filters)if(e instanceof sr)return!1;return!0}function Gp(n){if(n instanceof xt)return n.field.canonicalString()+n.op.toString()+ka(n.value);if(XE(n))return n.filters.map((e=>Gp(e))).join(",");{const e=n.filters.map((t=>Gp(t))).join(",");return`${n.op}(${e})`}}function JE(n,e){return n instanceof xt?(function(r,o){return o instanceof xt&&r.op===o.op&&r.field.isEqual(o.field)&&zr(r.value,o.value)})(n,e):n instanceof sr?(function(r,o){return o instanceof sr&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((a,c,h)=>a&&JE(c,o.filters[h])),!0):!1})(n,e):void Re(19439)}function ZE(n){return n instanceof xt?(function(t){return`${t.field.canonicalString()} ${t.op} ${ka(t.value)}`})(n):n instanceof sr?(function(t){return t.op.toString()+" {"+t.getFilters().map(ZE).join(" ,")+"}"})(n):"Filter"}class mR extends xt{constructor(e,t,r){super(e,t,r),this.key=Ae.fromName(r.referenceValue)}matches(e){const t=Ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class gR extends xt{constructor(e,t){super(e,"in",t),this.keys=eT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class yR extends xt{constructor(e,t){super(e,"not-in",t),this.keys=eT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function eT(n,e){return(e.arrayValue?.values||[]).map((t=>Ae.fromName(t.referenceValue)))}class vR extends xt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Um(t)&&ac(t.arrayValue,this.value)}}class wR extends xt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ac(this.value.arrayValue,t)}}class _R extends xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ac(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ac(this.value.arrayValue,t)}}class ER extends xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Um(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>ac(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,t=null,r=[],o=[],a=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=a,this.startAt=c,this.endAt=h,this.Te=null}}function Yw(n,e=null,t=[],r=[],o=null,a=null,c=null){return new TR(n,e,t,r,o,a,c)}function zm(n){const e=Fe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Gp(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Jd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>ka(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>ka(r))).join(",")),e.Te=t}return e.Te}function Bm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!fR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!JE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Qw(n.startAt,e.startAt)&&Qw(n.endAt,e.endAt)}function Kp(n){return Ae.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,t=null,r=[],o=[],a=null,c="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function IR(n,e,t,r,o,a,c,h){return new yo(n,e,t,r,o,a,c,h)}function eh(n){return new yo(n)}function Xw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function tT(n){return n.collectionGroup!==null}function Jl(n){const e=Fe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Pt(zt.comparator);return c.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new lc(a,r))})),t.has(zt.keyField().canonicalString())||e.Ie.push(new lc(zt.keyField(),r))}return e.Ie}function Dr(n){const e=Fe(n);return e.Ee||(e.Ee=SR(e,Jl(n))),e.Ee}function SR(n,e){if(n.limitType==="F")return Yw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new lc(o.field,a)}));const t=n.endAt?new Td(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Td(n.startAt.position,n.startAt.inclusive):null;return Yw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Qp(n,e){const t=n.filters.concat([e]);return new yo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Id(n,e,t){return new yo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function th(n,e){return Bm(Dr(n),Dr(e))&&n.limitType===e.limitType}function nT(n){return`${zm(Dr(n))}|lt:${n.limitType}`}function fa(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>ZE(o))).join(", ")}]`),Jd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>ka(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>ka(o))).join(",")),`Target(${r})`})(Dr(n))}; limitType=${n.limitType})`}function nh(n,e){return e.isFoundDocument()&&(function(r,o){const a=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ae.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,o){for(const a of Jl(r))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,o){for(const a of r.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(r,o){return!(r.startAt&&!(function(c,h,f){const m=Kw(c,h,f);return c.inclusive?m<=0:m<0})(r.startAt,Jl(r),o)||r.endAt&&!(function(c,h,f){const m=Kw(c,h,f);return c.inclusive?m>=0:m>0})(r.endAt,Jl(r),o))})(n,e)}function xR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function rT(n){return(e,t)=>{let r=!1;for(const o of Jl(n)){const a=AR(o,e,t);if(a!==0)return a;r=r||o.field.isKeyField()}return 0}}function AR(n,e,t){const r=n.field.isKeyField()?Ae.comparator(e.key,t.key):(function(a,c,h){const f=c.data.field(a),m=h.data.field(a);return f!==null&&m!==null?Aa(f,m):Re(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Re(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,a]of r)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ts(this.inner,((t,r)=>{for(const[o,a]of r)e(o,a)}))}isEmpty(){return UE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=new ut(Ae.comparator);function yi(){return kR}const iT=new ut(Ae.comparator);function ql(...n){let e=iT;for(const t of n)e=e.insert(t.key,t);return e}function sT(n){let e=iT;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function no(){return Zl()}function oT(){return Zl()}function Zl(){return new vo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const CR=new ut(Ae.comparator),bR=new Pt(Ae.comparator);function $e(...n){let e=bR;for(const t of n)e=e.add(t);return e}const RR=new Pt(Be);function PR(){return RR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wd(e)?"-0":e}}function aT(n){return{integerValue:""+n}}function NR(n,e){return sR(e)?aT(e):$m(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(){this._=void 0}}function DR(n,e,t){return n instanceof cc?(function(o,a){const c={fields:{[$E]:{stringValue:BE},[HE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&jm(a)&&(a=Zd(a)),a&&(c.fields[WE]=a),{mapValue:c}})(t,e):n instanceof Ca?cT(n,e):n instanceof ba?uT(n,e):(function(o,a){const c=lT(o,a),h=Jw(c)+Jw(o.Ae);return qp(c)&&qp(o.Ae)?aT(h):$m(o.serializer,h)})(n,e)}function MR(n,e,t){return n instanceof Ca?cT(n,e):n instanceof ba?uT(n,e):t}function lT(n,e){return n instanceof Sd?(function(r){return qp(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class cc extends rh{}class Ca extends rh{constructor(e){super(),this.elements=e}}function cT(n,e){const t=dT(e);for(const r of n.elements)t.some((o=>zr(o,r)))||t.push(r);return{arrayValue:{values:t}}}class ba extends rh{constructor(e){super(),this.elements=e}}function uT(n,e){let t=dT(e);for(const r of n.elements)t=t.filter((o=>!zr(o,r)));return{arrayValue:{values:t}}}class Sd extends rh{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Jw(n){return vt(n.integerValue||n.doubleValue)}function dT(n){return Um(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,t){this.field=e,this.transform=t}}function OR(n,e){return n.field.isEqual(e.field)&&(function(r,o){return r instanceof Ca&&o instanceof Ca||r instanceof ba&&o instanceof ba?xa(r.elements,o.elements,zr):r instanceof Sd&&o instanceof Sd?zr(r.Ae,o.Ae):r instanceof cc&&o instanceof cc})(n.transform,e.transform)}class LR{constructor(e,t){this.version=e,this.transformResults=t}}class nr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new nr}static exists(e){return new nr(void 0,e)}static updateTime(e){return new nr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class ih{}function hT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new pT(n.key,nr.none()):new yc(n.key,n.data,nr.none());{const t=n.data,r=pn.empty();let o=new Pt(zt.comparator);for(let a of e.fields)if(!o.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?r.delete(a):r.set(a,c),o=o.add(a)}return new Is(n.key,r,new An(o.toArray()),nr.none())}}function VR(n,e,t){n instanceof yc?(function(o,a,c){const h=o.value.clone(),f=e_(o.fieldTransforms,a,c.transformResults);h.setAll(f),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Is?(function(o,a,c){if(!sd(o.precondition,a))return void a.convertToUnknownDocument(c.version);const h=e_(o.fieldTransforms,a,c.transformResults),f=a.data;f.setAll(fT(o)),f.setAll(h),a.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):(function(o,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function ec(n,e,t,r){return n instanceof yc?(function(a,c,h,f){if(!sd(a.precondition,c))return h;const m=a.value.clone(),v=t_(a.fieldTransforms,f,c);return m.setAll(v),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof Is?(function(a,c,h,f){if(!sd(a.precondition,c))return h;const m=t_(a.fieldTransforms,f,c),v=c.data;return v.setAll(fT(a)),v.setAll(m),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((_=>_.field)))})(n,e,t,r):(function(a,c,h){return sd(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(n,e,t)}function FR(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),a=lT(r.transform,o||null);a!=null&&(t===null&&(t=pn.empty()),t.set(r.field,a))}return t||null}function Zw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&xa(r,o,((a,c)=>OR(a,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class yc extends ih{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Is extends ih{constructor(e,t,r,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function fT(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function e_(n,e,t){const r=new Map;Xe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const a=n[o],c=a.transform,h=e.data.field(a.field);r.set(a.field,MR(c,h,t[o]))}return r}function t_(n,e,t){const r=new Map;for(const o of n){const a=o.transform,c=t.data.field(o.field);r.set(o.field,DR(a,c,e))}return r}class pT extends ih{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jR extends ih{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&VR(a,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ec(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ec(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=oT();return this.mutations.forEach((o=>{const a=e.get(o.key),c=a.overlayedDocument;let h=this.applyToLocalView(c,a.mutatedFields);h=t.has(o.key)?null:h;const f=hT(c,h);f!==null&&r.set(o.key,f),c.isValidDocument()||c.convertToNoDocument(Le.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),$e())}isEqual(e){return this.batchId===e.batchId&&xa(this.mutations,e.mutations,((t,r)=>Zw(t,r)))&&xa(this.baseMutations,e.baseMutations,((t,r)=>Zw(t,r)))}}class Hm{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Xe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return CR})();const a=e.mutations;for(let c=0;c<a.length;c++)o=o.insert(a[c].key,r[c].version);return new Hm(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,qe;function $R(n){switch(n){case X.OK:return Re(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return Re(15467,{code:n})}}function mT(n){if(n===void 0)return gi("GRPC error has no .code"),X.UNKNOWN;switch(n){case It.OK:return X.OK;case It.CANCELLED:return X.CANCELLED;case It.UNKNOWN:return X.UNKNOWN;case It.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case It.INTERNAL:return X.INTERNAL;case It.UNAVAILABLE:return X.UNAVAILABLE;case It.UNAUTHENTICATED:return X.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case It.NOT_FOUND:return X.NOT_FOUND;case It.ALREADY_EXISTS:return X.ALREADY_EXISTS;case It.PERMISSION_DENIED:return X.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case It.ABORTED:return X.ABORTED;case It.OUT_OF_RANGE:return X.OUT_OF_RANGE;case It.UNIMPLEMENTED:return X.UNIMPLEMENTED;case It.DATA_LOSS:return X.DATA_LOSS;default:return Re(39323,{code:n})}}(qe=It||(It={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=new cs([4294967295,4294967295],0);function n_(n){const e=WR().encode(n),t=new RE;return t.update(e),new Uint8Array(t.digest())}function r_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new cs([t,r],0),new cs([o,a],0)]}class qm{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Gl(`Invalid padding: ${t}`);if(r<0)throw new Gl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Gl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=cs.fromNumber(this.ge)}ye(e,t,r){let o=e.add(t.multiply(cs.fromNumber(r)));return o.compare(HR)===1&&(o=new cs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=n_(e),[r,o]=r_(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(r,o,a);if(!this.we(c))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new qm(a,o,t);return r.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const t=n_(e),[r,o]=r_(t);for(let a=0;a<this.hashCount;a++){const c=this.ye(r,o,a);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Gl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,t,r,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,vc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new sh(Le.min(),o,new ut(Be),yi(),$e())}}class vc{constructor(e,t,r,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new vc(r,t,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t,r,o){this.be=e,this.removedTargetIds=t,this.key=r,this.De=o}}class gT{constructor(e,t){this.targetId=e,this.Ce=t}}class yT{constructor(e,t,r=$t.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class i_{constructor(){this.ve=0,this.Fe=s_(),this.Me=$t.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=$e(),t=$e(),r=$e();return this.Fe.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Re(38017,{changeType:a})}})),new vc(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=s_()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class qR{constructor(e){this.Ge=e,this.ze=new Map,this.je=yi(),this.Je=Hu(),this.He=Hu(),this.Ye=new ut(Be)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Re(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,r=e.Ce.count,o=this.ot(t);if(o){const a=o.target;if(Kp(a))if(r===0){const c=new Ae(a.path);this.et(t,c,Zt.newNoDocument(c,Le.min()))}else Xe(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const h=this.ut(e),f=h?this.ct(h,e,c):1;if(f!==0){this.it(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:a=0}=t;let c,h;try{c=ps(r).toUint8Array()}catch(f){if(f instanceof zE)return Sa("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new qm(c,o,a)}catch(f){return Sa(f instanceof Gl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.ge===0?null:h}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let o=0;return r.forEach((a=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.et(t,a,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((a,c)=>{const h=this.ot(c);if(h){if(a.current&&Kp(h.target)){const f=new Ae(h.target.path);this.It(f).has(c)||this.Et(c,f)||this.et(c,f,Zt.newNoDocument(f,e))}a.Be&&(t.set(c,a.ke()),a.qe())}}));let r=$e();this.He.forEach(((a,c)=>{let h=!0;c.forEachWhile((f=>{const m=this.ot(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(a))})),this.je.forEach(((a,c)=>c.setReadTime(e)));const o=new sh(e,t,this.Ye,this.je,r);return this.je=yi(),this.Je=Hu(),this.He=Hu(),this.Ye=new ut(Be),o}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new i_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Pt(Be),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Pt(Be),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new i_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Hu(){return new ut(Ae.comparator)}function s_(){return new ut(Ae.comparator)}const GR={asc:"ASCENDING",desc:"DESCENDING"},KR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QR={and:"AND",or:"OR"};class YR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yp(n,e){return n.useProto3Json||Jd(e)?e:{value:e}}function xd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function XR(n,e){return xd(n,e.toTimestamp())}function Mr(n){return Xe(!!n,49232),Le.fromTimestamp((function(t){const r=fs(t);return new st(r.seconds,r.nanos)})(n))}function Gm(n,e){return Xp(n,e).canonicalString()}function Xp(n,e){const t=(function(o){return new et(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function wT(n){const e=et.fromString(n);return Xe(ST(e),10190,{key:e.toString()}),e}function Jp(n,e){return Gm(n.databaseId,e.path)}function vp(n,e){const t=wT(e);if(t.get(1)!==n.databaseId.projectId)throw new ue(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ue(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ae(ET(t))}function _T(n,e){return Gm(n.databaseId,e)}function JR(n){const e=wT(n);return e.length===4?et.emptyPath():ET(e)}function Zp(n){return new et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ET(n){return Xe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function o_(n,e,t){return{name:Jp(n,e),fields:t.value.mapValue.fields}}function ZR(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Re(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(m,v){return m.useProto3Json?(Xe(v===void 0||typeof v=="string",58123),$t.fromBase64String(v||"")):(Xe(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),$t.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(m){const v=m.code===void 0?X.UNKNOWN:mT(m.code);return new ue(v,m.message||"")})(c);t=new yT(r,o,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=vp(n,r.document.name),a=Mr(r.document.updateTime),c=r.document.createTime?Mr(r.document.createTime):Le.min(),h=new pn({mapValue:{fields:r.document.fields}}),f=Zt.newFoundDocument(o,a,c,h),m=r.targetIds||[],v=r.removedTargetIds||[];t=new od(m,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=vp(n,r.document),a=r.readTime?Mr(r.readTime):Le.min(),c=Zt.newNoDocument(o,a),h=r.removedTargetIds||[];t=new od([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=vp(n,r.document),a=r.removedTargetIds||[];t=new od([],a,o,null)}else{if(!("filter"in e))return Re(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:a}=r,c=new BR(o,a),h=r.targetId;t=new gT(h,c)}}return t}function eP(n,e){let t;if(e instanceof yc)t={update:o_(n,e.key,e.value)};else if(e instanceof pT)t={delete:Jp(n,e.key)};else if(e instanceof Is)t={update:o_(n,e.key,e.data),updateMask:cP(e.fieldMask)};else{if(!(e instanceof jR))return Re(16599,{Vt:e.type});t={verify:Jp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,c){const h=c.transform;if(h instanceof cc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Ca)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof ba)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Sd)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw Re(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:XR(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Re(27497)})(n,e.precondition)),t}function tP(n,e){return n&&n.length>0?(Xe(e!==void 0,14353),n.map((t=>(function(o,a){let c=o.updateTime?Mr(o.updateTime):Mr(a);return c.isEqual(Le.min())&&(c=Mr(a)),new LR(c,o.transformResults||[])})(t,e)))):[]}function nP(n,e){return{documents:[_T(n,e.path)]}}function rP(n,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=_T(n,o);const a=(function(m){if(m.length!==0)return IT(sr.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const c=(function(m){if(m.length!==0)return m.map((v=>(function(E){return{field:pa(E.field),direction:oP(E.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=Yp(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:o}}function iP(n){let e=JR(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Xe(r===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=(function(_){const E=TT(_);return E instanceof sr&&XE(E)?E.getFilters():[E]})(t.where));let c=[];t.orderBy&&(c=(function(_){return _.map((E=>(function(M){return new lc(ma(M.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(E)))})(t.orderBy));let h=null;t.limit&&(h=(function(_){let E;return E=typeof _=="object"?_.value:_,Jd(E)?null:E})(t.limit));let f=null;t.startAt&&(f=(function(_){const E=!!_.before,S=_.values||[];return new Td(S,E)})(t.startAt));let m=null;return t.endAt&&(m=(function(_){const E=!_.before,S=_.values||[];return new Td(S,E)})(t.endAt)),IR(e,o,c,a,h,"F",f,m)}function sP(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function TT(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ma(t.unaryFilter.field);return xt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=ma(t.unaryFilter.field);return xt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ma(t.unaryFilter.field);return xt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ma(t.unaryFilter.field);return xt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}})(n):n.fieldFilter!==void 0?(function(t){return xt.create(ma(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return sr.create(t.compositeFilter.filters.map((r=>TT(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Re(1026)}})(t.compositeFilter.op))})(n):Re(30097,{filter:n})}function oP(n){return GR[n]}function aP(n){return KR[n]}function lP(n){return QR[n]}function pa(n){return{fieldPath:n.canonicalString()}}function ma(n){return zt.fromServerFormat(n.fieldPath)}function IT(n){return n instanceof xt?(function(t){if(t.op==="=="){if(Gw(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NAN"}};if(qw(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Gw(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NOT_NAN"}};if(qw(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pa(t.field),op:aP(t.op),value:t.value}}})(n):n instanceof sr?(function(t){const r=t.getFilters().map((o=>IT(o)));return r.length===1?r[0]:{compositeFilter:{op:lP(t.op),filters:r}}})(n):Re(54877,{filter:n})}function cP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function ST(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,t,r,o,a=Le.min(),c=Le.min(),h=$t.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new os(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e){this.yt=e}}function dP(n){const e=iP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Id(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(){this.Cn=new fP}addToCollectionParentIndex(e,t){return this.Cn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(hs.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(hs.min())}updateCollectionGroup(e,t,r){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class fP{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Pt(et.comparator),a=!o.has(r);return this.index[t]=o.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Pt(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xT=41943040;class fn{static withCacheSize(e){return new fn(e,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(xT,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ra(0)}static cr(){return new Ra(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_="LruGarbageCollector",pP=1048576;function c_([n,e],[t,r]){const o=Be(n,t);return o===0?Be(e,r):o}class mP{constructor(e){this.Ir=e,this.buffer=new Pt(c_),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();c_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gP{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(l_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Fa(t)?he(l_,"Ignoring IndexedDB error during garbage collection: ",t):await Va(t)}await this.Vr(3e5)}))}}class yP{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(Xd.ce);const r=new mP(t);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(a_)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),a_):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,o,a,c,h,f,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),o=this.params.maximumSequenceNumbersToCollect):o=_,c=Date.now(),this.nthSequenceNumber(e,o)))).next((_=>(r=_,h=Date.now(),this.removeTargets(e,r,t)))).next((_=>(a=_,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((_=>(m=Date.now(),ha()<=ze.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${o} in `+(h-c)+`ms
	Removed ${a} targets in `+(f-h)+`ms
	Removed ${_} documents in `+(m-f)+`ms
Total Duration: ${m-v}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:_}))))}}function vP(n,e){return new yP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(){this.changes=new vo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ee.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&ec(r.mutation,o,An.empty(),st.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,$e()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=$e()){const o=no();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((a=>{let c=ql();return a.forEach(((h,f)=>{c=c.insert(h,f.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=no();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,$e())))}populateOverlays(e,t,r){const o=[];return r.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((c,h)=>{t.set(c,h)}))}))}computeViews(e,t,r,o){let a=yi();const c=Zl(),h=(function(){return Zl()})();return t.forEach(((f,m)=>{const v=r.get(m.key);o.has(m.key)&&(v===void 0||v.mutation instanceof Is)?a=a.insert(m.key,m):v!==void 0?(c.set(m.key,v.mutation.getFieldMask()),ec(v.mutation,m,v.mutation.getFieldMask(),st.now())):c.set(m.key,An.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((m,v)=>c.set(m,v))),t.forEach(((m,v)=>h.set(m,new _P(v,c.get(m)??null)))),h)))}recalculateAndSaveOverlays(e,t){const r=Zl();let o=new ut(((c,h)=>c-h)),a=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const h of c)h.keys().forEach((f=>{const m=t.get(f);if(m===null)return;let v=r.get(f)||An.empty();v=h.applyToLocalView(m,v),r.set(f,v);const _=(o.get(h.batchId)||$e()).add(f);o=o.insert(h.batchId,_)}))})).next((()=>{const c=[],h=o.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),m=f.key,v=f.value,_=oT();v.forEach((E=>{if(!a.has(E)){const S=hT(t.get(E),r.get(E));S!==null&&_.set(E,S),a=a.add(E)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,_))}return ee.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return(function(c){return Ae.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):tT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((a=>{const c=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-a.size):ee.resolve(no());let h=ic,f=a;return c.next((m=>ee.forEach(m,((v,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),a.get(v)?ee.resolve():this.remoteDocumentCache.getEntry(e,v).next((E=>{f=f.insert(v,E)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,f,m,$e()))).next((v=>({batchId:h,changes:sT(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ae(t)).next((r=>{let o=ql();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const a=t.collectionGroup;let c=ql();return this.indexManager.getCollectionParents(e,a).next((h=>ee.forEach(h,(f=>{const m=(function(_,E){return new yo(E,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,o).next((v=>{v.forEach(((_,E)=>{c=c.insert(_,E)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,o)))).next((c=>{a.forEach(((f,m)=>{const v=m.getKey();c.get(v)===null&&(c=c.insert(v,Zt.newInvalidDocument(v)))}));let h=ql();return c.forEach(((f,m)=>{const v=a.get(f);v!==void 0&&ec(v.mutation,m,An.empty(),st.now()),nh(t,m)&&(h=h.insert(f,m))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ee.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Mr(o.createTime)}})(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:dP(o.bundledQuery),readTime:Mr(o.readTime)}})(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(){this.overlays=new ut(Ae.comparator),this.qr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const r=no();return ee.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&r.set(o,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,a)=>{this.St(e,t,a)})),ee.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),ee.resolve()}getOverlaysForCollection(e,t,r){const o=no(),a=t.length+1,c=new Ae(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const f=h.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&o.set(f.getKey(),f)}return ee.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let a=new ut(((m,v)=>m-v));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let v=a.get(m.largestBatchId);v===null&&(v=no(),a=a.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const h=no(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,v)=>h.set(m,v))),!(h.size()>=o)););return ee.resolve(h)}St(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new zR(t,r));let a=this.qr.get(t);a===void 0&&(a=$e(),this.qr.set(t,a)),this.qr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(){this.sessionToken=$t.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(){this.Qr=new Pt(Ot.$r),this.Ur=new Pt(Ot.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Ot(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Ot(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Ae(new et([])),r=new Ot(t,e),o=new Ot(t,e+1),a=[];return this.Ur.forEachInRange([r,o],(c=>{this.Gr(c),a.push(c.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ae(new et([])),r=new Ot(t,e),o=new Ot(t,e+1);let a=$e();return this.Ur.forEachInRange([r,o],(c=>{a=a.add(c.key)})),a}containsKey(e){const t=new Ot(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ot{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ae.comparator(e.key,t.key)||Be(e.Yr,t.Yr)}static Kr(e,t){return Be(e.Yr,t.Yr)||Ae.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Pt(Ot.$r)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new UR(a,t,r,o);this.mutationQueue.push(c);for(const h of o)this.Zr=this.Zr.add(new Ot(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ee.resolve(c)}lookupMutationBatch(e,t){return ee.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.ei(r),a=o<0?0:o;return ee.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?Fm:this.tr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ot(t,0),o=new Ot(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,o],(c=>{const h=this.Xr(c.Yr);a.push(h)})),ee.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pt(Be);return t.forEach((o=>{const a=new Ot(o,0),c=new Ot(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,c],(h=>{r=r.add(h.Yr)}))})),ee.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let a=r;Ae.isDocumentKey(a)||(a=a.child(""));const c=new Ot(new Ae(a),0);let h=new Pt(Be);return this.Zr.forEachWhile((f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===o&&(h=h.add(f.Yr)),!0)}),c),ee.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Xe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ee.forEach(t.mutations,(o=>{const a=new Ot(o.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Ot(t,0),o=this.Zr.firstAfterOrEqual(r);return ee.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e){this.ri=e,this.docs=(function(){return new ut(Ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),a=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ee.resolve(r?r.document.mutableCopy():Zt.newInvalidDocument(t))}getEntries(e,t){let r=yi();return t.forEach((o=>{const a=this.docs.get(o);r=r.insert(o,a?a.document.mutableCopy():Zt.newInvalidDocument(o))})),ee.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let a=yi();const c=t.path,h=new Ae(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:m,value:{document:v}}=f.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||tR(eR(v),r)<=0||(o.has(v.key)||nh(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return ee.resolve(a)}getAllFromCollectionGroup(e,t,r,o){Re(9500)}ii(e,t){return ee.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new kP(this)}getSize(e){return ee.resolve(this.size)}}class kP extends wP{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),ee.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.persistence=e,this.si=new vo((t=>zm(t)),Bm),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.oi=0,this._i=new Km,this.targetCount=0,this.ai=Ra.ur()}forEachTarget(e,t){return this.si.forEach(((r,o)=>t(o))),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ee.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ra(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.Pr(t),ee.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,r){let o=0;const a=[];return this.si.forEach(((c,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.si.delete(c),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),o++)})),ee.waitFor(a).next((()=>o))}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ee.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ee.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((c=>{a.push(o.markPotentiallyOrphaned(e,c))})),ee.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ee.resolve(r)}containsKey(e,t){return ee.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,t){this.ui={},this.overlays={},this.ci=new Xd(0),this.li=!1,this.li=!0,this.hi=new SP,this.referenceDelegate=e(this),this.Pi=new CP(this),this.indexManager=new hP,this.remoteDocumentCache=(function(o){return new AP(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new uP(t),this.Ii=new TP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new IP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new xP(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){he("MemoryPersistence","Starting transaction:",e);const o=new bP(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ai(e,t){return ee.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class bP extends rR{constructor(e){super(),this.currentSequenceNumber=e}}class Qm{constructor(e){this.persistence=e,this.Ri=new Km,this.Vi=null}static mi(e){return new Qm(e)}get fi(){if(this.Vi)return this.Vi;throw Re(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ee.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.fi,(r=>{const o=Ae.fromPath(r);return this.gi(e,o).next((a=>{a||t.removeEntry(o,Le.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ee.or([()=>ee.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ad{constructor(e,t){this.persistence=e,this.pi=new vo((r=>oR(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=vP(this,t)}static mi(e,t){return new Ad(e,t)}Ei(){}di(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return ee.forEach(this.pi,((r,o)=>this.br(e,r,o).next((a=>a?ee.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((h=>{h||(r++,a.removeEntry(c,Le.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ee.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=rd(e.data.value)),t}br(e,t,r){return ee.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ee.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=o}static As(e,t){let r=$e(),o=$e();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Ym(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return XA()?8:iR(en())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,o){const a={result:null};return this.ys(e,t).next((c=>{a.result=c})).next((()=>{if(!a.result)return this.ws(e,t,o,r).next((c=>{a.result=c}))})).next((()=>{if(a.result)return;const c=new RP;return this.Ss(e,t,c).next((h=>{if(a.result=h,this.Vs)return this.bs(e,t,c,h.size)}))})).next((()=>a.result))}bs(e,t,r,o){return r.documentReadCount<this.fs?(ha()<=ze.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",fa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ee.resolve()):(ha()<=ze.DEBUG&&he("QueryEngine","Query:",fa(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(ha()<=ze.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",fa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dr(t))):ee.resolve())}ys(e,t){if(Xw(t))return ee.resolve(null);let r=Dr(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Id(t,null,"F"),r=Dr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const c=$e(...a);return this.ps.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,r).next((f=>{const m=this.Ds(t,h);return this.Cs(t,m,c,f.readTime)?this.ys(e,Id(t,null,"F")):this.vs(e,m,t,f)}))))})))))}ws(e,t,r,o){return Xw(t)||o.isEqual(Le.min())?ee.resolve(null):this.ps.getDocuments(e,r).next((a=>{const c=this.Ds(t,a);return this.Cs(t,c,r,o)?ee.resolve(null):(ha()<=ze.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),fa(t)),this.vs(e,c,t,Zb(o,ic)).next((h=>h)))}))}Ds(e,t){let r=new Pt(rT(e));return t.forEach(((o,a)=>{nh(e,a)&&(r=r.add(a))})),r}Cs(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Ss(e,t,r){return ha()<=ze.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",fa(t)),this.ps.getDocumentsMatchingQuery(e,t,hs.min(),r)}vs(e,t,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((a=>(t.forEach((c=>{a=a.insert(c.key,c)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm="LocalStore",NP=3e8;class DP{constructor(e,t,r,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new ut(Be),this.xs=new vo((a=>zm(a)),Bm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function MP(n,e,t,r){return new DP(n,e,t,r)}async function kT(n,e){const t=Fe(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((a=>(o=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const c=[],h=[];let f=$e();for(const m of o){c.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}for(const m of a){h.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(r,f).next((m=>({Ls:m,removedBatchIds:c,addedBatchIds:h})))}))}))}function OP(n,e){const t=Fe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,f,m,v){const _=m.batch,E=_.keys();let S=ee.resolve();return E.forEach((M=>{S=S.next((()=>v.getEntry(f,M))).next((x=>{const C=m.docVersions.get(M);Xe(C!==null,48541),x.version.compareTo(C)<0&&(_.applyToRemoteDocument(x,m),x.isValidDocument()&&(x.setReadTime(m.commitVersion),v.addEntry(x)))}))})),S.next((()=>h.mutationQueue.removeMutationBatch(f,_)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let f=$e();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(f=f.add(h.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function CT(n){const e=Fe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function LP(n,e){const t=Fe(n),r=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const h=[];e.targetChanges.forEach(((v,_)=>{const E=o.get(_);if(!E)return;h.push(t.Pi.removeMatchingKeys(a,v.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(a,v.addedDocuments,_))));let S=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(_)!==null?S=S.withResumeToken($t.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):v.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(v.resumeToken,r)),o=o.insert(_,S),(function(x,C,U){return x.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=NP?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(E,S,v)&&h.push(t.Pi.updateTargetData(a,S))}));let f=yi(),m=$e();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))})),h.push(VP(a,c,e.documentUpdates).next((v=>{f=v.ks,m=v.qs}))),!r.isEqual(Le.min())){const v=t.Pi.getLastRemoteSnapshotVersion(a).next((_=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));h.push(v)}return ee.waitFor(h).next((()=>c.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,m))).next((()=>f))})).then((a=>(t.Ms=o,a)))}function VP(n,e,t){let r=$e(),o=$e();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let c=yi();return t.forEach(((h,f)=>{const m=a.get(h);f.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(h)),f.isNoDocument()&&f.version.isEqual(Le.min())?(e.removeEntry(h,f.readTime),c=c.insert(h,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),c=c.insert(h,f)):he(Xm,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",f.version)})),{ks:c,qs:o}}))}function FP(n,e){const t=Fe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Fm),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function jP(n,e){const t=Fe(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.Pi.getTargetData(r,e).next((a=>a?(o=a,ee.resolve(o)):t.Pi.allocateTargetId(r).next((c=>(o=new os(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function em(n,e,t){const r=Fe(n),o=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Fa(c))throw c;he(Xm,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function u_(n,e,t){const r=Fe(n);let o=Le.min(),a=$e();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(f,m,v){const _=Fe(f),E=_.xs.get(v);return E!==void 0?ee.resolve(_.Ms.get(E)):_.Pi.getTargetData(m,v)})(r,c,Dr(e)).next((h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,h.targetId).next((f=>{a=f}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?o:Le.min(),t?a:$e()))).next((h=>(UP(r,xR(e),h),{documents:h,Qs:a})))))}function UP(n,e,t){let r=n.Os.get(e)||Le.min();t.forEach(((o,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(e,r)}class d_{constructor(){this.activeTargetIds=PR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zP{constructor(){this.Mo=new d_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new d_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="ConnectivityMonitor";class f_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(h_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(h_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qu=null;function tm(){return qu===null?qu=(function(){return 268435456+Math.round(2147483648*Math.random())})():qu++,"0x"+qu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="RestConnection",$P={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class WP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===_d?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,t,r,o,a){const c=tm(),h=this.zo(e,t.toUriEncodedString());he(wp,`Sending RPC '${e}' ${c}:`,h,r);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,o,a);const{host:m}=new URL(h),v=Ma(m);return this.Jo(e,h,f,r,v).then((_=>(he(wp,`Received RPC '${e}' ${c}: `,_),_)),(_=>{throw Sa(wp,`RPC '${e}' ${c} failed with error: `,_,"url: ",h,"request:",r),_}))}Ho(e,t,r,o,a,c){return this.Go(e,t,r,o,a)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+La})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),r&&r.headers.forEach(((o,a)=>e[a]=o))}zo(e,t){const r=$P[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class qP extends WP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,o,a){const c=tm();return new Promise(((h,f)=>{const m=new PE;m.setWithCredentials(!0),m.listenOnce(NE.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case nd.NO_ERROR:const _=m.getResponseJson();he(Xt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(_)),h(_);break;case nd.TIMEOUT:he(Xt,`RPC '${e}' ${c} timed out`),f(new ue(X.DEADLINE_EXCEEDED,"Request time out"));break;case nd.HTTP_ERROR:const E=m.getStatus();if(he(Xt,`RPC '${e}' ${c} failed with status:`,E,"response text:",m.getResponseText()),E>0){let S=m.getResponseJson();Array.isArray(S)&&(S=S[0]);const M=S?.error;if(M&&M.status&&M.message){const x=(function(U){const B=U.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(B)>=0?B:X.UNKNOWN})(M.status);f(new ue(x,M.message))}else f(new ue(X.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new ue(X.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{he(Xt,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(o);he(Xt,`RPC '${e}' ${c} sending request:`,o),m.send(t,"POST",v,r,15)}))}T_(e,t,r){const o=tm(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=OE(),h=ME(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const v=a.join("");he(Xt,`Creating RPC '${e}' stream ${o}: ${v}`,f);const _=c.createWebChannel(v,f);this.I_(_);let E=!1,S=!1;const M=new HP({Yo:C=>{S?he(Xt,`Not sending because RPC '${e}' stream ${o} is closed:`,C):(E||(he(Xt,`Opening RPC '${e}' stream ${o} transport.`),_.open(),E=!0),he(Xt,`RPC '${e}' stream ${o} sending:`,C),_.send(C))},Zo:()=>_.close()}),x=(C,U,B)=>{C.listen(U,(G=>{try{B(G)}catch(Y){setTimeout((()=>{throw Y}),0)}}))};return x(_,Hl.EventType.OPEN,(()=>{S||(he(Xt,`RPC '${e}' stream ${o} transport opened.`),M.o_())})),x(_,Hl.EventType.CLOSE,(()=>{S||(S=!0,he(Xt,`RPC '${e}' stream ${o} transport closed`),M.a_(),this.E_(_))})),x(_,Hl.EventType.ERROR,(C=>{S||(S=!0,Sa(Xt,`RPC '${e}' stream ${o} transport errored. Name:`,C.name,"Message:",C.message),M.a_(new ue(X.UNAVAILABLE,"The operation could not be completed")))})),x(_,Hl.EventType.MESSAGE,(C=>{if(!S){const U=C.data[0];Xe(!!U,16349);const B=U,G=B?.error||B[0]?.error;if(G){he(Xt,`RPC '${e}' stream ${o} received error:`,G);const Y=G.status;let Z=(function(A){const N=It[A];if(N!==void 0)return mT(N)})(Y),oe=G.message;Z===void 0&&(Z=X.INTERNAL,oe="Unknown error status: "+Y+" with message "+G.message),S=!0,M.a_(new ue(Z,oe)),_.close()}else he(Xt,`RPC '${e}' stream ${o} received:`,U),M.u_(U)}})),x(h,DE.STAT_EVENT,(C=>{C.stat===$p.PROXY?he(Xt,`RPC '${e}' stream ${o} detected buffering proxy`):C.stat===$p.NOPROXY&&he(Xt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{M.__()}),0),M}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function _p(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(n){return new YR(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,t,r=1e3,o=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=o,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-r);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="PersistentStream";class RT{constructor(e,t,r,o,a,c,h,f){this.Mi=e,this.S_=r,this.b_=o,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(gi(t.toString()),gi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===t&&this.G_(r,o)}),(r=>{e((()=>{const o=new ue(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(p_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(he(p_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class GP extends RT{constructor(e,t,r,o,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=ZR(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Le.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Le.min():c.readTime?Mr(c.readTime):Le.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Zp(this.serializer),t.addTarget=(function(a,c){let h;const f=c.target;if(h=Kp(f)?{documents:nP(a,f)}:{query:rP(a,f).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=vT(a,c.resumeToken);const m=Yp(a,c.expectedCount);m!==null&&(h.expectedCount=m)}else if(c.snapshotVersion.compareTo(Le.min())>0){h.readTime=xd(a,c.snapshotVersion.toTimestamp());const m=Yp(a,c.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const r=sP(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Zp(this.serializer),t.removeTarget=e,this.q_(t)}}class KP extends RT{constructor(e,t,r,o,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=tP(e.writeResults,e.commitTime),r=Mr(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Zp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>eP(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{}class YP extends QP{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ue(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,c])=>this.connection.Go(e,Xp(t,r),o,a,c))).catch((a=>{throw a.name==="FirebaseError"?(a.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ue(X.UNKNOWN,a.toString())}))}Ho(e,t,r,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Ho(e,Xp(t,r),o,c,h,a))).catch((c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ue(X.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class XP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(gi(t),this.aa=!1):he("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co="RemoteStore";class JP{constructor(e,t,r,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{wo(this)&&(he(co,"Restarting streams for network reachability change."),await(async function(f){const m=Fe(f);m.Ea.add(4),await wc(m),m.Ra.set("Unknown"),m.Ea.delete(4),await ah(m)})(this))}))})),this.Ra=new XP(r,o)}}async function ah(n){if(wo(n))for(const e of n.da)await e(!0)}async function wc(n){for(const e of n.da)await e(!1)}function PT(n,e){const t=Fe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),tg(t)?eg(t):ja(t).O_()&&Zm(t,e))}function Jm(n,e){const t=Fe(n),r=ja(t);t.Ia.delete(e),r.O_()&&NT(t,e),t.Ia.size===0&&(r.O_()?r.L_():wo(t)&&t.Ra.set("Unknown"))}function Zm(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ja(n).Y_(e)}function NT(n,e){n.Va.Ue(e),ja(n).Z_(e)}function eg(n){n.Va=new qR({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ja(n).start(),n.Ra.ua()}function tg(n){return wo(n)&&!ja(n).x_()&&n.Ia.size>0}function wo(n){return Fe(n).Ea.size===0}function DT(n){n.Va=void 0}async function ZP(n){n.Ra.set("Online")}async function eN(n){n.Ia.forEach(((e,t)=>{Zm(n,e)}))}async function tN(n,e){DT(n),tg(n)?(n.Ra.ha(e),eg(n)):n.Ra.set("Unknown")}async function nN(n,e,t){if(n.Ra.set("Online"),e instanceof yT&&e.state===2&&e.cause)try{await(async function(o,a){const c=a.cause;for(const h of a.targetIds)o.Ia.has(h)&&(await o.remoteSyncer.rejectListen(h,c),o.Ia.delete(h),o.Va.removeTarget(h))})(n,e)}catch(r){he(co,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await kd(n,r)}else if(e instanceof od?n.Va.Ze(e):e instanceof gT?n.Va.st(e):n.Va.tt(e),!t.isEqual(Le.min()))try{const r=await CT(n.localStore);t.compareTo(r)>=0&&await(function(a,c){const h=a.Va.Tt(c);return h.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=a.Ia.get(m);v&&a.Ia.set(m,v.withResumeToken(f.resumeToken,c))}})),h.targetMismatches.forEach(((f,m)=>{const v=a.Ia.get(f);if(!v)return;a.Ia.set(f,v.withResumeToken($t.EMPTY_BYTE_STRING,v.snapshotVersion)),NT(a,f);const _=new os(v.target,f,m,v.sequenceNumber);Zm(a,_)})),a.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(r){he(co,"Failed to raise snapshot:",r),await kd(n,r)}}async function kd(n,e,t){if(!Fa(e))throw e;n.Ea.add(1),await wc(n),n.Ra.set("Offline"),t||(t=()=>CT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{he(co,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ah(n)}))}function MT(n,e){return e().catch((t=>kd(n,t,e)))}async function lh(n){const e=Fe(n),t=gs(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Fm;for(;rN(e);)try{const o=await FP(e.localStore,r);if(o===null){e.Ta.length===0&&t.L_();break}r=o.batchId,iN(e,o)}catch(o){await kd(e,o)}OT(e)&&LT(e)}function rN(n){return wo(n)&&n.Ta.length<10}function iN(n,e){n.Ta.push(e);const t=gs(n);t.O_()&&t.X_&&t.ea(e.mutations)}function OT(n){return wo(n)&&!gs(n).x_()&&n.Ta.length>0}function LT(n){gs(n).start()}async function sN(n){gs(n).ra()}async function oN(n){const e=gs(n);for(const t of n.Ta)e.ea(t.mutations)}async function aN(n,e,t){const r=n.Ta.shift(),o=Hm.from(r,e,t);await MT(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await lh(n)}async function lN(n,e){e&&gs(n).X_&&await(async function(r,o){if((function(c){return $R(c)&&c!==X.ABORTED})(o.code)){const a=r.Ta.shift();gs(r).B_(),await MT(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,o))),await lh(r)}})(n,e),OT(n)&&LT(n)}async function m_(n,e){const t=Fe(n);t.asyncQueue.verifyOperationInProgress(),he(co,"RemoteStore received new credentials");const r=wo(t);t.Ea.add(3),await wc(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ah(t)}async function cN(n,e){const t=Fe(n);e?(t.Ea.delete(2),await ah(t)):e||(t.Ea.add(2),await wc(t),t.Ra.set("Unknown"))}function ja(n){return n.ma||(n.ma=(function(t,r,o){const a=Fe(t);return a.sa(),new GP(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:ZP.bind(null,n),t_:eN.bind(null,n),r_:tN.bind(null,n),H_:nN.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),tg(n)?eg(n):n.Ra.set("Unknown")):(await n.ma.stop(),DT(n))}))),n.ma}function gs(n){return n.fa||(n.fa=(function(t,r,o){const a=Fe(t);return a.sa(),new KP(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:sN.bind(null,n),r_:lN.bind(null,n),ta:oN.bind(null,n),na:aN.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await lh(n)):(await n.fa.stop(),n.Ta.length>0&&(he(co,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,t,r,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=a,this.deferred=new pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,a){const c=Date.now()+r,h=new ng(e,t,c,o,a);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rg(n,e){if(gi("AsyncQueue",`${e}: ${n}`),Fa(n))return new ue(X.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{static emptySet(e){return new ya(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ae.comparator(t.key,r.key):(t,r)=>Ae.comparator(t.key,r.key),this.keyedMap=ql(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ya)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ya;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(){this.ga=new ut(Ae.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Re(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Pa{constructor(e,t,r,o,a,c,h,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,o,a){const c=[];return t.forEach((h=>{c.push({type:0,doc:h})})),new Pa(e,t,ya.emptySet(t),c,r,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&th(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class dN{constructor(){this.queries=y_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=Fe(t),a=o.queries;o.queries=y_(),a.forEach(((c,h)=>{for(const f of h.Sa)f.onError(r)}))})(this,new ue(X.ABORTED,"Firestore shutting down"))}}function y_(){return new vo((n=>nT(n)),th)}async function ig(n,e){const t=Fe(n);let r=3;const o=e.query;let a=t.queries.get(o);a?!a.ba()&&e.Da()&&(r=2):(a=new uN,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(o,!0);break;case 1:a.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const h=rg(c,`Initialization of query '${fa(e.query)}' failed`);return void e.onError(h)}t.queries.set(o,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&og(t)}async function sg(n,e){const t=Fe(n),r=e.query;let o=3;const a=t.queries.get(r);if(a){const c=a.Sa.indexOf(e);c>=0&&(a.Sa.splice(c,1),a.Sa.length===0?o=e.Da()?0:1:!a.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function hN(n,e){const t=Fe(n);let r=!1;for(const o of e){const a=o.query,c=t.queries.get(a);if(c){for(const h of c.Sa)h.Fa(o)&&(r=!0);c.wa=o}}r&&og(t)}function fN(n,e,t){const r=Fe(n),o=r.queries.get(e);if(o)for(const a of o.Sa)a.onError(t);r.queries.delete(e)}function og(n){n.Ca.forEach((e=>{e.next()}))}var nm,v_;(v_=nm||(nm={})).Ma="default",v_.Cache="cache";class ag{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Pa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==nm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e){this.key=e}}class FT{constructor(e){this.key=e}}class pN{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=$e(),this.mutatedKeys=$e(),this.eu=rT(e),this.tu=new ya(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new g_,o=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,c=o,h=!1;const f=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,_)=>{const E=o.get(v),S=nh(this.query,_)?_:null,M=!!E&&this.mutatedKeys.has(E.key),x=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let C=!1;E&&S?E.data.isEqual(S.data)?M!==x&&(r.track({type:3,doc:S}),C=!0):this.su(E,S)||(r.track({type:2,doc:S}),C=!0,(f&&this.eu(S,f)>0||m&&this.eu(S,m)<0)&&(h=!0)):!E&&S?(r.track({type:0,doc:S}),C=!0):E&&!S&&(r.track({type:1,doc:E}),C=!0,(f||m)&&(h=!0)),C&&(S?(c=c.add(S),a=x?a.add(v):a.delete(v)):(c=c.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),a=a.delete(v.key),r.track({type:1,doc:v})}return{tu:c,iu:r,Cs:h,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,_)=>(function(S,M){const x=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{Rt:C})}};return x(S)-x(M)})(v.type,_.type)||this.eu(v.doc,_.doc))),this.ou(r),o=o??!1;const h=t&&!o?this._u():[],f=this.Xa.size===0&&this.current&&!o?1:0,m=f!==this.Za;return this.Za=f,c.length!==0||m?{snapshot:new Pa(this.query,e.tu,a,c,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new g_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=$e(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new FT(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new VT(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=$e();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Pa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const lg="SyncEngine";class mN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class gN{constructor(e){this.key=e,this.hu=!1}}class yN{constructor(e,t,r,o,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new vo((h=>nT(h)),th),this.Iu=new Map,this.Eu=new Set,this.du=new ut(Ae.comparator),this.Au=new Map,this.Ru=new Km,this.Vu={},this.mu=new Map,this.fu=Ra.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function vN(n,e,t=!0){const r=WT(n);let o;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.lu()):o=await jT(r,e,t,!0),o}async function wN(n,e){const t=WT(n);await jT(t,e,!0,!1)}async function jT(n,e,t,r){const o=await jP(n.localStore,Dr(e)),a=o.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let h;return r&&(h=await _N(n,e,a,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&PT(n.remoteStore,o),h}async function _N(n,e,t,r,o){n.pu=(_,E,S)=>(async function(x,C,U,B){let G=C.view.ru(U);G.Cs&&(G=await u_(x.localStore,C.query,!1).then((({documents:b})=>C.view.ru(b,G))));const Y=B&&B.targetChanges.get(C.targetId),Z=B&&B.targetMismatches.get(C.targetId)!=null,oe=C.view.applyChanges(G,x.isPrimaryClient,Y,Z);return __(x,C.targetId,oe.au),oe.snapshot})(n,_,E,S);const a=await u_(n.localStore,e,!0),c=new pN(e,a.Qs),h=c.ru(a.documents),f=vc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",o),m=c.applyChanges(h,n.isPrimaryClient,f);__(n,t,m.au);const v=new mN(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function EN(n,e,t){const r=Fe(n),o=r.Tu.get(e),a=r.Iu.get(o.targetId);if(a.length>1)return r.Iu.set(o.targetId,a.filter((c=>!th(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await em(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&Jm(r.remoteStore,o.targetId),rm(r,o.targetId)})).catch(Va)):(rm(r,o.targetId),await em(r.localStore,o.targetId,!0))}async function TN(n,e){const t=Fe(n),r=t.Tu.get(e),o=t.Iu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Jm(t.remoteStore,r.targetId))}async function IN(n,e,t){const r=RN(n);try{const o=await(function(c,h){const f=Fe(c),m=st.now(),v=h.reduce(((S,M)=>S.add(M.key)),$e());let _,E;return f.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let M=yi(),x=$e();return f.Ns.getEntries(S,v).next((C=>{M=C,M.forEach(((U,B)=>{B.isValidDocument()||(x=x.add(U))}))})).next((()=>f.localDocuments.getOverlayedDocuments(S,M))).next((C=>{_=C;const U=[];for(const B of h){const G=FR(B,_.get(B.key).overlayedDocument);G!=null&&U.push(new Is(B.key,G,KE(G.value.mapValue),nr.exists(!0)))}return f.mutationQueue.addMutationBatch(S,m,U,h)})).next((C=>{E=C;const U=C.applyToLocalDocumentSet(_,x);return f.documentOverlayCache.saveOverlays(S,C.batchId,U)}))})).then((()=>({batchId:E.batchId,changes:sT(_)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(c,h,f){let m=c.Vu[c.currentUser.toKey()];m||(m=new ut(Be)),m=m.insert(h,f),c.Vu[c.currentUser.toKey()]=m})(r,o.batchId,t),await _c(r,o.changes),await lh(r.remoteStore)}catch(o){const a=rg(o,"Failed to persist write");t.reject(a)}}async function UT(n,e){const t=Fe(n);try{const r=await LP(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const c=t.Au.get(a);c&&(Xe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?Xe(c.hu,14607):o.removedDocuments.size>0&&(Xe(c.hu,42227),c.hu=!1))})),await _c(t,r,e)}catch(r){await Va(r)}}function w_(n,e,t){const r=Fe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Tu.forEach(((a,c)=>{const h=c.view.va(e);h.snapshot&&o.push(h.snapshot)})),(function(c,h){const f=Fe(c);f.onlineState=h;let m=!1;f.queries.forEach(((v,_)=>{for(const E of _.Sa)E.va(h)&&(m=!0)})),m&&og(f)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function SN(n,e,t){const r=Fe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Au.get(e),a=o&&o.key;if(a){let c=new ut(Ae.comparator);c=c.insert(a,Zt.newNoDocument(a,Le.min()));const h=$e().add(a),f=new sh(Le.min(),new Map,new ut(Be),c,h);await UT(r,f),r.du=r.du.remove(a),r.Au.delete(e),cg(r)}else await em(r.localStore,e,!1).then((()=>rm(r,e,t))).catch(Va)}async function xN(n,e){const t=Fe(n),r=e.batch.batchId;try{const o=await OP(t.localStore,e);BT(t,r,null),zT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await _c(t,o)}catch(o){await Va(o)}}async function AN(n,e,t){const r=Fe(n);try{const o=await(function(c,h){const f=Fe(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return f.mutationQueue.lookupMutationBatch(m,h).next((_=>(Xe(_!==null,37113),v=_.keys(),f.mutationQueue.removeMutationBatch(m,_)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,h))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>f.localDocuments.getDocuments(m,v)))}))})(r.localStore,e);BT(r,e,t),zT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await _c(r,o)}catch(o){await Va(o)}}function zT(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function BT(n,e,t){const r=Fe(n);let o=r.Vu[r.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function rm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||$T(n,r)}))}function $T(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Jm(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),cg(n))}function __(n,e,t){for(const r of t)r instanceof VT?(n.Ru.addReference(r.key,e),kN(n,r)):r instanceof FT?(he(lg,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||$T(n,r.key)):Re(19791,{wu:r})}function kN(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(he(lg,"New document in limbo: "+t),n.Eu.add(r),cg(n))}function cg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ae(et.fromString(e)),r=n.fu.next();n.Au.set(r,new gN(t)),n.du=n.du.insert(t,r),PT(n.remoteStore,new os(Dr(eh(t.path)),r,"TargetPurposeLimboResolution",Xd.ce))}}async function _c(n,e,t){const r=Fe(n),o=[],a=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((h,f)=>{c.push(r.pu(f,e,t).then((m=>{if((m||t)&&r.isPrimaryClient){const v=m?!m.fromCache:t?.targetChanges.get(f.targetId)?.current;r.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(m){o.push(m);const v=Ym.As(f.targetId,m);a.push(v)}})))})),await Promise.all(c),r.Pu.H_(o),await(async function(f,m){const v=Fe(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>ee.forEach(m,(E=>ee.forEach(E.Es,(S=>v.persistence.referenceDelegate.addReference(_,E.targetId,S))).next((()=>ee.forEach(E.ds,(S=>v.persistence.referenceDelegate.removeReference(_,E.targetId,S)))))))))}catch(_){if(!Fa(_))throw _;he(Xm,"Failed to update sequence numbers: "+_)}for(const _ of m){const E=_.targetId;if(!_.fromCache){const S=v.Ms.get(E),M=S.snapshotVersion,x=S.withLastLimboFreeSnapshotVersion(M);v.Ms=v.Ms.insert(E,x)}}})(r.localStore,a))}async function CN(n,e){const t=Fe(n);if(!t.currentUser.isEqual(e)){he(lg,"User change. New user:",e.toKey());const r=await kT(t.localStore,e);t.currentUser=e,(function(a,c){a.mu.forEach((h=>{h.forEach((f=>{f.reject(new ue(X.CANCELLED,c))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await _c(t,r.Ls)}}function bN(n,e){const t=Fe(n),r=t.Au.get(e);if(r&&r.hu)return $e().add(r.key);{let o=$e();const a=t.Iu.get(e);if(!a)return o;for(const c of a){const h=t.Tu.get(c);o=o.unionWith(h.view.nu)}return o}}function WT(n){const e=Fe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=UT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SN.bind(null,e),e.Pu.H_=hN.bind(null,e.eventManager),e.Pu.yu=fN.bind(null,e.eventManager),e}function RN(n){const e=Fe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AN.bind(null,e),e}class Cd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=oh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return MP(this.persistence,new PP,e.initialUser,this.serializer)}Cu(e){return new AT(Qm.mi,this.serializer)}Du(e){return new zP}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cd.provider={build:()=>new Cd};class PN extends Cd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Xe(this.persistence.referenceDelegate instanceof Ad,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new gP(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new AT((r=>Ad.mi(r,t)),this.serializer)}}class im{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>w_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=CN.bind(null,this.syncEngine),await cN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new dN})()}createDatastore(e){const t=oh(e.databaseInfo.databaseId),r=(function(a){return new qP(a)})(e.databaseInfo);return(function(a,c,h,f){return new YP(a,c,h,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,a,c,h){return new JP(r,o,a,c,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>w_(this.syncEngine,t,0)),(function(){return f_.v()?new f_:new BP})())}createSyncEngine(e,t){return(function(o,a,c,h,f,m,v){const _=new yN(o,a,c,h,f,m);return v&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Fe(t);he(co,"RemoteStore shutting down."),r.Ea.add(5),await wc(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}im.provider={build:()=>new im};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):gi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="FirestoreClient";class NN{constructor(e,t,r,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Jt.UNAUTHENTICATED,this.clientId=Lm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async c=>{he(ys,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(he(ys,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=rg(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Ep(n,e){n.asyncQueue.verifyOperationInProgress(),he(ys,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async o=>{r.isEqual(o)||(await kT(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function E_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await DN(n);he(ys,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>m_(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,o)=>m_(e.remoteStore,o))),n._onlineComponents=e}async function DN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(ys,"Using user provided OfflineComponentProvider");try{await Ep(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===X.FAILED_PRECONDITION||o.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Sa("Error using user provided cache. Falling back to memory cache: "+t),await Ep(n,new Cd)}}else he(ys,"Using default OfflineComponentProvider"),await Ep(n,new PN(void 0));return n._offlineComponents}async function HT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(ys,"Using user provided OnlineComponentProvider"),await E_(n,n._uninitializedComponentsProvider._online)):(he(ys,"Using default OnlineComponentProvider"),await E_(n,new im))),n._onlineComponents}function MN(n){return HT(n).then((e=>e.syncEngine))}async function bd(n){const e=await HT(n),t=e.eventManager;return t.onListen=vN.bind(null,e.syncEngine),t.onUnlisten=EN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=wN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=TN.bind(null,e.syncEngine),t}function ON(n,e,t={}){const r=new pi;return n.asyncQueue.enqueueAndForget((async()=>(function(a,c,h,f,m){const v=new ug({next:E=>{v.Nu(),c.enqueueAndForget((()=>sg(a,_)));const S=E.docs.has(h);!S&&E.fromCache?m.reject(new ue(X.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&E.fromCache&&f&&f.source==="server"?m.reject(new ue(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(E)},error:E=>m.reject(E)}),_=new ag(eh(h.path),v,{includeMetadataChanges:!0,qa:!0});return ig(a,_)})(await bd(n),n.asyncQueue,e,t,r))),r.promise}function LN(n,e,t={}){const r=new pi;return n.asyncQueue.enqueueAndForget((async()=>(function(a,c,h,f,m){const v=new ug({next:E=>{v.Nu(),c.enqueueAndForget((()=>sg(a,_))),E.fromCache&&f.source==="server"?m.reject(new ue(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(E)},error:E=>m.reject(E)}),_=new ag(h,v,{includeMetadataChanges:!0,qa:!0});return ig(a,_)})(await bd(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="firestore.googleapis.com",I_=!0;class S_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=GT,this.ssl=I_}else this.host=e.host,this.ssl=e.ssl??I_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pP)throw new ue(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Xb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ue(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ue(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ue(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ec{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new S_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new S_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new zb;switch(r.type){case"firstParty":return new Hb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ue(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=T_.get(t);r&&(he("ComponentProvider","Removing Datastore"),T_.delete(t),r.terminate())})(this),Promise.resolve()}}function VN(n,e,t,r={}){n=mn(n,Ec);const o=Ma(e),a=n._getSettings(),c={...a,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;o&&(eE(`https://${h}`),tE("Firestore",!0)),a.host!==GT&&a.host!==h&&Sa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...a,host:h,ssl:o,emulatorOptions:r};if(!jr(f,c)&&(n._setSettings(f),r.mockUserToken)){let m,v;if(typeof r.mockUserToken=="string")m=r.mockUserToken,v=Jt.MOCK_USER;else{m=$A(r.mockUserToken,n._app?.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new ue(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Jt(_)}n._authCredentials=new Bb(new VE(m,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $r(this.firestore,e,this._query)}}class ft{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new us(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ft(this.firestore,e,this._key)}toJSON(){return{type:ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(gc(t,ft._jsonSchema))return new ft(e,r||null,new Ae(et.fromString(t.referencePath)))}}ft._jsonSchemaVersion="firestore/documentReference/1.0",ft._jsonSchema={type:At("string",ft._jsonSchemaVersion),referencePath:At("string")};class us extends $r{constructor(e,t,r){super(e,t,eh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ft(this.firestore,null,new Ae(e))}withConverter(e){return new us(this.firestore,e,this._path)}}function ch(n,e,...t){if(n=kt(n),Vm("collection","path",e),n instanceof Ec){const r=et.fromString(e,...t);return Vw(r),new us(n,null,r)}{if(!(n instanceof ft||n instanceof us))throw new ue(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(et.fromString(e,...t));return Vw(r),new us(n.firestore,null,r)}}function KT(n,e){if(n=mn(n,Ec),Vm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ue(X.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new $r(n,null,(function(r){return new yo(et.emptyPath(),r)})(e))}function _o(n,e,...t){if(n=kt(n),arguments.length===1&&(e=Lm.newId()),Vm("doc","path",e),n instanceof Ec){const r=et.fromString(e,...t);return Lw(r),new ft(n,null,new Ae(r))}{if(!(n instanceof ft||n instanceof us))throw new ue(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(et.fromString(e,...t));return Lw(r),new ft(n.firestore,n instanceof us?n.converter:null,new Ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="AsyncQueue";class A_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bT(this,"async_queue_retry"),this._c=()=>{const r=_p();r&&he(x_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=_p();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=_p();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new pi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Fa(e))throw e;he(x_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,gi("INTERNAL UNHANDLED ERROR: ",k_(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=ng.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(o),o}uc(){this.nc&&Re(47125,{Pc:k_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function k_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const a of r)if(a in o&&typeof o[a]=="function")return!0;return!1})(n,["next","error","complete"])}class vs extends Ec{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new A_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new A_(e),this._firestoreClient=void 0,await e}}}function FN(n,e){const t=typeof n=="object"?n:Gd(),r=typeof n=="string"?n:_d,o=go(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const a=zA("firestore");a&&VN(o,...a)}return o}function uh(n){if(n._terminated)throw new ue(X.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||jN(n),n._firestoreClient}function jN(n){const e=n._freezeSettings(),t=(function(o,a,c,h){return new cR(o,a,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,qT(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new NN(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(o){const a=o?._online.build();return{_offline:o?._offline.build(a),_online:a}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fn($t.fromBase64String(e))}catch(t){throw new ue(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fn($t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(gc(e,Fn._jsonSchema))return Fn.fromBase64String(e.bytes)}}Fn._jsonSchemaVersion="firestore/bytes/1.0",Fn._jsonSchema={type:At("string",Fn._jsonSchemaVersion),bytes:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ue(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ue(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ue(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Or._jsonSchemaVersion}}static fromJSON(e){if(gc(e,Or._jsonSchema))return new Or(e.latitude,e.longitude)}}Or._jsonSchemaVersion="firestore/geoPoint/1.0",Or._jsonSchema={type:At("string",Or._jsonSchemaVersion),latitude:At("number"),longitude:At("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Lr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(gc(e,Lr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Lr(e.vectorValues);throw new ue(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Lr._jsonSchemaVersion="firestore/vectorValue/1.0",Lr._jsonSchema={type:At("string",Lr._jsonSchemaVersion),vectorValues:At("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=/^__.*__$/;class zN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Is(e,this.data,this.fieldMask,t,this.fieldTransforms):new yc(e,this.data,t,this.fieldTransforms)}}class QT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Is(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function YT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{Ac:n})}}class hh{constructor(e,t,r,o,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new hh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Rd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(YT(this.Ac)&&UN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class BN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||oh(e)}Cc(e,t,r,o=!1){return new hh({Ac:e,methodName:t,Dc:r,path:zt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fh(n){const e=n._freezeSettings(),t=oh(n._databaseId);return new BN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function XT(n,e,t,r,o,a={}){const c=n.Cc(a.merge||a.mergeFields?2:0,e,t,o);pg("Data must be an object, but it was:",c,r);const h=ZT(r,c);let f,m;if(a.merge)f=new An(c.fieldMask),m=c.fieldTransforms;else if(a.mergeFields){const v=[];for(const _ of a.mergeFields){const E=sm(e,_,t);if(!c.contains(E))throw new ue(X.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);tI(v,E)||v.push(E)}f=new An(v),m=c.fieldTransforms.filter((_=>f.covers(_.field)))}else f=null,m=c.fieldTransforms;return new zN(new pn(h),f,m)}class ph extends Ua{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ph}}function JT(n,e,t){return new hh({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class dg extends Ua{_toFieldTransform(e){return new Wm(e.path,new cc)}isEqual(e){return e instanceof dg}}class hg extends Ua{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=JT(this,e,!0),r=this.vc.map((a=>Eo(a,t))),o=new Ca(r);return new Wm(e.path,o)}isEqual(e){return e instanceof hg&&jr(this.vc,e.vc)}}class fg extends Ua{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=JT(this,e,!0),r=this.vc.map((a=>Eo(a,t))),o=new ba(r);return new Wm(e.path,o)}isEqual(e){return e instanceof fg&&jr(this.vc,e.vc)}}function $N(n,e,t,r){const o=n.Cc(1,e,t);pg("Data must be an object, but it was:",o,r);const a=[],c=pn.empty();Ts(r,((f,m)=>{const v=mg(e,f,t);m=kt(m);const _=o.yc(v);if(m instanceof ph)a.push(v);else{const E=Eo(m,_);E!=null&&(a.push(v),c.set(v,E))}}));const h=new An(a);return new QT(c,h,o.fieldTransforms)}function WN(n,e,t,r,o,a){const c=n.Cc(1,e,t),h=[sm(e,r,t)],f=[o];if(a.length%2!=0)throw new ue(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<a.length;E+=2)h.push(sm(e,a[E])),f.push(a[E+1]);const m=[],v=pn.empty();for(let E=h.length-1;E>=0;--E)if(!tI(m,h[E])){const S=h[E];let M=f[E];M=kt(M);const x=c.yc(S);if(M instanceof ph)m.push(S);else{const C=Eo(M,x);C!=null&&(m.push(S),v.set(S,C))}}const _=new An(m);return new QT(v,_,c.fieldTransforms)}function HN(n,e,t,r=!1){return Eo(t,n.Cc(r?4:3,e))}function Eo(n,e){if(eI(n=kt(n)))return pg("Unsupported field value:",e,n),ZT(n,e);if(n instanceof Ua)return(function(r,o){if(!YT(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const a=[];let c=0;for(const h of r){let f=Eo(h,o.wc(c));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),c++}return{arrayValue:{values:a}}})(n,e)}return(function(r,o){if((r=kt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return NR(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=st.fromDate(r);return{timestampValue:xd(o.serializer,a)}}if(r instanceof st){const a=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xd(o.serializer,a)}}if(r instanceof Or)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fn)return{bytesValue:vT(o.serializer,r._byteString)};if(r instanceof ft){const a=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Gm(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Lr)return(function(c,h){return{mapValue:{fields:{[qE]:{stringValue:GE},[Ed]:{arrayValue:{values:c.toArray().map((m=>{if(typeof m!="number")throw h.Sc("VectorValues must only contain numeric values.");return $m(h.serializer,m)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Yd(r)}`)})(n,e)}function ZT(n,e){const t={};return UE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ts(n,((r,o)=>{const a=Eo(o,e.mc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function eI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof st||n instanceof Or||n instanceof Fn||n instanceof ft||n instanceof Ua||n instanceof Lr)}function pg(n,e,t){if(!eI(t)||!FE(t)){const r=Yd(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function sm(n,e,t){if((e=kt(e))instanceof dh)return e._internalPath;if(typeof e=="string")return mg(n,e);throw Rd("Field path arguments must be of type string or ",n,!1,void 0,t)}const qN=new RegExp("[~\\*/\\[\\]]");function mg(n,e,t){if(e.search(qN)>=0)throw Rd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new dh(...e.split("."))._internalPath}catch{throw Rd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Rd(n,e,t,r,o){const a=r&&!r.isEmpty(),c=o!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||c)&&(f+=" (found",a&&(f+=` in field ${r}`),c&&(f+=` in document ${o}`),f+=")"),new ue(X.INVALID_ARGUMENT,h+n+f)}function tI(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,t,r,o,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new GN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(mh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class GN extends nI{data(){return super.data()}}function mh(n,e){return typeof e=="string"?mg(n,e):e instanceof dh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ue(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gg{}class yg extends gg{}function iI(n,e,...t){let r=[];e instanceof gg&&r.push(e),r=r.concat(t),(function(a){const c=a.filter((f=>f instanceof vg)).length,h=a.filter((f=>f instanceof gh)).length;if(c>1||c>0&&h>0)throw new ue(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)n=o._apply(n);return n}class gh extends yg{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new gh(e,t,r)}_apply(e){const t=this._parse(e);return oI(e._query,t),new $r(e.firestore,e.converter,Qp(e._query,t))}_parse(e){const t=fh(e.firestore);return(function(a,c,h,f,m,v,_){let E;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ue(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){R_(_,v);const M=[];for(const x of _)M.push(b_(f,a,x));E={arrayValue:{values:M}}}else E=b_(f,a,_)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||R_(_,v),E=HN(h,c,_,v==="in"||v==="not-in");return xt.create(m,v,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function KN(n,e,t){const r=e,o=mh("where",n);return gh._create(o,r,t)}class vg extends gg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new vg(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:sr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,a){let c=o;const h=a.getFlattenedFilters();for(const f of h)oI(c,f),c=Qp(c,f)})(e._query,t),new $r(e.firestore,e.converter,Qp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wg extends yg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new wg(e,t)}_apply(e){const t=(function(o,a,c){if(o.startAt!==null)throw new ue(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ue(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lc(a,c)})(e._query,this._field,this._direction);return new $r(e.firestore,e.converter,(function(o,a){const c=o.explicitOrderBy.concat([a]);return new yo(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function sI(n,e="asc"){const t=e,r=mh("orderBy",n);return wg._create(r,t)}class _g extends yg{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new _g(e,t,r)}_apply(e){return new $r(e.firestore,e.converter,Id(e._query,this._limit,this._limitType))}}function QN(n){return Jb("limit",n),_g._create("limit",n,"F")}function b_(n,e,t){if(typeof(t=kt(t))=="string"){if(t==="")throw new ue(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tT(e)&&t.indexOf("/")!==-1)throw new ue(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(et.fromString(t));if(!Ae.isDocumentKey(r))throw new ue(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hw(n,new Ae(r))}if(t instanceof ft)return Hw(n,t._key);throw new ue(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yd(t)}.`)}function R_(n,e){if(!Array.isArray(n)||n.length===0)throw new ue(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function oI(n,e){const t=(function(o,a){for(const c of o)for(const h of c.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ue(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class YN{convertValue(e,t="none"){switch(ms(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ts(e,((o,a)=>{r[o]=this.convertValue(a,t)})),r}convertVectorValue(e){const t=e.fields?.[Ed].arrayValue?.values?.map((r=>vt(r.doubleValue)));return new Lr(t)}convertGeoPoint(e){return new Or(vt(e.latitude),vt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Zd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(sc(e));default:return null}}convertTimestamp(e){const t=fs(e);return new st(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=et.fromString(e);Xe(ST(r),9688,{name:e});const o=new oc(r.get(1),r.get(3)),a=new Ae(r.popFirst(5));return o.isEqual(t)||gi(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Kl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class io extends nI{constructor(e,t,r,o,a,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ad(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(mh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=io._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}io._jsonSchemaVersion="firestore/documentSnapshot/1.0",io._jsonSchema={type:At("string",io._jsonSchemaVersion),bundleSource:At("string","DocumentSnapshot"),bundleName:At("string"),bundle:At("string")};class ad extends io{data(e={}){return super.data(e)}}class so{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Kl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new ad(this._firestore,this._userDataWriter,r.key,r,new Kl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ue(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((h=>{const f=new ad(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Kl(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((h=>a||h.type!==3)).map((h=>{const f=new ad(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Kl(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,v=-1;return h.type!==0&&(m=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),v=c.indexOf(h.doc.key)),{type:XN(h.type),doc:f,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=so._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Lm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function XN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(n){n=mn(n,ft);const e=mn(n.firestore,vs);return ON(uh(e),n._key).then((t=>cI(e,n,t)))}so._jsonSchemaVersion="firestore/querySnapshot/1.0",so._jsonSchema={type:At("string",so._jsonSchemaVersion),bundleSource:At("string","QuerySnapshot"),bundleName:At("string"),bundle:At("string")};class Eg extends YN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,t)}}function vh(n){n=mn(n,$r);const e=mn(n.firestore,vs),t=uh(e),r=new Eg(e);return rI(n._query),LN(t,n._query).then((o=>new so(e,r,n,o)))}function lI(n,e,t){n=mn(n,ft);const r=mn(n.firestore,vs),o=aI(n.converter,e,t);return Tg(r,[XT(fh(r),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,nr.none())])}function om(n,e,t,...r){n=mn(n,ft);const o=mn(n.firestore,vs),a=fh(o);let c;return c=typeof(e=kt(e))=="string"||e instanceof dh?WN(a,"updateDoc",n._key,e,t,r):$N(a,"updateDoc",n._key,e),Tg(o,[c.toMutation(n._key,nr.exists(!0))])}function JN(n,e){const t=mn(n.firestore,vs),r=_o(n),o=aI(n.converter,e);return Tg(t,[XT(fh(n.firestore),"addDoc",r._key,o,n.converter!==null,{}).toMutation(r._key,nr.exists(!1))]).then((()=>r))}function ZN(n,...e){n=kt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||C_(e[r])||(t=e[r++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(C_(e[r])){const f=e[r];e[r]=f.next?.bind(f),e[r+1]=f.error?.bind(f),e[r+2]=f.complete?.bind(f)}let a,c,h;if(n instanceof ft)c=mn(n.firestore,vs),h=eh(n._key.path),a={next:f=>{e[r]&&e[r](cI(c,n,f))},error:e[r+1],complete:e[r+2]};else{const f=mn(n,$r);c=mn(f.firestore,vs),h=f._query;const m=new Eg(c);a={next:v=>{e[r]&&e[r](new so(c,m,f,v))},error:e[r+1],complete:e[r+2]},rI(n._query)}return(function(m,v,_,E){const S=new ug(E),M=new ag(v,S,_);return m.asyncQueue.enqueueAndForget((async()=>ig(await bd(m),M))),()=>{S.Nu(),m.asyncQueue.enqueueAndForget((async()=>sg(await bd(m),M)))}})(uh(c),h,o,a)}function Tg(n,e){return(function(r,o){const a=new pi;return r.asyncQueue.enqueueAndForget((async()=>IN(await MN(r),o,a))),a.promise})(uh(n),e)}function cI(n,e,t){const r=t.docs.get(e._key),o=new Eg(n);return new io(n,o,e._key,r,new Kl(t.hasPendingWrites,t.fromCache),e.converter)}function uI(){return new dg("serverTimestamp")}function e2(...n){return new hg("arrayUnion",n)}function t2(...n){return new fg("arrayRemove",n)}(function(e,t=!0){(function(o){La=o})(Oa),Ur(new ir("firestore",((r,{instanceIdentifier:o,options:a})=>{const c=r.getProvider("app").getImmediate(),h=new vs(new $b(r.getProvider("auth-internal")),new qb(c,r.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ue(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oc(m.options.projectId,v)})(c,o),c);return a={useFetchStreams:t,...a},h._setSettings(a),h}),"PUBLIC").setMultipleInstances(!0)),jn(Nw,Dw,e),jn(Nw,Dw,"esm2020")})();function dI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const n2=dI,hI=new mo("auth","Firebase",dI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd=new qd("@firebase/auth");function r2(n,...e){Pd.logLevel<=ze.WARN&&Pd.warn(`Auth (${Oa}): ${n}`,...e)}function ld(n,...e){Pd.logLevel<=ze.ERROR&&Pd.error(`Auth (${Oa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(n,...e){throw Sg(n,...e)}function rr(n,...e){return Sg(n,...e)}function Ig(n,e,t){const r={...n2(),[e]:t};return new mo("auth","Firebase",r).create(e,{appName:n.name})}function ds(n){return Ig(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function i2(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Un(n,"argument-error"),Ig(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Sg(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return hI.create(n,...e)}function xe(n,e,...t){if(!n)throw Sg(e,...t)}function di(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ld(e),new Error(e)}function vi(n,e){n||di(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(){return typeof self<"u"&&self.location?.href||""}function s2(){return P_()==="http:"||P_()==="https:"}function P_(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(s2()||xm()||"connection"in navigator)?navigator.onLine:!0}function a2(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t){this.shortDelay=e,this.longDelay=t,vi(t>e,"Short delay should be less than long delay!"),this.isMobile=qA()||QA()}get(){return o2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(n,e){vi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;di("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;di("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;di("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],u2=new Tc(3e4,6e4);function Ss(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ti(n,e,t,r,o={}){return pI(n,o,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const h=mc({key:n.config.apiKey,...c}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:f,...a};return KA()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Ma(n.emulatorConfig.host)&&(m.credentials="include"),fI.fetch()(await mI(n,n.config.apiHost,t,h),m)})}async function pI(n,e,t){n._canInitEmulator=!1;const r={...l2,...e};try{const o=new h2(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Gu(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const h=a.ok?c.errorMessage:c.error.message,[f,m]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gu(n,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw Gu(n,"email-already-in-use",c);if(f==="USER_DISABLED")throw Gu(n,"user-disabled",c);const v=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Ig(n,v,m);Un(n,v)}}catch(o){if(o instanceof lr)throw o;Un(n,"network-request-failed",{message:String(o)})}}async function wh(n,e,t,r,o={}){const a=await Ti(n,e,t,r,o);return"mfaPendingCredential"in a&&Un(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function mI(n,e,t,r){const o=`${e}${t}?${r}`,a=n,c=a.config.emulator?xg(n.config,o):`${n.config.apiScheme}://${o}`;return c2.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function d2(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class h2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(rr(this.auth,"network-request-failed")),u2.get())})}}function Gu(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=rr(n,e,r);return o.customData._tokenResponse=t,o}function N_(n){return n!==void 0&&n.enterprise!==void 0}class f2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return d2(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function p2(n,e){return Ti(n,"GET","/v2/recaptchaConfig",Ss(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m2(n,e){return Ti(n,"POST","/v1/accounts:delete",e)}async function Dd(n,e){return Ti(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function g2(n,e=!1){const t=kt(n),r=await t.getIdToken(e),o=Ag(r);xe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,c=a?.sign_in_provider;return{claims:o,token:r,authTime:tc(Tp(o.auth_time)),issuedAtTime:tc(Tp(o.iat)),expirationTime:tc(Tp(o.exp)),signInProvider:c||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Tp(n){return Number(n)*1e3}function Ag(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ld("JWT malformed, contained fewer than 3 sections"),null;try{const o=Y0(t);return o?JSON.parse(o):(ld("Failed to decode base64 JWT payload"),null)}catch(o){return ld("Caught error parsing JWT payload as JSON",o?.toString()),null}}function D_(n){const e=Ag(n);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof lr&&y2(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function y2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=tc(this.lastLoginAt),this.creationTime=tc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Md(n){const e=n.auth,t=await n.getIdToken(),r=await uc(n,Dd(e,{idToken:t}));xe(r?.users.length,e,"internal-error");const o=r.users[0];n._notifyReloadListener(o);const a=o.providerUserInfo?.length?gI(o.providerUserInfo):[],c=_2(n.providerData,a),h=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!c?.length,m=h?f:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new am(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(n,v)}async function w2(n){const e=kt(n);await Md(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _2(n,e){return[...n.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function gI(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E2(n,e){const t=await pI(n,{},async()=>{const r=mc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,c=await mI(n,o,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:r};return n.emulatorConfig&&Ma(n.emulatorConfig.host)&&(f.credentials="include"),fI.fetch()(c,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function T2(n,e){return Ti(n,"POST","/v2/accounts:revokeToken",Ss(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):D_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const t=D_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:a}=await E2(e,t);this.updateTokensAndExpiration(r,o,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:a}=t,c=new va;return r&&(xe(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),o&&(xe(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),a&&(xe(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new va,this.toJSON())}_performRefresh(){return di("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(n,e){xe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class er{constructor({uid:e,auth:t,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new v2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new am(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await uc(this,this.stsTokenManager.getToken(this.auth,e));return xe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return g2(this,e)}reload(){return w2(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new er({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Md(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vn(this.auth.app))return Promise.reject(ds(this.auth));const e=await this.getIdToken();return await uc(this,m2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,o=t.email??void 0,a=t.phoneNumber??void 0,c=t.photoURL??void 0,h=t.tenantId??void 0,f=t._redirectEventId??void 0,m=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:_,emailVerified:E,isAnonymous:S,providerData:M,stsTokenManager:x}=t;xe(_&&x,e,"internal-error");const C=va.fromJSON(this.name,x);xe(typeof _=="string",e,"internal-error"),Zi(r,e.name),Zi(o,e.name),xe(typeof E=="boolean",e,"internal-error"),xe(typeof S=="boolean",e,"internal-error"),Zi(a,e.name),Zi(c,e.name),Zi(h,e.name),Zi(f,e.name),Zi(m,e.name),Zi(v,e.name);const U=new er({uid:_,auth:e,email:o,emailVerified:E,displayName:r,isAnonymous:S,photoURL:c,phoneNumber:a,tenantId:h,stsTokenManager:C,createdAt:m,lastLoginAt:v});return M&&Array.isArray(M)&&(U.providerData=M.map(B=>({...B}))),f&&(U._redirectEventId=f),U}static async _fromIdTokenResponse(e,t,r=!1){const o=new va;o.updateFromServerResponse(t);const a=new er({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Md(a),a}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];xe(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?gI(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!a?.length,h=new va;h.updateFromIdToken(r);const f=new er({uid:o.localId,auth:e,stsTokenManager:h,isAnonymous:c}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new am(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!a?.length};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_=new Map;function hi(n){vi(n instanceof Function,"Expected a class definition");let e=M_.get(n);return e?(vi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,M_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}yI.type="NONE";const O_=yI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(n,e,t){return`firebase:${n}:${e}:${t}`}class wa{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:a}=this.auth;this.fullUserKey=cd(this.userKey,o.apiKey,a),this.fullPersistenceKey=cd("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Dd(this.auth,{idToken:e}).catch(()=>{});return t?er._fromGetAccountInfoResponse(this.auth,t,e):null}return er._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new wa(hi(O_),e,r);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=o[0]||hi(O_);const c=cd(r,e.config.apiKey,e.name);let h=null;for(const m of t)try{const v=await m._get(c);if(v){let _;if(typeof v=="string"){const E=await Dd(e,{idToken:v}).catch(()=>{});if(!E)break;_=await er._fromGetAccountInfoResponse(e,E,v)}else _=er._fromJSON(e,v);m!==a&&(h=_),a=m;break}}catch{}const f=o.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new wa(a,e,r):(a=f[0],h&&await a._set(c,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(c)}catch{}})),new wa(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(EI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(II(e))return"Blackberry";if(SI(e))return"Webos";if(wI(e))return"Safari";if((e.includes("chrome/")||_I(e))&&!e.includes("edge/"))return"Chrome";if(TI(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function vI(n=en()){return/firefox\//i.test(n)}function wI(n=en()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _I(n=en()){return/crios\//i.test(n)}function EI(n=en()){return/iemobile/i.test(n)}function TI(n=en()){return/android/i.test(n)}function II(n=en()){return/blackberry/i.test(n)}function SI(n=en()){return/webos/i.test(n)}function kg(n=en()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function I2(n=en()){return kg(n)&&!!window.navigator?.standalone}function S2(){return YA()&&document.documentMode===10}function xI(n=en()){return kg(n)||TI(n)||SI(n)||II(n)||/windows phone/i.test(n)||EI(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(n,e=[]){let t;switch(n){case"Browser":t=L_(en());break;case"Worker":t=`${L_(en())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Oa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((c,h)=>{try{const f=e(a);c(f)}catch(f){h(f)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A2(n,e={}){return Ti(n,"GET","/v2/passwordPolicy",Ss(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2=6;class C2{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??k2,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new V_(this),this.idTokenSubscription=new V_(this),this.beforeStateQueue=new x2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=hi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await wa.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Dd(this,{idToken:e}),r=await er._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Vn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,c=r?._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===c)&&h?.user&&(r=h.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Md(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=a2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vn(this.app))return Promise.reject(ds(this));const t=e?kt(e):null;return t&&xe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vn(this.app)?Promise.reject(ds(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vn(this.app)?Promise.reject(ds(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await A2(this),t=new C2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new mo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await T2(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&hi(e)||this._popupRedirectResolver;xe(t,this,"argument-error"),this.redirectPersistenceManager=await wa.create(this,[hi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(h,this,"internal-error"),h.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,o);return()=>{c=!0,f()}}else{const f=e.addObserver(t);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=AI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&r2(`Error while retrieving App Check token: ${e.error}`),e?.token}}function To(n){return kt(n)}class V_{constructor(e){this.auth=e,this.observer=null,this.addObserver=nk(t=>this.observer=t)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _h={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function R2(n){_h=n}function kI(n){return _h.loadJS(n)}function P2(){return _h.recaptchaEnterpriseScript}function N2(){return _h.gapiScript}function D2(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class M2{constructor(){this.enterprise=new O2}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class O2{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const L2="recaptcha-enterprise",CI="NO_RECAPTCHA";class V2{constructor(e){this.type=L2,this.auth=To(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,h)=>{p2(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new f2(f);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,c(m.siteKey)}}).catch(f=>{h(f)})})}function o(a,c,h){const f=window.grecaptcha;N_(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(m=>{c(m)}).catch(()=>{c(CI)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new M2().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{r(this.auth).then(h=>{if(!t&&N_(window.grecaptcha))o(h,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=P2();f.length!==0&&(f+=h),kI(f).then(()=>{o(h,a,c)}).catch(m=>{c(m)})}}).catch(h=>{c(h)})})}}async function F_(n,e,t,r=!1,o=!1){const a=new V2(n);let c;if(o)c=CI;else try{c=await a.verify(t)}catch{c=await a.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const f=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const f=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function lm(n,e,t,r,o){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await F_(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await F_(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(n,e){const t=go(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(jr(a,e??{}))return o;Un(o,"already-initialized")}return t.initialize({options:e})}function j2(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(hi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function U2(n,e,t){const r=To(n);xe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,a=bI(e),{host:c,port:h}=z2(e),f=h===null?"":`:${h}`,m={url:`${a}//${c}${f}/`},v=Object.freeze({host:c,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){xe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),xe(jr(m,r.config.emulator)&&jr(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,Ma(c)?(eE(`${a}//${c}${f}`),tE("Auth",!0)):B2()}function bI(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function z2(n){const e=bI(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const a=o[1];return{host:a,port:j_(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:j_(c)}}}function j_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function B2(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return di("not implemented")}_getIdTokenResponse(e){return di("not implemented")}_linkToIdToken(e,t){return di("not implemented")}_getReauthenticationResolver(e){return di("not implemented")}}async function $2(n,e){return Ti(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W2(n,e){return wh(n,"POST","/v1/accounts:signInWithPassword",Ss(n,e))}async function H2(n,e){return Ti(n,"POST","/v1/accounts:sendOobCode",Ss(n,e))}async function q2(n,e){return H2(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G2(n,e){return wh(n,"POST","/v1/accounts:signInWithEmailLink",Ss(n,e))}async function K2(n,e){return wh(n,"POST","/v1/accounts:signInWithEmailLink",Ss(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends Cg{constructor(e,t,r,o=null){super("password",r),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new dc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new dc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lm(e,t,"signInWithPassword",W2);case"emailLink":return G2(e,{email:this._email,oobCode:this._password});default:Un(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lm(e,r,"signUpPassword",$2);case"emailLink":return K2(e,{idToken:t,email:this._email,oobCode:this._password});default:Un(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _a(n,e){return wh(n,"POST","/v1/accounts:signInWithIdp",Ss(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2="http://localhost";class uo extends Cg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new uo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Un("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...a}=t;if(!r||!o)return null;const c=new uo(r,o);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return _a(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,_a(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,_a(e,t)}buildRequest(){const e={requestUri:Q2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=mc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function X2(n){const e=$l(Wl(n)).link,t=e?$l(Wl(e)).deep_link_id:null,r=$l(Wl(n)).deep_link_id;return(r?$l(Wl(r)).link:null)||r||t||e||n}class Eh{constructor(e){const t=$l(Wl(e)),r=t.apiKey??null,o=t.oobCode??null,a=Y2(t.mode??null);xe(r&&o&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=X2(e);try{return new Eh(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(){this.providerId=za.PROVIDER_ID}static credential(e,t){return dc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Eh.parseLink(t);return xe(r,"argument-error"),dc._fromEmailAndCode(e,r.code,r.tenantId)}}za.PROVIDER_ID="password";za.EMAIL_PASSWORD_SIGN_IN_METHOD="password";za.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic extends bg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends Ic{constructor(){super("facebook.com")}static credential(e){return uo._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rs.credential(e.oauthAccessToken)}catch{return null}}}rs.FACEBOOK_SIGN_IN_METHOD="facebook.com";rs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends Ic{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return uo._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ui.credential(t,r)}catch{return null}}}ui.GOOGLE_SIGN_IN_METHOD="google.com";ui.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends Ic{constructor(){super("github.com")}static credential(e){return uo._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.GITHUB_SIGN_IN_METHOD="github.com";is.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends Ic{constructor(){super("twitter.com")}static credential(e,t){return uo._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ss.credential(t,r)}catch{return null}}}ss.TWITTER_SIGN_IN_METHOD="twitter.com";ss.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const a=await er._fromIdTokenResponse(e,r,o),c=U_(r);return new Na({user:a,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=U_(r);return new Na({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function U_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od extends lr{constructor(e,t,r,o){super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Od.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new Od(e,t,r,o)}}function RI(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Od._fromErrorAndOperation(n,a,e,r):a})}async function J2(n,e,t=!1){const r=await uc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Na._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z2(n,e,t=!1){const{auth:r}=n;if(Vn(r.app))return Promise.reject(ds(r));const o="reauthenticate";try{const a=await uc(n,RI(r,o,e,n),t);xe(a.idToken,r,"internal-error");const c=Ag(a.idToken);xe(c,r,"internal-error");const{sub:h}=c;return xe(n.uid===h,r,"user-mismatch"),Na._forOperation(n,o,a)}catch(a){throw a?.code==="auth/user-not-found"&&Un(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PI(n,e,t=!1){if(Vn(n.app))return Promise.reject(ds(n));const r="signIn",o=await RI(n,r,e),a=await Na._fromIdTokenResponse(n,r,o);return t||await n._updateCurrentUser(a.user),a}async function eD(n,e){return PI(To(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(n,e,t){xe(t.url?.length>0,n,"invalid-continue-uri"),xe(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),xe(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(xe(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(xe(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nD(n,e,t){const r=To(n),o={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function a(c,h){xe(h.handleCodeInApp,r,"argument-error"),h&&tD(r,c,h)}a(o,t),await lm(r,o,"getOobCode",q2)}function rD(n,e){return Eh.parseLink(e)?.operation==="EMAIL_SIGNIN"}async function iD(n,e,t){if(Vn(n.app))return Promise.reject(ds(n));const r=kt(n),o=za.credentialWithLink(e,t||Nd());return xe(o._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),eD(r,o)}function sD(n,e,t,r){return kt(n).onIdTokenChanged(e,t,r)}function oD(n,e,t){return kt(n).beforeAuthStateChanged(e,t)}const Ld="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ld,"1"),this.storage.removeItem(Ld),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD=1e3,lD=10;class DI extends NI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,f)=>{this.notifyListeners(c,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);S2()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,lD):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},aD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}DI.type="LOCAL";const cD=DI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI extends NI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}MI.type="SESSION";const OI=MI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new Th(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:a}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const h=Array.from(c).map(async m=>m(t.origin,a)),f=await uD(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Th.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,c;return new Promise((h,f)=>{const m=Rg("",20);o.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},r);c={messageChannel:o,onMessage(_){const E=_;if(E.data.eventId===m)switch(E.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(E.data.response);break;default:clearTimeout(v),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(){return window}function hD(n){Vr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(){return typeof Vr().WorkerGlobalScope<"u"&&typeof Vr().importScripts=="function"}async function fD(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pD(){return navigator?.serviceWorker?.controller||null}function mD(){return LI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI="firebaseLocalStorageDb",gD=1,Vd="firebaseLocalStorage",FI="fbase_key";class Sc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ih(n,e){return n.transaction([Vd],e?"readwrite":"readonly").objectStore(Vd)}function yD(){const n=indexedDB.deleteDatabase(VI);return new Sc(n).toPromise()}function cm(){const n=indexedDB.open(VI,gD);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Vd,{keyPath:FI})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Vd)?e(r):(r.close(),await yD(),e(await cm()))})})}async function z_(n,e,t){const r=Ih(n,!0).put({[FI]:e,value:t});return new Sc(r).toPromise()}async function vD(n,e){const t=Ih(n,!1).get(e),r=await new Sc(t).toPromise();return r===void 0?null:r.value}function B_(n,e){const t=Ih(n,!0).delete(e);return new Sc(t).toPromise()}const wD=800,_D=3;class jI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>_D)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Th._getInstance(mD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await fD(),!this.activeServiceWorker)return;this.sender=new dD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||pD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cm();return await z_(e,Ld,"1"),await B_(e,Ld),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>z_(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>vD(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>B_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=Ih(o,!1).getAll();return new Sc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jI.type="LOCAL";const ED=jI;new Tc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(n,e){return e?hi(e):(xe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg extends Cg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _a(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _a(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _a(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function TD(n){return PI(n.auth,new Pg(n),n.bypassAuthState)}function ID(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),Z2(t,new Pg(n),n.bypassAuthState)}async function SD(n){const{auth:e,user:t}=n;return xe(t,e,"internal-error"),J2(t,new Pg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,t,r,o,a=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:a,error:c,type:h}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return TD;case"linkViaPopup":case"linkViaRedirect":return SD;case"reauthViaPopup":case"reauthViaRedirect":return ID;default:Un(this.auth,"internal-error")}}resolve(e){vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=new Tc(2e3,1e4);async function AD(n,e,t){if(Vn(n.app))return Promise.reject(rr(n,"operation-not-supported-in-this-environment"));const r=To(n);i2(n,e,bg);const o=UI(r,t);return new ro(r,"signInViaPopup",e,o).executeNotNull()}class ro extends zI{constructor(e,t,r,o,a){super(e,t,o,a),this.provider=r,this.authWindow=null,this.pollId=null,ro.currentPopupAction&&ro.currentPopupAction.cancel(),ro.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){vi(this.filter.length===1,"Popup operations only handle one event");const e=Rg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(rr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(rr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ro.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(rr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xD.get())};e()}}ro.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD="pendingRedirect",ud=new Map;class CD extends zI{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=ud.get(this.auth._key());if(!e){try{const r=await bD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ud.set(this.auth._key(),e)}return this.bypassAuthState||ud.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bD(n,e){const t=ND(e),r=PD(n);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function RD(n,e){ud.set(n._key(),e)}function PD(n){return hi(n._redirectPersistence)}function ND(n){return cd(kD,n.config.apiKey,n.name)}async function DD(n,e,t=!1){if(Vn(n.app))return Promise.reject(ds(n));const r=To(n),o=UI(r,e),c=await new CD(r,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=600*1e3;class OD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!BI(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(rr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=MD&&this.cachedEventUids.clear(),this.cachedEventUids.has($_(e))}saveEventToCache(e){this.cachedEventUids.add($_(e)),this.lastProcessedEventTime=Date.now()}}function $_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function BI({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function LD(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VD(n,e={}){return Ti(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jD=/^https?/;async function UD(n){if(n.config.emulator)return;const{authorizedDomains:e}=await VD(n);for(const t of e)try{if(zD(t))return}catch{}Un(n,"unauthorized-domain")}function zD(n){const e=Nd(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!jD.test(t))return!1;if(FD.test(n))return r===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD=new Tc(3e4,6e4);function W_(){const n=Vr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function $D(n){return new Promise((e,t)=>{function r(){W_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{W_(),t(rr(n,"network-request-failed"))},timeout:BD.get()})}if(Vr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Vr().gapi?.load)r();else{const o=D2("iframefcb");return Vr()[o]=()=>{gapi.load?r():t(rr(n,"network-request-failed"))},kI(`${N2()}?onload=${o}`).catch(a=>t(a))}}).catch(e=>{throw dd=null,e})}let dd=null;function WD(n){return dd=dd||$D(n),dd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=new Tc(5e3,15e3),qD="__/auth/iframe",GD="emulator/auth/iframe",KD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},QD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YD(n){const e=n.config;xe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?xg(e,GD):`https://${n.config.authDomain}/${qD}`,r={apiKey:e.apiKey,appName:n.name,v:Oa},o=QD.get(n.config.apiHost);o&&(r.eid=o);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${mc(r).slice(1)}`}async function XD(n){const e=await WD(n),t=Vr().gapi;return xe(t,n,"internal-error"),e.open({where:document.body,url:YD(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KD,dontclear:!0},r=>new Promise(async(o,a)=>{await r.restyle({setHideOnLeave:!1});const c=rr(n,"network-request-failed"),h=Vr().setTimeout(()=>{a(c)},HD.get());function f(){Vr().clearTimeout(h),o(r)}r.ping(f).then(f,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ZD=500,eM=600,tM="_blank",nM="http://localhost";class H_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rM(n,e,t,r=ZD,o=eM){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f={...JD,width:r.toString(),height:o.toString(),top:a,left:c},m=en().toLowerCase();t&&(h=_I(m)?tM:t),vI(m)&&(e=e||nM,f.scrollbars="yes");const v=Object.entries(f).reduce((E,[S,M])=>`${E}${S}=${M},`,"");if(I2(m)&&h!=="_self")return iM(e||"",h),new H_(null);const _=window.open(e||"",h,v);xe(_,n,"popup-blocked");try{_.focus()}catch{}return new H_(_)}function iM(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM="__/auth/handler",oM="emulator/auth/handler",aM=encodeURIComponent("fac");async function q_(n,e,t,r,o,a){xe(n.config.authDomain,n,"auth-domain-config-required"),xe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Oa,eventId:o};if(e instanceof bg){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",tk(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,_]of Object.entries({}))c[v]=_}if(e instanceof Ic){const v=e.getScopes().filter(_=>_!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const f=await n._getAppCheckToken(),m=f?`#${aM}=${encodeURIComponent(f)}`:"";return`${lM(n)}?${mc(h).slice(1)}${m}`}function lM({config:n}){return n.emulator?xg(n,oM):`https://${n.authDomain}/${sM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip="webStorageSupport";class cM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OI,this._completeRedirectFn=DD,this._overrideRedirectResult=RD}async _openPopup(e,t,r,o){vi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await q_(e,t,r,Nd(),o);return rM(e,a,Rg())}async _openRedirect(e,t,r,o){await this._originValidation(e);const a=await q_(e,t,r,Nd(),o);return hD(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(vi(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await XD(e),r=new OD(e);return t.register("authEvent",o=>(xe(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ip,{type:Ip},o=>{const a=o?.[0]?.[Ip];a!==void 0&&t(!!a),Un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=UD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return xI()||wI()||kg()}}const uM=cM;var G_="@firebase/auth",K_="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hM(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fM(n){Ur(new ir("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=r.options;xe(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:AI(n)},m=new b2(r,o,a,f);return j2(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ur(new ir("auth-internal",e=>{const t=To(e.getProvider("auth").getImmediate());return(r=>new dM(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),jn(G_,K_,hM(n)),jn(G_,K_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM=300,mM=Z0("authIdTokenMaxAge")||pM;let Q_=null;const gM=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>mM)return;const o=t?.token;Q_!==o&&(Q_=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function yM(n=Gd()){const e=go(n,"auth");if(e.isInitialized())return e.getImmediate();const t=F2(n,{popupRedirectResolver:uM,persistence:[ED,cD,OI]}),r=Z0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=gM(a.toString());oD(t,c,()=>c(t.currentUser)),sD(t,h=>c(h))}}const o=X0("auth");return o&&U2(t,`http://${o}`),t}function vM(){return document.getElementsByTagName("head")?.[0]??document}R2({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=o=>{const a=rr("internal-error");a.customData=o,t(a)},r.type="text/javascript",r.charset="UTF-8",vM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fM("Browser");const $I={apiKey:"AIzaSyABOQQCvKR3zeUbbNFx3GsnU70C2Q2f-7k",authDomain:"trip-adventure-cc.firebaseapp.com",projectId:"trip-adventure-cc",storageBucket:"trip-adventure-cc.firebasestorage.app",messagingSenderId:"1091639514345",appId:"1:1091639514345:web:928f41c62ef79482b88c78",measurementId:"G-0RJ0DT4LEM"};if(!$I.apiKey)throw new Error("Firebase config tidak lengkap! Cek .env file.");const Ng=oC().length?Gd():oE($I);Vb().then(n=>{n&&Ob(Ng)});const zn=FN(Ng),Bt=yM(Ng),wM=async()=>{try{const n=ch(zn,"countries");return(await vh(n)).docs.map(r=>{const o=r.data();return{id:r.id,name:o.name,imageUrl:o.imageUrl||"",attractionCount:o.attractionCount||0}})}catch(n){return console.error("Error mengambil countries: ",n),[]}},_M=async n=>{try{const e=ch(zn,"countries",n,"attractions");return(await vh(e)).docs.map(o=>({id:o.id,...o.data(),country:n}))}catch(e){return console.error("Error mengambil attractions by country: ",e),[]}},EM=async(n,e)=>{try{const t=_o(zn,"countries",n,"attractions",e),r=await yh(t);if(r.exists())return{id:r.id,...r.data(),country:n};console.log("No such document!");return}catch(t){console.error("Error mengambil attraction by ID: ",t);return}},TM=async(n=6)=>{try{const e=KT(zn,"attractions"),t=iI(e,sI("rating_avg","desc"),QN(n));return(await vh(t)).docs.map(a=>{const c=a.ref.parent.parent?.id||"";return{id:a.id,...a.data(),country:c}})}catch(e){return console.error("Error mengambil top rated attractions: ",e),console.warn("PENTING: Query ini memerlukan INDEX. Firebase akan memberikan link di console error untuk membuat index. Klik link itu."),[]}},IM=async n=>{const e=n.toLowerCase().trim();if(!e)return[];try{const t=KT(zn,"attractions");return(await vh(t)).docs.map(c=>{const h=c.ref.parent.parent?.id||"";return{id:c.id,...c.data(),country:h}}).filter(c=>c.name.toLowerCase().includes(e)||c.location.city.toLowerCase().includes(e)||c.country.toLowerCase().includes(e)||c.type.toLowerCase().includes(e))}catch(t){return console.error("Error saat melakukan pencarian atraksi: ",t),[]}};function WI(){const n=Bt.currentUser;if(!n)throw new Error("Pengguna belum login.");return n.uid}async function Sh(){const n=WI(),e=_o(zn,"users",n);try{const t=await yh(e);return t.exists()?t.data().favoriteAttractions||[]:[]}catch(t){return console.error("Gagal mengambil daftar favorit:",t),[]}}async function SM(n){return(await Sh()).includes(n)}async function Dg(n,e){const t=WI(),r=_o(zn,"users",t),o=await SM(n);try{return o?(await om(r,{favoriteAttractions:t2(n)}),console.log(`[FIREBASE] ${n} dihapus dari favorit ${t}.`),!1):((await yh(r)).exists()?await om(r,{favoriteAttractions:e2(n)}):await lI(r,{favoriteAttractions:[n]}),console.log(`[FIREBASE] ${n} ditambahkan ke favorit ${t}.`),!0)}catch(a){throw console.error("Gagal mengubah status favorit:",a),new Error("Gagal menyimpan perubahan favorit ke database.")}}function HI(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(e=0;e<o;e++)n[e]&&(t=HI(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function qI(){for(var n,e,t=0,r="",o=arguments.length;t<o;t++)(n=arguments[t])&&(e=HI(n))&&(r&&(r+=" "),r+=e);return r}const Mg="-",xM=n=>{const e=kM(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:c=>{const h=c.split(Mg);return h[0]===""&&h.length!==1&&h.shift(),GI(h,e)||AM(c)},getConflictingClassGroupIds:(c,h)=>{const f=t[c]||[];return h&&r[c]?[...f,...r[c]]:f}}},GI=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),o=r?GI(n.slice(1),r):void 0;if(o)return o;if(e.validators.length===0)return;const a=n.join(Mg);return e.validators.find(({validator:c})=>c(a))?.classGroupId},Y_=/^\[(.+)\]$/,AM=n=>{if(Y_.test(n)){const e=Y_.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},kM=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const o in t)um(t[o],r,o,e);return r},um=(n,e,t,r)=>{n.forEach(o=>{if(typeof o=="string"){const a=o===""?e:X_(e,o);a.classGroupId=t;return}if(typeof o=="function"){if(CM(o)){um(o(r),e,t,r);return}e.validators.push({validator:o,classGroupId:t});return}Object.entries(o).forEach(([a,c])=>{um(c,X_(e,a),t,r)})})},X_=(n,e)=>{let t=n;return e.split(Mg).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},CM=n=>n.isThemeGetter,bM=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const o=(a,c)=>{t.set(a,c),e++,e>n&&(e=0,r=t,t=new Map)};return{get(a){let c=t.get(a);if(c!==void 0)return c;if((c=r.get(a))!==void 0)return o(a,c),c},set(a,c){t.has(a)?t.set(a,c):o(a,c)}}},dm="!",hm=":",RM=hm.length,PM=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=o=>{const a=[];let c=0,h=0,f=0,m;for(let M=0;M<o.length;M++){let x=o[M];if(c===0&&h===0){if(x===hm){a.push(o.slice(f,M)),f=M+RM;continue}if(x==="/"){m=M;continue}}x==="["?c++:x==="]"?c--:x==="("?h++:x===")"&&h--}const v=a.length===0?o:o.substring(f),_=NM(v),E=_!==v,S=m&&m>f?m-f:void 0;return{modifiers:a,hasImportantModifier:E,baseClassName:_,maybePostfixModifierPosition:S}};if(e){const o=e+hm,a=r;r=c=>c.startsWith(o)?a(c.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(t){const o=r;r=a=>t({className:a,parseClassName:o})}return r},NM=n=>n.endsWith(dm)?n.substring(0,n.length-1):n.startsWith(dm)?n.substring(1):n,DM=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const o=[];let a=[];return r.forEach(c=>{c[0]==="["||e[c]?(o.push(...a.sort(),c),a=[]):a.push(c)}),o.push(...a.sort()),o}},MM=n=>({cache:bM(n.cacheSize),parseClassName:PM(n),sortModifiers:DM(n),...xM(n)}),OM=/\s+/,LM=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:a}=e,c=[],h=n.trim().split(OM);let f="";for(let m=h.length-1;m>=0;m-=1){const v=h[m],{isExternal:_,modifiers:E,hasImportantModifier:S,baseClassName:M,maybePostfixModifierPosition:x}=t(v);if(_){f=v+(f.length>0?" "+f:f);continue}let C=!!x,U=r(C?M.substring(0,x):M);if(!U){if(!C){f=v+(f.length>0?" "+f:f);continue}if(U=r(M),!U){f=v+(f.length>0?" "+f:f);continue}C=!1}const B=a(E).join(":"),G=S?B+dm:B,Y=G+U;if(c.includes(Y))continue;c.push(Y);const Z=o(U,C);for(let oe=0;oe<Z.length;++oe){const b=Z[oe];c.push(G+b)}f=v+(f.length>0?" "+f:f)}return f};function VM(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=KI(e))&&(r&&(r+=" "),r+=t);return r}const KI=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=KI(n[r]))&&(t&&(t+=" "),t+=e);return t};function FM(n,...e){let t,r,o,a=c;function c(f){const m=e.reduce((v,_)=>_(v),n());return t=MM(m),r=t.cache.get,o=t.cache.set,a=h,h(f)}function h(f){const m=r(f);if(m)return m;const v=LM(f,t);return o(f,v),v}return function(){return a(VM.apply(null,arguments))}}const Rt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},QI=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,YI=/^\((?:(\w[\w-]*):)?(.+)\)$/i,jM=/^\d+\/\d+$/,UM=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,zM=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,BM=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,$M=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,WM=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,la=n=>jM.test(n),je=n=>!!n&&!Number.isNaN(Number(n)),es=n=>!!n&&Number.isInteger(Number(n)),Sp=n=>n.endsWith("%")&&je(n.slice(0,-1)),ci=n=>UM.test(n),HM=()=>!0,qM=n=>zM.test(n)&&!BM.test(n),XI=()=>!1,GM=n=>$M.test(n),KM=n=>WM.test(n),QM=n=>!ye(n)&&!ve(n),YM=n=>Ba(n,eS,XI),ye=n=>QI.test(n),Zs=n=>Ba(n,tS,qM),xp=n=>Ba(n,tO,je),J_=n=>Ba(n,JI,XI),XM=n=>Ba(n,ZI,KM),Ku=n=>Ba(n,nS,GM),ve=n=>YI.test(n),zl=n=>$a(n,tS),JM=n=>$a(n,nO),Z_=n=>$a(n,JI),ZM=n=>$a(n,eS),eO=n=>$a(n,ZI),Qu=n=>$a(n,nS,!0),Ba=(n,e,t)=>{const r=QI.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},$a=(n,e,t=!1)=>{const r=YI.exec(n);return r?r[1]?e(r[1]):t:!1},JI=n=>n==="position"||n==="percentage",ZI=n=>n==="image"||n==="url",eS=n=>n==="length"||n==="size"||n==="bg-size",tS=n=>n==="length",tO=n=>n==="number",nO=n=>n==="family-name",nS=n=>n==="shadow",rO=()=>{const n=Rt("color"),e=Rt("font"),t=Rt("text"),r=Rt("font-weight"),o=Rt("tracking"),a=Rt("leading"),c=Rt("breakpoint"),h=Rt("container"),f=Rt("spacing"),m=Rt("radius"),v=Rt("shadow"),_=Rt("inset-shadow"),E=Rt("text-shadow"),S=Rt("drop-shadow"),M=Rt("blur"),x=Rt("perspective"),C=Rt("aspect"),U=Rt("ease"),B=Rt("animate"),G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Y=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],Z=()=>[...Y(),ve,ye],oe=()=>["auto","hidden","clip","visible","scroll"],b=()=>["auto","contain","none"],A=()=>[ve,ye,f],N=()=>[la,"full","auto",...A()],L=()=>[es,"none","subgrid",ve,ye],O=()=>["auto",{span:["full",es,ve,ye]},es,ve,ye],F=()=>[es,"auto",ve,ye],R=()=>["auto","min","max","fr",ve,ye],_e=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],be=()=>["start","end","center","stretch","center-safe","end-safe"],Te=()=>["auto",...A()],we=()=>[la,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],$=()=>[n,ve,ye],le=()=>[...Y(),Z_,J_,{position:[ve,ye]}],ae=()=>["no-repeat",{repeat:["","x","y","space","round"]}],z=()=>["auto","cover","contain",ZM,YM,{size:[ve,ye]}],J=()=>[Sp,zl,Zs],me=()=>["","none","full",m,ve,ye],pe=()=>["",je,zl,Zs],Pe=()=>["solid","dashed","dotted","double"],De=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],re=()=>[je,Sp,Z_,J_],Se=()=>["","none",M,ve,ye],Ne=()=>["none",je,ve,ye],Oe=()=>["none",je,ve,ye],We=()=>[je,ve,ye],Qe=()=>[la,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ci],breakpoint:[ci],color:[HM],container:[ci],"drop-shadow":[ci],ease:["in","out","in-out"],font:[QM],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ci],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ci],shadow:[ci],spacing:["px",je],text:[ci],"text-shadow":[ci],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",la,ye,ve,C]}],container:["container"],columns:[{columns:[je,ye,ve,h]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:Z()}],overflow:[{overflow:oe()}],"overflow-x":[{"overflow-x":oe()}],"overflow-y":[{"overflow-y":oe()}],overscroll:[{overscroll:b()}],"overscroll-x":[{"overscroll-x":b()}],"overscroll-y":[{"overscroll-y":b()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:N()}],"inset-x":[{"inset-x":N()}],"inset-y":[{"inset-y":N()}],start:[{start:N()}],end:[{end:N()}],top:[{top:N()}],right:[{right:N()}],bottom:[{bottom:N()}],left:[{left:N()}],visibility:["visible","invisible","collapse"],z:[{z:[es,"auto",ve,ye]}],basis:[{basis:[la,"full","auto",h,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[je,la,"auto","initial","none",ye]}],grow:[{grow:["",je,ve,ye]}],shrink:[{shrink:["",je,ve,ye]}],order:[{order:[es,"first","last","none",ve,ye]}],"grid-cols":[{"grid-cols":L()}],"col-start-end":[{col:O()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":L()}],"row-start-end":[{row:O()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":R()}],"auto-rows":[{"auto-rows":R()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[..._e(),"normal"]}],"justify-items":[{"justify-items":[...be(),"normal"]}],"justify-self":[{"justify-self":["auto",...be()]}],"align-content":[{content:["normal",..._e()]}],"align-items":[{items:[...be(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...be(),{baseline:["","last"]}]}],"place-content":[{"place-content":_e()}],"place-items":[{"place-items":[...be(),"baseline"]}],"place-self":[{"place-self":["auto",...be()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:Te()}],mx:[{mx:Te()}],my:[{my:Te()}],ms:[{ms:Te()}],me:[{me:Te()}],mt:[{mt:Te()}],mr:[{mr:Te()}],mb:[{mb:Te()}],ml:[{ml:Te()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:we()}],w:[{w:[h,"screen",...we()]}],"min-w":[{"min-w":[h,"screen","none",...we()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[c]},...we()]}],h:[{h:["screen","lh",...we()]}],"min-h":[{"min-h":["screen","lh","none",...we()]}],"max-h":[{"max-h":["screen","lh",...we()]}],"font-size":[{text:["base",t,zl,Zs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ve,xp]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Sp,ye]}],"font-family":[{font:[JM,ye,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,ve,ye]}],"line-clamp":[{"line-clamp":[je,"none",ve,xp]}],leading:[{leading:[a,...A()]}],"list-image":[{"list-image":["none",ve,ye]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ve,ye]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:$()}],"text-color":[{text:$()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Pe(),"wavy"]}],"text-decoration-thickness":[{decoration:[je,"from-font","auto",ve,Zs]}],"text-decoration-color":[{decoration:$()}],"underline-offset":[{"underline-offset":[je,"auto",ve,ye]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ve,ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ve,ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:le()}],"bg-repeat":[{bg:ae()}],"bg-size":[{bg:z()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},es,ve,ye],radial:["",ve,ye],conic:[es,ve,ye]},eO,XM]}],"bg-color":[{bg:$()}],"gradient-from-pos":[{from:J()}],"gradient-via-pos":[{via:J()}],"gradient-to-pos":[{to:J()}],"gradient-from":[{from:$()}],"gradient-via":[{via:$()}],"gradient-to":[{to:$()}],rounded:[{rounded:me()}],"rounded-s":[{"rounded-s":me()}],"rounded-e":[{"rounded-e":me()}],"rounded-t":[{"rounded-t":me()}],"rounded-r":[{"rounded-r":me()}],"rounded-b":[{"rounded-b":me()}],"rounded-l":[{"rounded-l":me()}],"rounded-ss":[{"rounded-ss":me()}],"rounded-se":[{"rounded-se":me()}],"rounded-ee":[{"rounded-ee":me()}],"rounded-es":[{"rounded-es":me()}],"rounded-tl":[{"rounded-tl":me()}],"rounded-tr":[{"rounded-tr":me()}],"rounded-br":[{"rounded-br":me()}],"rounded-bl":[{"rounded-bl":me()}],"border-w":[{border:pe()}],"border-w-x":[{"border-x":pe()}],"border-w-y":[{"border-y":pe()}],"border-w-s":[{"border-s":pe()}],"border-w-e":[{"border-e":pe()}],"border-w-t":[{"border-t":pe()}],"border-w-r":[{"border-r":pe()}],"border-w-b":[{"border-b":pe()}],"border-w-l":[{"border-l":pe()}],"divide-x":[{"divide-x":pe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":pe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Pe(),"hidden","none"]}],"divide-style":[{divide:[...Pe(),"hidden","none"]}],"border-color":[{border:$()}],"border-color-x":[{"border-x":$()}],"border-color-y":[{"border-y":$()}],"border-color-s":[{"border-s":$()}],"border-color-e":[{"border-e":$()}],"border-color-t":[{"border-t":$()}],"border-color-r":[{"border-r":$()}],"border-color-b":[{"border-b":$()}],"border-color-l":[{"border-l":$()}],"divide-color":[{divide:$()}],"outline-style":[{outline:[...Pe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[je,ve,ye]}],"outline-w":[{outline:["",je,zl,Zs]}],"outline-color":[{outline:$()}],shadow:[{shadow:["","none",v,Qu,Ku]}],"shadow-color":[{shadow:$()}],"inset-shadow":[{"inset-shadow":["none",_,Qu,Ku]}],"inset-shadow-color":[{"inset-shadow":$()}],"ring-w":[{ring:pe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:$()}],"ring-offset-w":[{"ring-offset":[je,Zs]}],"ring-offset-color":[{"ring-offset":$()}],"inset-ring-w":[{"inset-ring":pe()}],"inset-ring-color":[{"inset-ring":$()}],"text-shadow":[{"text-shadow":["none",E,Qu,Ku]}],"text-shadow-color":[{"text-shadow":$()}],opacity:[{opacity:[je,ve,ye]}],"mix-blend":[{"mix-blend":[...De(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":De()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[je]}],"mask-image-linear-from-pos":[{"mask-linear-from":re()}],"mask-image-linear-to-pos":[{"mask-linear-to":re()}],"mask-image-linear-from-color":[{"mask-linear-from":$()}],"mask-image-linear-to-color":[{"mask-linear-to":$()}],"mask-image-t-from-pos":[{"mask-t-from":re()}],"mask-image-t-to-pos":[{"mask-t-to":re()}],"mask-image-t-from-color":[{"mask-t-from":$()}],"mask-image-t-to-color":[{"mask-t-to":$()}],"mask-image-r-from-pos":[{"mask-r-from":re()}],"mask-image-r-to-pos":[{"mask-r-to":re()}],"mask-image-r-from-color":[{"mask-r-from":$()}],"mask-image-r-to-color":[{"mask-r-to":$()}],"mask-image-b-from-pos":[{"mask-b-from":re()}],"mask-image-b-to-pos":[{"mask-b-to":re()}],"mask-image-b-from-color":[{"mask-b-from":$()}],"mask-image-b-to-color":[{"mask-b-to":$()}],"mask-image-l-from-pos":[{"mask-l-from":re()}],"mask-image-l-to-pos":[{"mask-l-to":re()}],"mask-image-l-from-color":[{"mask-l-from":$()}],"mask-image-l-to-color":[{"mask-l-to":$()}],"mask-image-x-from-pos":[{"mask-x-from":re()}],"mask-image-x-to-pos":[{"mask-x-to":re()}],"mask-image-x-from-color":[{"mask-x-from":$()}],"mask-image-x-to-color":[{"mask-x-to":$()}],"mask-image-y-from-pos":[{"mask-y-from":re()}],"mask-image-y-to-pos":[{"mask-y-to":re()}],"mask-image-y-from-color":[{"mask-y-from":$()}],"mask-image-y-to-color":[{"mask-y-to":$()}],"mask-image-radial":[{"mask-radial":[ve,ye]}],"mask-image-radial-from-pos":[{"mask-radial-from":re()}],"mask-image-radial-to-pos":[{"mask-radial-to":re()}],"mask-image-radial-from-color":[{"mask-radial-from":$()}],"mask-image-radial-to-color":[{"mask-radial-to":$()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":Y()}],"mask-image-conic-pos":[{"mask-conic":[je]}],"mask-image-conic-from-pos":[{"mask-conic-from":re()}],"mask-image-conic-to-pos":[{"mask-conic-to":re()}],"mask-image-conic-from-color":[{"mask-conic-from":$()}],"mask-image-conic-to-color":[{"mask-conic-to":$()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:le()}],"mask-repeat":[{mask:ae()}],"mask-size":[{mask:z()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ve,ye]}],filter:[{filter:["","none",ve,ye]}],blur:[{blur:Se()}],brightness:[{brightness:[je,ve,ye]}],contrast:[{contrast:[je,ve,ye]}],"drop-shadow":[{"drop-shadow":["","none",S,Qu,Ku]}],"drop-shadow-color":[{"drop-shadow":$()}],grayscale:[{grayscale:["",je,ve,ye]}],"hue-rotate":[{"hue-rotate":[je,ve,ye]}],invert:[{invert:["",je,ve,ye]}],saturate:[{saturate:[je,ve,ye]}],sepia:[{sepia:["",je,ve,ye]}],"backdrop-filter":[{"backdrop-filter":["","none",ve,ye]}],"backdrop-blur":[{"backdrop-blur":Se()}],"backdrop-brightness":[{"backdrop-brightness":[je,ve,ye]}],"backdrop-contrast":[{"backdrop-contrast":[je,ve,ye]}],"backdrop-grayscale":[{"backdrop-grayscale":["",je,ve,ye]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[je,ve,ye]}],"backdrop-invert":[{"backdrop-invert":["",je,ve,ye]}],"backdrop-opacity":[{"backdrop-opacity":[je,ve,ye]}],"backdrop-saturate":[{"backdrop-saturate":[je,ve,ye]}],"backdrop-sepia":[{"backdrop-sepia":["",je,ve,ye]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ve,ye]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[je,"initial",ve,ye]}],ease:[{ease:["linear","initial",U,ve,ye]}],delay:[{delay:[je,ve,ye]}],animate:[{animate:["none",B,ve,ye]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,ve,ye]}],"perspective-origin":[{"perspective-origin":Z()}],rotate:[{rotate:Ne()}],"rotate-x":[{"rotate-x":Ne()}],"rotate-y":[{"rotate-y":Ne()}],"rotate-z":[{"rotate-z":Ne()}],scale:[{scale:Oe()}],"scale-x":[{"scale-x":Oe()}],"scale-y":[{"scale-y":Oe()}],"scale-z":[{"scale-z":Oe()}],"scale-3d":["scale-3d"],skew:[{skew:We()}],"skew-x":[{"skew-x":We()}],"skew-y":[{"skew-y":We()}],transform:[{transform:[ve,ye,"","none","gpu","cpu"]}],"transform-origin":[{origin:Z()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Qe()}],"translate-x":[{"translate-x":Qe()}],"translate-y":[{"translate-y":Qe()}],"translate-z":[{"translate-z":Qe()}],"translate-none":["translate-none"],accent:[{accent:$()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:$()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ve,ye]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ve,ye]}],fill:[{fill:["none",...$()]}],"stroke-w":[{stroke:[je,zl,Zs,xp]}],stroke:[{stroke:["none",...$()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},iO=FM(rO);function tn(...n){return iO(qI(n))}function sO({className:n,type:e,...t}){return I.jsx("input",{type:e,"data-slot":"input",className:tn("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),...t})}function rS({placeholder:n="Cari destinasi impianmu...",className:e="",onSearch:t,defaultValue:r=""}){const[o,a]=P.useState(r),[c,h]=P.useState(!1);P.useEffect(()=>{const S=setTimeout(()=>{o.trim()!==r.trim()&&t(o.trim())},500);return()=>clearTimeout(S)},[o,t,r]);const f=S=>{S.key==="Enter"&&(S.preventDefault(),t(o.trim()))},m=()=>{a(""),t(""),document.getElementById("search-input")?.focus()},[v,_]=P.useState(!1),E=()=>{v||h(!1)};return I.jsxs("div",{className:`relative flex items-center transition-all duration-300 ${c?"scale-[1.02]":"scale-100"} ${e}`,children:[I.jsx(_A,{className:`absolute left-4 h-5 w-5 transition-colors ${c?"text-sky-500":"text-gray-400"}`}),I.jsx(sO,{id:"search-input",type:"text",placeholder:n,value:o,onChange:S=>a(S.target.value),onKeyDown:f,onFocus:()=>h(!0),onBlur:E,className:`w-full pl-12 pr-10 py-4 rounded-full border-2 border-white/30 bg-white/90 
          backdrop-blur-sm shadow-md placeholder:text-gray-400 
          focus:border-sky-500 focus:ring-2 focus:ring-sky-500/30 text-gray-800`}),o&&I.jsx("button",{onClick:m,onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),type:"button",className:"absolute right-4 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Hapus pencarian",children:I.jsx(G0,{className:"h-5 w-5"})})]})}const iS=n=>n===0?"Gratis":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n);function e0(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function sS(...n){return e=>{let t=!1;const r=n.map(o=>{const a=e0(o,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let o=0;o<r.length;o++){const a=r[o];typeof a=="function"?a():e0(n[o],null)}}}}function Wt(...n){return P.useCallback(sS(...n),n)}function hc(n){const e=oO(n),t=P.forwardRef((r,o)=>{const{children:a,...c}=r,h=P.Children.toArray(a),f=h.find(lO);if(f){const m=f.props.children,v=h.map(_=>_===f?P.Children.count(m)>1?P.Children.only(null):P.isValidElement(m)?m.props.children:null:_);return I.jsx(e,{...c,ref:o,children:P.isValidElement(m)?P.cloneElement(m,void 0,v):null})}return I.jsx(e,{...c,ref:o,children:a})});return t.displayName=`${n}.Slot`,t}var oS=hc("Slot");function oO(n){const e=P.forwardRef((t,r)=>{const{children:o,...a}=t;if(P.isValidElement(o)){const c=uO(o),h=cO(a,o.props);return o.type!==P.Fragment&&(h.ref=r?sS(r,c):c),P.cloneElement(o,h)}return P.Children.count(o)>1?P.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var aO=Symbol("radix.slottable");function lO(n){return P.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===aO}function cO(n,e){const t={...e};for(const r in e){const o=n[r],a=e[r];/^on[A-Z]/.test(r)?o&&a?t[r]=(...h)=>{const f=a(...h);return o(...h),f}:o&&(t[r]=o):r==="style"?t[r]={...o,...a}:r==="className"&&(t[r]=[o,a].filter(Boolean).join(" "))}return{...n,...t}}function uO(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const t0=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,n0=qI,aS=(n,e)=>t=>{var r;if(e?.variants==null)return n0(n,t?.class,t?.className);const{variants:o,defaultVariants:a}=e,c=Object.keys(o).map(m=>{const v=t?.[m],_=a?.[m];if(v===null)return null;const E=t0(v)||t0(_);return o[m][E]}),h=t&&Object.entries(t).reduce((m,v)=>{let[_,E]=v;return E===void 0||(m[_]=E),m},{}),f=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((m,v)=>{let{class:_,className:E,...S}=v;return Object.entries(S).every(M=>{let[x,C]=M;return Array.isArray(C)?C.includes({...a,...h}[x]):{...a,...h}[x]===C})?[...m,_,E]:m},[]);return n0(n,c,f,t?.class,t?.className)},dO=aS("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function fm({className:n,variant:e,asChild:t=!1,...r}){const o=t?oS:"span";return I.jsx(o,{"data-slot":"badge",className:tn(dO({variant:e}),n),...r})}const hO="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function lS(n){const[e,t]=P.useState(!1),r=()=>{t(!0)},{src:o,alt:a,style:c,className:h,...f}=n;return e?I.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${h??""}`,style:c,children:I.jsx("div",{className:"flex items-center justify-center w-full h-full",children:I.jsx("img",{src:hO,alt:"Error loading image",...f,"data-original-url":o})})}):I.jsx("img",{src:o,alt:a,className:h,style:c,...f,onError:r})}function Og({attraction:n,onClick:e,isFavorite:t,onToggleFavorite:r}){const o=a=>{a.stopPropagation(),r()};return I.jsxs("div",{onClick:e,className:"group bg-white rounded-2xl overflow-hidden shadow-md hover:shadow-2xl transition-all duration-300 cursor-pointer hover:-translate-y-1",children:[I.jsxs("div",{className:"relative h-48 overflow-hidden",children:[I.jsx(lS,{src:n.main_image_url,alt:n.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),I.jsx("button",{onClick:o,type:"button","aria-label":t?"Hapus dari favorit":"Tambahkan ke favorit",className:`absolute top-3 left-3 z-20 p-2 rounded-full 
                       bg-white/80 backdrop-blur-sm shadow-lg 
                       hover:scale-110 transition-transform duration-300`,children:I.jsx(q0,{className:`h-6 w-6 transition-colors duration-300 ${t?"fill-red-500 text-red-500":"fill-gray-300/50 text-gray-500 hover:text-red-500 hover:fill-red-500/80"}`})}),I.jsx(fm,{className:"absolute top-3 right-3 z-20 bg-white/95 text-gray-800 hover:bg-white",children:n.type})]}),I.jsxs("div",{className:"p-4",children:[I.jsx("h3",{className:"mb-2 line-clamp-1 font-semibold text-lg",children:n.name}),I.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[I.jsx(Sm,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),I.jsx("span",{className:"text-gray-900 font-medium",children:n.rating_avg.toFixed(1)}),I.jsxs("span",{className:"text-gray-500 text-sm",children:["(",n.rating_count.toLocaleString("id-ID")," review)"]})]}),I.jsxs("div",{className:"flex items-center gap-1 mb-3 text-gray-600",children:[I.jsx(td,{className:"h-4 w-4 flex-shrink-0"}),I.jsxs("p",{className:"text-sm line-clamp-1",children:[n.location.city,", ",n.country]})]}),I.jsxs("div",{className:"pt-3 border-t border-gray-100 flex items-center justify-between",children:[I.jsx("span",{className:"text-gray-800 text-xl font-bold",children:iS(n.entrance_fee)}),I.jsx("span",{className:"text-gray-500 text-sm",children:"per orang"})]})]})]})}function fO({country:n,onClick:e}){return I.jsxs("div",{onClick:e,className:"group relative flex-shrink-0 w-64 h-80 rounded-2xl overflow-hidden cursor-pointer shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-1",children:[I.jsx(lS,{src:n.imageUrl,alt:n.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),I.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent"}),I.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 text-white",children:[I.jsx("h3",{className:"mb-1",children:n.name}),I.jsx("p",{className:"text-white/80 text-sm",children:"5 Destinasi"})]})]})}function pO({onCountryClick:n,onAttractionClick:e,onSearch:t}){const[r,o]=P.useState([]),[a,c]=P.useState([]),[h,f]=P.useState(!0),[m,v]=P.useState(new Set);P.useEffect(()=>{(async()=>{try{f(!0);const[S,M,x]=await Promise.all([wM(),TM(6),Sh()]);v(new Set(x)),o(S),c(M)}catch(S){console.error("Gagal mengambil data homepage:",S)}finally{f(!1)}})()},[]);const _=async E=>{const S=m.has(E),M=!S;v(x=>{const C=new Set(x);return M?C.add(E):C.delete(E),C});try{await Dg(E,M)}catch(x){console.error("Gagal toggle favorit:",x),alert("Gagal memperbarui status favorit. Silakan coba lagi."),v(C=>{const U=new Set(C);return S?U.add(E):U.delete(E),U})}};return h?I.jsx("div",{className:"flex h-screen w-full items-center justify-center bg-gray-50",children:I.jsx(Ei,{className:"h-12 w-12 animate-spin text-sky-500"})}):I.jsxs("div",{className:"min-h-screen bg-gray-50",children:[I.jsxs("div",{className:"relative h-[600px] lg:h-[700px] flex items-center justify-center overflow-hidden",children:[I.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:"url('https://images.unsplash.com/photo-1631684181713-e697596d2165?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxtb3VudGFpbiUyMGFkdmVudHVyZSUyMGxhbmRzY2FwZXxlbnwxfHx8fDE3NjEwNDE5NzV8MA&ixlib=rb-4.1.0&q=80&w=1080')"}}),I.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-sky-900/70 via-sky-800/60 to-gray-50"}),I.jsxs("div",{className:"relative z-10 text-center px-4 max-w-4xl mx-auto",children:[I.jsxs("div",{className:"mb-6 inline-flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-md rounded-full text-white border border-white/20",children:[I.jsx(sA,{className:"h-5 w-5"}),I.jsx("span",{className:"text-sm",children:"Trip Adventure"})]}),I.jsx("h1",{className:"text-white mb-4 text-4xl lg:text-6xl",children:"Temukan Petualanganmu Berikutnya"}),I.jsx("p",{className:"text-white/90 text-lg lg:text-xl mb-10 max-w-2xl mx-auto",children:"Jelajahi ribuan destinasi menakjubkan di seluruh dunia dan ciptakan kenangan tak terlupakan"}),I.jsx(rS,{onSearch:t,className:"mx-auto max-w-xl"})]})]}),I.jsx("section",{className:"py-12 lg:py-16 px-4",children:I.jsxs("div",{className:"max-w-7xl mx-auto",children:[I.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[I.jsx("div",{className:"h-10 w-1 bg-sky-500 rounded-full"}),I.jsxs("div",{children:[I.jsx("h2",{className:"text-gray-900",children:"Negara Populer"}),I.jsx("p",{className:"text-gray-600",children:"Pilih destinasi favoritmu"})]})]}),I.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 scrollbar-hide",children:r.map(E=>I.jsx(fO,{country:E,onClick:()=>n(E.id)},E.id))})]})}),I.jsx("section",{className:"py-12 lg:py-16 px-4 bg-white",children:I.jsxs("div",{className:"max-w-7xl mx-auto",children:[I.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[I.jsx("div",{className:"h-10 w-1 bg-orange-500 rounded-full"}),I.jsxs("div",{children:[I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx("h2",{className:"text-gray-900",children:"Wisata Terpopuler"}),I.jsx(bA,{className:"h-6 w-6 text-orange-500"})]}),I.jsx("p",{className:"text-gray-600",children:"Destinasi dengan rating tertinggi"})]})]}),I.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(E=>I.jsx(Og,{attraction:E,onClick:()=>e(E.id,E.country),isFavorite:m.has(E.id),onToggleFavorite:()=>_(E.id)},E.id))})]})}),I.jsx("section",{className:"py-16 lg:py-24 px-4 bg-gradient-to-br from-sky-600 to-sky-800 text-white",children:I.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[I.jsx("h2",{className:"text-white mb-4 text-3xl lg:text-5xl",children:"Siap Memulai Petualangan?"}),I.jsx("p",{className:"text-white/90 text-lg mb-8",children:"Bergabunglah dengan jutaan traveler yang telah menemukan destinasi impian mereka"}),I.jsx("button",{className:"px-8 py-4 bg-orange-500 hover:bg-orange-600 text-white rounded-full transition-colors shadow-lg hover:shadow-xl hover:cursor-pointer",children:"Mulai Jelajahi Sekarang"})]})})]})}const mO=aS("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function fi({className:n,variant:e,size:t,asChild:r=!1,...o}){const a=r?oS:"button";return I.jsx(a,{"data-slot":"button",className:tn(mO({variant:e,size:t,className:n})),...o})}var xc=B0();const gO=z0(xc);function r0(n,[e,t]){return Math.min(t,Math.max(e,n))}function St(n,e,{checkForDefaultPrevented:t=!0}={}){return function(o){if(n?.(o),t===!1||!o.defaultPrevented)return e?.(o)}}function xh(n,e=[]){let t=[];function r(a,c){const h=P.createContext(c),f=t.length;t=[...t,c];const m=_=>{const{scope:E,children:S,...M}=_,x=E?.[n]?.[f]||h,C=P.useMemo(()=>M,Object.values(M));return I.jsx(x.Provider,{value:C,children:S})};m.displayName=a+"Provider";function v(_,E){const S=E?.[n]?.[f]||h,M=P.useContext(S);if(M)return M;if(c!==void 0)return c;throw new Error(`\`${_}\` must be used within \`${a}\``)}return[m,v]}const o=()=>{const a=t.map(c=>P.createContext(c));return function(h){const f=h?.[n]||a;return P.useMemo(()=>({[`__scope${n}`]:{...h,[n]:f}}),[h,f])}};return o.scopeName=n,[r,yO(o,...e)]}function yO(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(a){const c=r.reduce((h,{useScope:f,scopeName:m})=>{const _=f(a)[`__scope${m}`];return{...h,..._}},{});return P.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}function vO(n){const e=n+"CollectionProvider",[t,r]=xh(e),[o,a]=t(e,{collectionRef:{current:null},itemMap:new Map}),c=x=>{const{scope:C,children:U}=x,B=ts.useRef(null),G=ts.useRef(new Map).current;return I.jsx(o,{scope:C,itemMap:G,collectionRef:B,children:U})};c.displayName=e;const h=n+"CollectionSlot",f=hc(h),m=ts.forwardRef((x,C)=>{const{scope:U,children:B}=x,G=a(h,U),Y=Wt(C,G.collectionRef);return I.jsx(f,{ref:Y,children:B})});m.displayName=h;const v=n+"CollectionItemSlot",_="data-radix-collection-item",E=hc(v),S=ts.forwardRef((x,C)=>{const{scope:U,children:B,...G}=x,Y=ts.useRef(null),Z=Wt(C,Y),oe=a(v,U);return ts.useEffect(()=>(oe.itemMap.set(Y,{ref:Y,...G}),()=>void oe.itemMap.delete(Y))),I.jsx(E,{[_]:"",ref:Z,children:B})});S.displayName=v;function M(x){const C=a(n+"CollectionConsumer",x);return ts.useCallback(()=>{const B=C.collectionRef.current;if(!B)return[];const G=Array.from(B.querySelectorAll(`[${_}]`));return Array.from(C.itemMap.values()).sort((oe,b)=>G.indexOf(oe.ref.current)-G.indexOf(b.ref.current))},[C.collectionRef,C.itemMap])}return[{Provider:c,Slot:m,ItemSlot:S},M,r]}var wO=P.createContext(void 0);function _O(n){const e=P.useContext(wO);return n||e||"ltr"}var EO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],at=EO.reduce((n,e)=>{const t=hc(`Primitive.${e}`),r=P.forwardRef((o,a)=>{const{asChild:c,...h}=o,f=c?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),I.jsx(f,{...h,ref:a})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function TO(n,e){n&&xc.flushSync(()=>n.dispatchEvent(e))}function ws(n){const e=P.useRef(n);return P.useEffect(()=>{e.current=n}),P.useMemo(()=>(...t)=>e.current?.(...t),[])}function IO(n,e=globalThis?.document){const t=ws(n);P.useEffect(()=>{const r=o=>{o.key==="Escape"&&t(o)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var SO="DismissableLayer",pm="dismissableLayer.update",xO="dismissableLayer.pointerDownOutside",AO="dismissableLayer.focusOutside",i0,cS=P.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),uS=P.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:c,onDismiss:h,...f}=n,m=P.useContext(cS),[v,_]=P.useState(null),E=v?.ownerDocument??globalThis?.document,[,S]=P.useState({}),M=Wt(e,b=>_(b)),x=Array.from(m.layers),[C]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),U=x.indexOf(C),B=v?x.indexOf(v):-1,G=m.layersWithOutsidePointerEventsDisabled.size>0,Y=B>=U,Z=bO(b=>{const A=b.target,N=[...m.branches].some(L=>L.contains(A));!Y||N||(o?.(b),c?.(b),b.defaultPrevented||h?.())},E),oe=RO(b=>{const A=b.target;[...m.branches].some(L=>L.contains(A))||(a?.(b),c?.(b),b.defaultPrevented||h?.())},E);return IO(b=>{B===m.layers.size-1&&(r?.(b),!b.defaultPrevented&&h&&(b.preventDefault(),h()))},E),P.useEffect(()=>{if(v)return t&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(i0=E.body.style.pointerEvents,E.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(v)),m.layers.add(v),s0(),()=>{t&&m.layersWithOutsidePointerEventsDisabled.size===1&&(E.body.style.pointerEvents=i0)}},[v,E,t,m]),P.useEffect(()=>()=>{v&&(m.layers.delete(v),m.layersWithOutsidePointerEventsDisabled.delete(v),s0())},[v,m]),P.useEffect(()=>{const b=()=>S({});return document.addEventListener(pm,b),()=>document.removeEventListener(pm,b)},[]),I.jsx(at.div,{...f,ref:M,style:{pointerEvents:G?Y?"auto":"none":void 0,...n.style},onFocusCapture:St(n.onFocusCapture,oe.onFocusCapture),onBlurCapture:St(n.onBlurCapture,oe.onBlurCapture),onPointerDownCapture:St(n.onPointerDownCapture,Z.onPointerDownCapture)})});uS.displayName=SO;var kO="DismissableLayerBranch",CO=P.forwardRef((n,e)=>{const t=P.useContext(cS),r=P.useRef(null),o=Wt(e,r);return P.useEffect(()=>{const a=r.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),I.jsx(at.div,{...n,ref:o})});CO.displayName=kO;function bO(n,e=globalThis?.document){const t=ws(n),r=P.useRef(!1),o=P.useRef(()=>{});return P.useEffect(()=>{const a=h=>{if(h.target&&!r.current){let f=function(){dS(xO,t,m,{discrete:!0})};const m={originalEvent:h};h.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=f,e.addEventListener("click",o.current,{once:!0})):f()}else e.removeEventListener("click",o.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",o.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function RO(n,e=globalThis?.document){const t=ws(n),r=P.useRef(!1);return P.useEffect(()=>{const o=a=>{a.target&&!r.current&&dS(AO,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function s0(){const n=new CustomEvent(pm);document.dispatchEvent(n)}function dS(n,e,t,{discrete:r}){const o=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&o.addEventListener(n,e,{once:!0}),r?TO(o,a):o.dispatchEvent(a)}var Ap=0;function PO(){P.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??o0()),document.body.insertAdjacentElement("beforeend",n[1]??o0()),Ap++,()=>{Ap===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Ap--}},[])}function o0(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var kp="focusScope.autoFocusOnMount",Cp="focusScope.autoFocusOnUnmount",a0={bubbles:!1,cancelable:!0},NO="FocusScope",hS=P.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:a,...c}=n,[h,f]=P.useState(null),m=ws(o),v=ws(a),_=P.useRef(null),E=Wt(e,x=>f(x)),S=P.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;P.useEffect(()=>{if(r){let x=function(G){if(S.paused||!h)return;const Y=G.target;h.contains(Y)?_.current=Y:ns(_.current,{select:!0})},C=function(G){if(S.paused||!h)return;const Y=G.relatedTarget;Y!==null&&(h.contains(Y)||ns(_.current,{select:!0}))},U=function(G){if(document.activeElement===document.body)for(const Z of G)Z.removedNodes.length>0&&ns(h)};document.addEventListener("focusin",x),document.addEventListener("focusout",C);const B=new MutationObserver(U);return h&&B.observe(h,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",C),B.disconnect()}}},[r,h,S.paused]),P.useEffect(()=>{if(h){c0.add(S);const x=document.activeElement;if(!h.contains(x)){const U=new CustomEvent(kp,a0);h.addEventListener(kp,m),h.dispatchEvent(U),U.defaultPrevented||(DO(FO(fS(h)),{select:!0}),document.activeElement===x&&ns(h))}return()=>{h.removeEventListener(kp,m),setTimeout(()=>{const U=new CustomEvent(Cp,a0);h.addEventListener(Cp,v),h.dispatchEvent(U),U.defaultPrevented||ns(x??document.body,{select:!0}),h.removeEventListener(Cp,v),c0.remove(S)},0)}}},[h,m,v,S]);const M=P.useCallback(x=>{if(!t&&!r||S.paused)return;const C=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,U=document.activeElement;if(C&&U){const B=x.currentTarget,[G,Y]=MO(B);G&&Y?!x.shiftKey&&U===Y?(x.preventDefault(),t&&ns(G,{select:!0})):x.shiftKey&&U===G&&(x.preventDefault(),t&&ns(Y,{select:!0})):U===B&&x.preventDefault()}},[t,r,S.paused]);return I.jsx(at.div,{tabIndex:-1,...c,ref:E,onKeyDown:M})});hS.displayName=NO;function DO(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(ns(r,{select:e}),document.activeElement!==t)return}function MO(n){const e=fS(n),t=l0(e,n),r=l0(e.reverse(),n);return[t,r]}function fS(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function l0(n,e){for(const t of n)if(!OO(t,{upTo:e}))return t}function OO(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function LO(n){return n instanceof HTMLInputElement&&"select"in n}function ns(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&LO(n)&&e&&n.select()}}var c0=VO();function VO(){let n=[];return{add(e){const t=n[0];e!==t&&t?.pause(),n=u0(n,e),n.unshift(e)},remove(e){n=u0(n,e),n[0]?.resume()}}}function u0(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function FO(n){return n.filter(e=>e.tagName!=="A")}var Ht=globalThis?.document?P.useLayoutEffect:()=>{},jO=$0[" useId ".trim().toString()]||(()=>{}),UO=0;function Lg(n){const[e,t]=P.useState(jO());return Ht(()=>{t(r=>r??String(UO++))},[n]),n||(e?`radix-${e}`:"")}const zO=["top","right","bottom","left"],_s=Math.min,xn=Math.max,Fd=Math.round,Yu=Math.floor,Fr=n=>({x:n,y:n}),BO={left:"right",right:"left",bottom:"top",top:"bottom"},$O={start:"end",end:"start"};function mm(n,e,t){return xn(n,_s(e,t))}function wi(n,e){return typeof n=="function"?n(e):n}function _i(n){return n.split("-")[0]}function Wa(n){return n.split("-")[1]}function Vg(n){return n==="x"?"y":"x"}function Fg(n){return n==="y"?"height":"width"}const WO=new Set(["top","bottom"]);function Nr(n){return WO.has(_i(n))?"y":"x"}function jg(n){return Vg(Nr(n))}function HO(n,e,t){t===void 0&&(t=!1);const r=Wa(n),o=jg(n),a=Fg(o);let c=o==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(c=jd(c)),[c,jd(c)]}function qO(n){const e=jd(n);return[gm(n),e,gm(e)]}function gm(n){return n.replace(/start|end/g,e=>$O[e])}const d0=["left","right"],h0=["right","left"],GO=["top","bottom"],KO=["bottom","top"];function QO(n,e,t){switch(n){case"top":case"bottom":return t?e?h0:d0:e?d0:h0;case"left":case"right":return e?GO:KO;default:return[]}}function YO(n,e,t,r){const o=Wa(n);let a=QO(_i(n),t==="start",r);return o&&(a=a.map(c=>c+"-"+o),e&&(a=a.concat(a.map(gm)))),a}function jd(n){return n.replace(/left|right|bottom|top/g,e=>BO[e])}function XO(n){return{top:0,right:0,bottom:0,left:0,...n}}function pS(n){return typeof n!="number"?XO(n):{top:n,right:n,bottom:n,left:n}}function Ud(n){const{x:e,y:t,width:r,height:o}=n;return{width:r,height:o,top:t,left:e,right:e+r,bottom:t+o,x:e,y:t}}function f0(n,e,t){let{reference:r,floating:o}=n;const a=Nr(e),c=jg(e),h=Fg(c),f=_i(e),m=a==="y",v=r.x+r.width/2-o.width/2,_=r.y+r.height/2-o.height/2,E=r[h]/2-o[h]/2;let S;switch(f){case"top":S={x:v,y:r.y-o.height};break;case"bottom":S={x:v,y:r.y+r.height};break;case"right":S={x:r.x+r.width,y:_};break;case"left":S={x:r.x-o.width,y:_};break;default:S={x:r.x,y:r.y}}switch(Wa(e)){case"start":S[c]-=E*(t&&m?-1:1);break;case"end":S[c]+=E*(t&&m?-1:1);break}return S}const JO=async(n,e,t)=>{const{placement:r="bottom",strategy:o="absolute",middleware:a=[],platform:c}=t,h=a.filter(Boolean),f=await(c.isRTL==null?void 0:c.isRTL(e));let m=await c.getElementRects({reference:n,floating:e,strategy:o}),{x:v,y:_}=f0(m,r,f),E=r,S={},M=0;for(let x=0;x<h.length;x++){const{name:C,fn:U}=h[x],{x:B,y:G,data:Y,reset:Z}=await U({x:v,y:_,initialPlacement:r,placement:E,strategy:o,middlewareData:S,rects:m,platform:c,elements:{reference:n,floating:e}});v=B??v,_=G??_,S={...S,[C]:{...S[C],...Y}},Z&&M<=50&&(M++,typeof Z=="object"&&(Z.placement&&(E=Z.placement),Z.rects&&(m=Z.rects===!0?await c.getElementRects({reference:n,floating:e,strategy:o}):Z.rects),{x:v,y:_}=f0(m,E,f)),x=-1)}return{x:v,y:_,placement:E,strategy:o,middlewareData:S}};async function fc(n,e){var t;e===void 0&&(e={});const{x:r,y:o,platform:a,rects:c,elements:h,strategy:f}=n,{boundary:m="clippingAncestors",rootBoundary:v="viewport",elementContext:_="floating",altBoundary:E=!1,padding:S=0}=wi(e,n),M=pS(S),C=h[E?_==="floating"?"reference":"floating":_],U=Ud(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(C)))==null||t?C:C.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(h.floating)),boundary:m,rootBoundary:v,strategy:f})),B=_==="floating"?{x:r,y:o,width:c.floating.width,height:c.floating.height}:c.reference,G=await(a.getOffsetParent==null?void 0:a.getOffsetParent(h.floating)),Y=await(a.isElement==null?void 0:a.isElement(G))?await(a.getScale==null?void 0:a.getScale(G))||{x:1,y:1}:{x:1,y:1},Z=Ud(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:h,rect:B,offsetParent:G,strategy:f}):B);return{top:(U.top-Z.top+M.top)/Y.y,bottom:(Z.bottom-U.bottom+M.bottom)/Y.y,left:(U.left-Z.left+M.left)/Y.x,right:(Z.right-U.right+M.right)/Y.x}}const ZO=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:o,rects:a,platform:c,elements:h,middlewareData:f}=e,{element:m,padding:v=0}=wi(n,e)||{};if(m==null)return{};const _=pS(v),E={x:t,y:r},S=jg(o),M=Fg(S),x=await c.getDimensions(m),C=S==="y",U=C?"top":"left",B=C?"bottom":"right",G=C?"clientHeight":"clientWidth",Y=a.reference[M]+a.reference[S]-E[S]-a.floating[M],Z=E[S]-a.reference[S],oe=await(c.getOffsetParent==null?void 0:c.getOffsetParent(m));let b=oe?oe[G]:0;(!b||!await(c.isElement==null?void 0:c.isElement(oe)))&&(b=h.floating[G]||a.floating[M]);const A=Y/2-Z/2,N=b/2-x[M]/2-1,L=_s(_[U],N),O=_s(_[B],N),F=L,R=b-x[M]-O,_e=b/2-x[M]/2+A,be=mm(F,_e,R),Te=!f.arrow&&Wa(o)!=null&&_e!==be&&a.reference[M]/2-(_e<F?L:O)-x[M]/2<0,we=Te?_e<F?_e-F:_e-R:0;return{[S]:E[S]+we,data:{[S]:be,centerOffset:_e-be-we,...Te&&{alignmentOffset:we}},reset:Te}}}),eL=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:o,middlewareData:a,rects:c,initialPlacement:h,platform:f,elements:m}=e,{mainAxis:v=!0,crossAxis:_=!0,fallbackPlacements:E,fallbackStrategy:S="bestFit",fallbackAxisSideDirection:M="none",flipAlignment:x=!0,...C}=wi(n,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const U=_i(o),B=Nr(h),G=_i(h)===h,Y=await(f.isRTL==null?void 0:f.isRTL(m.floating)),Z=E||(G||!x?[jd(h)]:qO(h)),oe=M!=="none";!E&&oe&&Z.push(...YO(h,x,M,Y));const b=[h,...Z],A=await fc(e,C),N=[];let L=((r=a.flip)==null?void 0:r.overflows)||[];if(v&&N.push(A[U]),_){const _e=HO(o,c,Y);N.push(A[_e[0]],A[_e[1]])}if(L=[...L,{placement:o,overflows:N}],!N.every(_e=>_e<=0)){var O,F;const _e=(((O=a.flip)==null?void 0:O.index)||0)+1,be=b[_e];if(be&&(!(_==="alignment"?B!==Nr(be):!1)||L.every($=>Nr($.placement)===B?$.overflows[0]>0:!0)))return{data:{index:_e,overflows:L},reset:{placement:be}};let Te=(F=L.filter(we=>we.overflows[0]<=0).sort((we,$)=>we.overflows[1]-$.overflows[1])[0])==null?void 0:F.placement;if(!Te)switch(S){case"bestFit":{var R;const we=(R=L.filter($=>{if(oe){const le=Nr($.placement);return le===B||le==="y"}return!0}).map($=>[$.placement,$.overflows.filter(le=>le>0).reduce((le,ae)=>le+ae,0)]).sort(($,le)=>$[1]-le[1])[0])==null?void 0:R[0];we&&(Te=we);break}case"initialPlacement":Te=h;break}if(o!==Te)return{reset:{placement:Te}}}return{}}}};function p0(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function m0(n){return zO.some(e=>n[e]>=0)}const tL=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...o}=wi(n,e);switch(r){case"referenceHidden":{const a=await fc(e,{...o,elementContext:"reference"}),c=p0(a,t.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:m0(c)}}}case"escaped":{const a=await fc(e,{...o,altBoundary:!0}),c=p0(a,t.floating);return{data:{escapedOffsets:c,escaped:m0(c)}}}default:return{}}}}},mS=new Set(["left","top"]);async function nL(n,e){const{placement:t,platform:r,elements:o}=n,a=await(r.isRTL==null?void 0:r.isRTL(o.floating)),c=_i(t),h=Wa(t),f=Nr(t)==="y",m=mS.has(c)?-1:1,v=a&&f?-1:1,_=wi(e,n);let{mainAxis:E,crossAxis:S,alignmentAxis:M}=typeof _=="number"?{mainAxis:_,crossAxis:0,alignmentAxis:null}:{mainAxis:_.mainAxis||0,crossAxis:_.crossAxis||0,alignmentAxis:_.alignmentAxis};return h&&typeof M=="number"&&(S=h==="end"?M*-1:M),f?{x:S*v,y:E*m}:{x:E*m,y:S*v}}const rL=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:o,y:a,placement:c,middlewareData:h}=e,f=await nL(e,n);return c===((t=h.offset)==null?void 0:t.placement)&&(r=h.arrow)!=null&&r.alignmentOffset?{}:{x:o+f.x,y:a+f.y,data:{...f,placement:c}}}}},iL=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:o}=e,{mainAxis:a=!0,crossAxis:c=!1,limiter:h={fn:C=>{let{x:U,y:B}=C;return{x:U,y:B}}},...f}=wi(n,e),m={x:t,y:r},v=await fc(e,f),_=Nr(_i(o)),E=Vg(_);let S=m[E],M=m[_];if(a){const C=E==="y"?"top":"left",U=E==="y"?"bottom":"right",B=S+v[C],G=S-v[U];S=mm(B,S,G)}if(c){const C=_==="y"?"top":"left",U=_==="y"?"bottom":"right",B=M+v[C],G=M-v[U];M=mm(B,M,G)}const x=h.fn({...e,[E]:S,[_]:M});return{...x,data:{x:x.x-t,y:x.y-r,enabled:{[E]:a,[_]:c}}}}}},sL=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:o,rects:a,middlewareData:c}=e,{offset:h=0,mainAxis:f=!0,crossAxis:m=!0}=wi(n,e),v={x:t,y:r},_=Nr(o),E=Vg(_);let S=v[E],M=v[_];const x=wi(h,e),C=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(f){const G=E==="y"?"height":"width",Y=a.reference[E]-a.floating[G]+C.mainAxis,Z=a.reference[E]+a.reference[G]-C.mainAxis;S<Y?S=Y:S>Z&&(S=Z)}if(m){var U,B;const G=E==="y"?"width":"height",Y=mS.has(_i(o)),Z=a.reference[_]-a.floating[G]+(Y&&((U=c.offset)==null?void 0:U[_])||0)+(Y?0:C.crossAxis),oe=a.reference[_]+a.reference[G]+(Y?0:((B=c.offset)==null?void 0:B[_])||0)-(Y?C.crossAxis:0);M<Z?M=Z:M>oe&&(M=oe)}return{[E]:S,[_]:M}}}},oL=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:o,rects:a,platform:c,elements:h}=e,{apply:f=()=>{},...m}=wi(n,e),v=await fc(e,m),_=_i(o),E=Wa(o),S=Nr(o)==="y",{width:M,height:x}=a.floating;let C,U;_==="top"||_==="bottom"?(C=_,U=E===(await(c.isRTL==null?void 0:c.isRTL(h.floating))?"start":"end")?"left":"right"):(U=_,C=E==="end"?"top":"bottom");const B=x-v.top-v.bottom,G=M-v.left-v.right,Y=_s(x-v[C],B),Z=_s(M-v[U],G),oe=!e.middlewareData.shift;let b=Y,A=Z;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(A=G),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(b=B),oe&&!E){const L=xn(v.left,0),O=xn(v.right,0),F=xn(v.top,0),R=xn(v.bottom,0);S?A=M-2*(L!==0||O!==0?L+O:xn(v.left,v.right)):b=x-2*(F!==0||R!==0?F+R:xn(v.top,v.bottom))}await f({...e,availableWidth:A,availableHeight:b});const N=await c.getDimensions(h.floating);return M!==N.width||x!==N.height?{reset:{rects:!0}}:{}}}};function Ah(){return typeof window<"u"}function Ha(n){return gS(n)?(n.nodeName||"").toLowerCase():"#document"}function Cn(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Wr(n){var e;return(e=(gS(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function gS(n){return Ah()?n instanceof Node||n instanceof Cn(n).Node:!1}function or(n){return Ah()?n instanceof Element||n instanceof Cn(n).Element:!1}function Br(n){return Ah()?n instanceof HTMLElement||n instanceof Cn(n).HTMLElement:!1}function g0(n){return!Ah()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Cn(n).ShadowRoot}const aL=new Set(["inline","contents"]);function Ac(n){const{overflow:e,overflowX:t,overflowY:r,display:o}=ar(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!aL.has(o)}const lL=new Set(["table","td","th"]);function cL(n){return lL.has(Ha(n))}const uL=[":popover-open",":modal"];function kh(n){return uL.some(e=>{try{return n.matches(e)}catch{return!1}})}const dL=["transform","translate","scale","rotate","perspective"],hL=["transform","translate","scale","rotate","perspective","filter"],fL=["paint","layout","strict","content"];function Ug(n){const e=zg(),t=or(n)?ar(n):n;return dL.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||hL.some(r=>(t.willChange||"").includes(r))||fL.some(r=>(t.contain||"").includes(r))}function pL(n){let e=Es(n);for(;Br(e)&&!Da(e);){if(Ug(e))return e;if(kh(e))return null;e=Es(e)}return null}function zg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const mL=new Set(["html","body","#document"]);function Da(n){return mL.has(Ha(n))}function ar(n){return Cn(n).getComputedStyle(n)}function Ch(n){return or(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Es(n){if(Ha(n)==="html")return n;const e=n.assignedSlot||n.parentNode||g0(n)&&n.host||Wr(n);return g0(e)?e.host:e}function yS(n){const e=Es(n);return Da(e)?n.ownerDocument?n.ownerDocument.body:n.body:Br(e)&&Ac(e)?e:yS(e)}function pc(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const o=yS(n),a=o===((r=n.ownerDocument)==null?void 0:r.body),c=Cn(o);if(a){const h=ym(c);return e.concat(c,c.visualViewport||[],Ac(o)?o:[],h&&t?pc(h):[])}return e.concat(o,pc(o,[],t))}function ym(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function vS(n){const e=ar(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const o=Br(n),a=o?n.offsetWidth:t,c=o?n.offsetHeight:r,h=Fd(t)!==a||Fd(r)!==c;return h&&(t=a,r=c),{width:t,height:r,$:h}}function Bg(n){return or(n)?n:n.contextElement}function Ea(n){const e=Bg(n);if(!Br(e))return Fr(1);const t=e.getBoundingClientRect(),{width:r,height:o,$:a}=vS(e);let c=(a?Fd(t.width):t.width)/r,h=(a?Fd(t.height):t.height)/o;return(!c||!Number.isFinite(c))&&(c=1),(!h||!Number.isFinite(h))&&(h=1),{x:c,y:h}}const gL=Fr(0);function wS(n){const e=Cn(n);return!zg()||!e.visualViewport?gL:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function yL(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Cn(n)?!1:e}function ho(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const o=n.getBoundingClientRect(),a=Bg(n);let c=Fr(1);e&&(r?or(r)&&(c=Ea(r)):c=Ea(n));const h=yL(a,t,r)?wS(a):Fr(0);let f=(o.left+h.x)/c.x,m=(o.top+h.y)/c.y,v=o.width/c.x,_=o.height/c.y;if(a){const E=Cn(a),S=r&&or(r)?Cn(r):r;let M=E,x=ym(M);for(;x&&r&&S!==M;){const C=Ea(x),U=x.getBoundingClientRect(),B=ar(x),G=U.left+(x.clientLeft+parseFloat(B.paddingLeft))*C.x,Y=U.top+(x.clientTop+parseFloat(B.paddingTop))*C.y;f*=C.x,m*=C.y,v*=C.x,_*=C.y,f+=G,m+=Y,M=Cn(x),x=ym(M)}}return Ud({width:v,height:_,x:f,y:m})}function bh(n,e){const t=Ch(n).scrollLeft;return e?e.left+t:ho(Wr(n)).left+t}function _S(n,e){const t=n.getBoundingClientRect(),r=t.left+e.scrollLeft-bh(n,t),o=t.top+e.scrollTop;return{x:r,y:o}}function vL(n){let{elements:e,rect:t,offsetParent:r,strategy:o}=n;const a=o==="fixed",c=Wr(r),h=e?kh(e.floating):!1;if(r===c||h&&a)return t;let f={scrollLeft:0,scrollTop:0},m=Fr(1);const v=Fr(0),_=Br(r);if((_||!_&&!a)&&((Ha(r)!=="body"||Ac(c))&&(f=Ch(r)),Br(r))){const S=ho(r);m=Ea(r),v.x=S.x+r.clientLeft,v.y=S.y+r.clientTop}const E=c&&!_&&!a?_S(c,f):Fr(0);return{width:t.width*m.x,height:t.height*m.y,x:t.x*m.x-f.scrollLeft*m.x+v.x+E.x,y:t.y*m.y-f.scrollTop*m.y+v.y+E.y}}function wL(n){return Array.from(n.getClientRects())}function _L(n){const e=Wr(n),t=Ch(n),r=n.ownerDocument.body,o=xn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=xn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let c=-t.scrollLeft+bh(n);const h=-t.scrollTop;return ar(r).direction==="rtl"&&(c+=xn(e.clientWidth,r.clientWidth)-o),{width:o,height:a,x:c,y:h}}const y0=25;function EL(n,e){const t=Cn(n),r=Wr(n),o=t.visualViewport;let a=r.clientWidth,c=r.clientHeight,h=0,f=0;if(o){a=o.width,c=o.height;const v=zg();(!v||v&&e==="fixed")&&(h=o.offsetLeft,f=o.offsetTop)}const m=bh(r);if(m<=0){const v=r.ownerDocument,_=v.body,E=getComputedStyle(_),S=v.compatMode==="CSS1Compat"&&parseFloat(E.marginLeft)+parseFloat(E.marginRight)||0,M=Math.abs(r.clientWidth-_.clientWidth-S);M<=y0&&(a-=M)}else m<=y0&&(a+=m);return{width:a,height:c,x:h,y:f}}const TL=new Set(["absolute","fixed"]);function IL(n,e){const t=ho(n,!0,e==="fixed"),r=t.top+n.clientTop,o=t.left+n.clientLeft,a=Br(n)?Ea(n):Fr(1),c=n.clientWidth*a.x,h=n.clientHeight*a.y,f=o*a.x,m=r*a.y;return{width:c,height:h,x:f,y:m}}function v0(n,e,t){let r;if(e==="viewport")r=EL(n,t);else if(e==="document")r=_L(Wr(n));else if(or(e))r=IL(e,t);else{const o=wS(n);r={x:e.x-o.x,y:e.y-o.y,width:e.width,height:e.height}}return Ud(r)}function ES(n,e){const t=Es(n);return t===e||!or(t)||Da(t)?!1:ar(t).position==="fixed"||ES(t,e)}function SL(n,e){const t=e.get(n);if(t)return t;let r=pc(n,[],!1).filter(h=>or(h)&&Ha(h)!=="body"),o=null;const a=ar(n).position==="fixed";let c=a?Es(n):n;for(;or(c)&&!Da(c);){const h=ar(c),f=Ug(c);!f&&h.position==="fixed"&&(o=null),(a?!f&&!o:!f&&h.position==="static"&&!!o&&TL.has(o.position)||Ac(c)&&!f&&ES(n,c))?r=r.filter(v=>v!==c):o=h,c=Es(c)}return e.set(n,r),r}function xL(n){let{element:e,boundary:t,rootBoundary:r,strategy:o}=n;const c=[...t==="clippingAncestors"?kh(e)?[]:SL(e,this._c):[].concat(t),r],h=c[0],f=c.reduce((m,v)=>{const _=v0(e,v,o);return m.top=xn(_.top,m.top),m.right=_s(_.right,m.right),m.bottom=_s(_.bottom,m.bottom),m.left=xn(_.left,m.left),m},v0(e,h,o));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function AL(n){const{width:e,height:t}=vS(n);return{width:e,height:t}}function kL(n,e,t){const r=Br(e),o=Wr(e),a=t==="fixed",c=ho(n,!0,a,e);let h={scrollLeft:0,scrollTop:0};const f=Fr(0);function m(){f.x=bh(o)}if(r||!r&&!a)if((Ha(e)!=="body"||Ac(o))&&(h=Ch(e)),r){const S=ho(e,!0,a,e);f.x=S.x+e.clientLeft,f.y=S.y+e.clientTop}else o&&m();a&&!r&&o&&m();const v=o&&!r&&!a?_S(o,h):Fr(0),_=c.left+h.scrollLeft-f.x-v.x,E=c.top+h.scrollTop-f.y-v.y;return{x:_,y:E,width:c.width,height:c.height}}function bp(n){return ar(n).position==="static"}function w0(n,e){if(!Br(n)||ar(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Wr(n)===t&&(t=t.ownerDocument.body),t}function TS(n,e){const t=Cn(n);if(kh(n))return t;if(!Br(n)){let o=Es(n);for(;o&&!Da(o);){if(or(o)&&!bp(o))return o;o=Es(o)}return t}let r=w0(n,e);for(;r&&cL(r)&&bp(r);)r=w0(r,e);return r&&Da(r)&&bp(r)&&!Ug(r)?t:r||pL(n)||t}const CL=async function(n){const e=this.getOffsetParent||TS,t=this.getDimensions,r=await t(n.floating);return{reference:kL(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function bL(n){return ar(n).direction==="rtl"}const RL={convertOffsetParentRelativeRectToViewportRelativeRect:vL,getDocumentElement:Wr,getClippingRect:xL,getOffsetParent:TS,getElementRects:CL,getClientRects:wL,getDimensions:AL,getScale:Ea,isElement:or,isRTL:bL};function IS(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function PL(n,e){let t=null,r;const o=Wr(n);function a(){var h;clearTimeout(r),(h=t)==null||h.disconnect(),t=null}function c(h,f){h===void 0&&(h=!1),f===void 0&&(f=1),a();const m=n.getBoundingClientRect(),{left:v,top:_,width:E,height:S}=m;if(h||e(),!E||!S)return;const M=Yu(_),x=Yu(o.clientWidth-(v+E)),C=Yu(o.clientHeight-(_+S)),U=Yu(v),G={rootMargin:-M+"px "+-x+"px "+-C+"px "+-U+"px",threshold:xn(0,_s(1,f))||1};let Y=!0;function Z(oe){const b=oe[0].intersectionRatio;if(b!==f){if(!Y)return c();b?c(!1,b):r=setTimeout(()=>{c(!1,1e-7)},1e3)}b===1&&!IS(m,n.getBoundingClientRect())&&c(),Y=!1}try{t=new IntersectionObserver(Z,{...G,root:o.ownerDocument})}catch{t=new IntersectionObserver(Z,G)}t.observe(n)}return c(!0),a}function NL(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:f=!1}=r,m=Bg(n),v=o||a?[...m?pc(m):[],...pc(e)]:[];v.forEach(U=>{o&&U.addEventListener("scroll",t,{passive:!0}),a&&U.addEventListener("resize",t)});const _=m&&h?PL(m,t):null;let E=-1,S=null;c&&(S=new ResizeObserver(U=>{let[B]=U;B&&B.target===m&&S&&(S.unobserve(e),cancelAnimationFrame(E),E=requestAnimationFrame(()=>{var G;(G=S)==null||G.observe(e)})),t()}),m&&!f&&S.observe(m),S.observe(e));let M,x=f?ho(n):null;f&&C();function C(){const U=ho(n);x&&!IS(x,U)&&t(),x=U,M=requestAnimationFrame(C)}return t(),()=>{var U;v.forEach(B=>{o&&B.removeEventListener("scroll",t),a&&B.removeEventListener("resize",t)}),_?.(),(U=S)==null||U.disconnect(),S=null,f&&cancelAnimationFrame(M)}}const DL=rL,ML=iL,OL=eL,LL=oL,VL=tL,_0=ZO,FL=sL,jL=(n,e,t)=>{const r=new Map,o={platform:RL,...t},a={...o.platform,_c:r};return JO(n,e,{...o,platform:a})};var UL=typeof document<"u",zL=function(){},hd=UL?P.useLayoutEffect:zL;function zd(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,o;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!zd(n[r],e[r]))return!1;return!0}if(o=Object.keys(n),t=o.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,o[r]))return!1;for(r=t;r--!==0;){const a=o[r];if(!(a==="_owner"&&n.$$typeof)&&!zd(n[a],e[a]))return!1}return!0}return n!==n&&e!==e}function SS(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function E0(n,e){const t=SS(n);return Math.round(e*t)/t}function Rp(n){const e=P.useRef(n);return hd(()=>{e.current=n}),e}function BL(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:o,elements:{reference:a,floating:c}={},transform:h=!0,whileElementsMounted:f,open:m}=n,[v,_]=P.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[E,S]=P.useState(r);zd(E,r)||S(r);const[M,x]=P.useState(null),[C,U]=P.useState(null),B=P.useCallback($=>{$!==oe.current&&(oe.current=$,x($))},[]),G=P.useCallback($=>{$!==b.current&&(b.current=$,U($))},[]),Y=a||M,Z=c||C,oe=P.useRef(null),b=P.useRef(null),A=P.useRef(v),N=f!=null,L=Rp(f),O=Rp(o),F=Rp(m),R=P.useCallback(()=>{if(!oe.current||!b.current)return;const $={placement:e,strategy:t,middleware:E};O.current&&($.platform=O.current),jL(oe.current,b.current,$).then(le=>{const ae={...le,isPositioned:F.current!==!1};_e.current&&!zd(A.current,ae)&&(A.current=ae,xc.flushSync(()=>{_(ae)}))})},[E,e,t,O,F]);hd(()=>{m===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,_($=>({...$,isPositioned:!1})))},[m]);const _e=P.useRef(!1);hd(()=>(_e.current=!0,()=>{_e.current=!1}),[]),hd(()=>{if(Y&&(oe.current=Y),Z&&(b.current=Z),Y&&Z){if(L.current)return L.current(Y,Z,R);R()}},[Y,Z,R,L,N]);const be=P.useMemo(()=>({reference:oe,floating:b,setReference:B,setFloating:G}),[B,G]),Te=P.useMemo(()=>({reference:Y,floating:Z}),[Y,Z]),we=P.useMemo(()=>{const $={position:t,left:0,top:0};if(!Te.floating)return $;const le=E0(Te.floating,v.x),ae=E0(Te.floating,v.y);return h?{...$,transform:"translate("+le+"px, "+ae+"px)",...SS(Te.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:le,top:ae}},[t,h,Te.floating,v.x,v.y]);return P.useMemo(()=>({...v,update:R,refs:be,elements:Te,floatingStyles:we}),[v,R,be,Te,we])}const $L=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:o}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?_0({element:r.current,padding:o}).fn(t):{}:r?_0({element:r,padding:o}).fn(t):{}}}},WL=(n,e)=>({...DL(n),options:[n,e]}),HL=(n,e)=>({...ML(n),options:[n,e]}),qL=(n,e)=>({...FL(n),options:[n,e]}),GL=(n,e)=>({...OL(n),options:[n,e]}),KL=(n,e)=>({...LL(n),options:[n,e]}),QL=(n,e)=>({...VL(n),options:[n,e]}),YL=(n,e)=>({...$L(n),options:[n,e]});var XL="Arrow",xS=P.forwardRef((n,e)=>{const{children:t,width:r=10,height:o=5,...a}=n;return I.jsx(at.svg,{...a,ref:e,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:I.jsx("polygon",{points:"0,0 30,0 15,10"})})});xS.displayName=XL;var JL=xS;function ZL(n){const[e,t]=P.useState(void 0);return Ht(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let c,h;if("borderBoxSize"in a){const f=a.borderBoxSize,m=Array.isArray(f)?f[0]:f;c=m.inlineSize,h=m.blockSize}else c=n.offsetWidth,h=n.offsetHeight;t({width:c,height:h})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var $g="Popper",[AS,kS]=xh($g),[eV,CS]=AS($g),bS=n=>{const{__scopePopper:e,children:t}=n,[r,o]=P.useState(null);return I.jsx(eV,{scope:e,anchor:r,onAnchorChange:o,children:t})};bS.displayName=$g;var RS="PopperAnchor",PS=P.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...o}=n,a=CS(RS,t),c=P.useRef(null),h=Wt(e,c),f=P.useRef(null);return P.useEffect(()=>{const m=f.current;f.current=r?.current||c.current,m!==f.current&&a.onAnchorChange(f.current)}),r?null:I.jsx(at.div,{...o,ref:h})});PS.displayName=RS;var Wg="PopperContent",[tV,nV]=AS(Wg),NS=P.forwardRef((n,e)=>{const{__scopePopper:t,side:r="bottom",sideOffset:o=0,align:a="center",alignOffset:c=0,arrowPadding:h=0,avoidCollisions:f=!0,collisionBoundary:m=[],collisionPadding:v=0,sticky:_="partial",hideWhenDetached:E=!1,updatePositionStrategy:S="optimized",onPlaced:M,...x}=n,C=CS(Wg,t),[U,B]=P.useState(null),G=Wt(e,re=>B(re)),[Y,Z]=P.useState(null),oe=ZL(Y),b=oe?.width??0,A=oe?.height??0,N=r+(a!=="center"?"-"+a:""),L=typeof v=="number"?v:{top:0,right:0,bottom:0,left:0,...v},O=Array.isArray(m)?m:[m],F=O.length>0,R={padding:L,boundary:O.filter(iV),altBoundary:F},{refs:_e,floatingStyles:be,placement:Te,isPositioned:we,middlewareData:$}=BL({strategy:"fixed",placement:N,whileElementsMounted:(...re)=>NL(...re,{animationFrame:S==="always"}),elements:{reference:C.anchor},middleware:[WL({mainAxis:o+A,alignmentAxis:c}),f&&HL({mainAxis:!0,crossAxis:!1,limiter:_==="partial"?qL():void 0,...R}),f&&GL({...R}),KL({...R,apply:({elements:re,rects:Se,availableWidth:Ne,availableHeight:Oe})=>{const{width:We,height:Qe}=Se.reference,pt=re.floating.style;pt.setProperty("--radix-popper-available-width",`${Ne}px`),pt.setProperty("--radix-popper-available-height",`${Oe}px`),pt.setProperty("--radix-popper-anchor-width",`${We}px`),pt.setProperty("--radix-popper-anchor-height",`${Qe}px`)}}),Y&&YL({element:Y,padding:h}),sV({arrowWidth:b,arrowHeight:A}),E&&QL({strategy:"referenceHidden",...R})]}),[le,ae]=OS(Te),z=ws(M);Ht(()=>{we&&z?.()},[we,z]);const J=$.arrow?.x,me=$.arrow?.y,pe=$.arrow?.centerOffset!==0,[Pe,De]=P.useState();return Ht(()=>{U&&De(window.getComputedStyle(U).zIndex)},[U]),I.jsx("div",{ref:_e.setFloating,"data-radix-popper-content-wrapper":"",style:{...be,transform:we?be.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Pe,"--radix-popper-transform-origin":[$.transformOrigin?.x,$.transformOrigin?.y].join(" "),...$.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:I.jsx(tV,{scope:t,placedSide:le,onArrowChange:Z,arrowX:J,arrowY:me,shouldHideArrow:pe,children:I.jsx(at.div,{"data-side":le,"data-align":ae,...x,ref:G,style:{...x.style,animation:we?void 0:"none"}})})})});NS.displayName=Wg;var DS="PopperArrow",rV={top:"bottom",right:"left",bottom:"top",left:"right"},MS=P.forwardRef(function(e,t){const{__scopePopper:r,...o}=e,a=nV(DS,r),c=rV[a.placedSide];return I.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:I.jsx(JL,{...o,ref:t,style:{...o.style,display:"block"}})})});MS.displayName=DS;function iV(n){return n!==null}var sV=n=>({name:"transformOrigin",options:n,fn(e){const{placement:t,rects:r,middlewareData:o}=e,c=o.arrow?.centerOffset!==0,h=c?0:n.arrowWidth,f=c?0:n.arrowHeight,[m,v]=OS(t),_={start:"0%",center:"50%",end:"100%"}[v],E=(o.arrow?.x??0)+h/2,S=(o.arrow?.y??0)+f/2;let M="",x="";return m==="bottom"?(M=c?_:`${E}px`,x=`${-f}px`):m==="top"?(M=c?_:`${E}px`,x=`${r.floating.height+f}px`):m==="right"?(M=`${-f}px`,x=c?_:`${S}px`):m==="left"&&(M=`${r.floating.width+f}px`,x=c?_:`${S}px`),{data:{x:M,y:x}}}});function OS(n){const[e,t="center"]=n.split("-");return[e,t]}var oV=bS,aV=PS,lV=NS,cV=MS,uV="Portal",LS=P.forwardRef((n,e)=>{const{container:t,...r}=n,[o,a]=P.useState(!1);Ht(()=>a(!0),[]);const c=t||o&&globalThis?.document?.body;return c?gO.createPortal(I.jsx(at.div,{...r,ref:e}),c):null});LS.displayName=uV;var dV=$0[" useInsertionEffect ".trim().toString()]||Ht;function T0({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[o,a,c]=hV({defaultProp:e,onChange:t}),h=n!==void 0,f=h?n:o;{const v=P.useRef(n!==void 0);P.useEffect(()=>{const _=v.current;_!==h&&console.warn(`${r} is changing from ${_?"controlled":"uncontrolled"} to ${h?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),v.current=h},[h,r])}const m=P.useCallback(v=>{if(h){const _=fV(v)?v(n):v;_!==n&&c.current?.(_)}else a(v)},[h,n,a,c]);return[f,m]}function hV({defaultProp:n,onChange:e}){const[t,r]=P.useState(n),o=P.useRef(t),a=P.useRef(e);return dV(()=>{a.current=e},[e]),P.useEffect(()=>{o.current!==t&&(a.current?.(t),o.current=t)},[t,o]),[t,r,a]}function fV(n){return typeof n=="function"}function pV(n){const e=P.useRef({value:n,previous:n});return P.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var VS=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),mV="VisuallyHidden",gV=P.forwardRef((n,e)=>I.jsx(at.span,{...n,ref:e,style:{...VS,...n.style}}));gV.displayName=mV;var yV=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},ca=new WeakMap,Xu=new WeakMap,Ju={},Pp=0,FS=function(n){return n&&(n.host||FS(n.parentNode))},vV=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=FS(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},wV=function(n,e,t,r){var o=vV(e,Array.isArray(n)?n:[n]);Ju[t]||(Ju[t]=new WeakMap);var a=Ju[t],c=[],h=new Set,f=new Set(o),m=function(_){!_||h.has(_)||(h.add(_),m(_.parentNode))};o.forEach(m);var v=function(_){!_||f.has(_)||Array.prototype.forEach.call(_.children,function(E){if(h.has(E))v(E);else try{var S=E.getAttribute(r),M=S!==null&&S!=="false",x=(ca.get(E)||0)+1,C=(a.get(E)||0)+1;ca.set(E,x),a.set(E,C),c.push(E),x===1&&M&&Xu.set(E,!0),C===1&&E.setAttribute(t,"true"),M||E.setAttribute(r,"true")}catch(U){console.error("aria-hidden: cannot operate on ",E,U)}})};return v(e),h.clear(),Pp++,function(){c.forEach(function(_){var E=ca.get(_)-1,S=a.get(_)-1;ca.set(_,E),a.set(_,S),E||(Xu.has(_)||_.removeAttribute(r),Xu.delete(_)),S||_.removeAttribute(t)}),Pp--,Pp||(ca=new WeakMap,ca=new WeakMap,Xu=new WeakMap,Ju={})}},_V=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),o=yV(n);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),wV(r,o,t,"aria-hidden")):function(){return null}},br=function(){return br=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},br.apply(this,arguments)};function jS(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t}function EV(n,e,t){if(t||arguments.length===2)for(var r=0,o=e.length,a;r<o;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))}var fd="right-scroll-bar-position",pd="width-before-scroll-bar",TV="with-scroll-bars-hidden",IV="--removed-body-scroll-bar-size";function Np(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function SV(n,e){var t=P.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var o=t.value;o!==r&&(t.value=r,t.callback(r,o))}}}})[0];return t.callback=e,t.facade}var xV=typeof window<"u"?P.useLayoutEffect:P.useEffect,I0=new WeakMap;function AV(n,e){var t=SV(null,function(r){return n.forEach(function(o){return Np(o,r)})});return xV(function(){var r=I0.get(t);if(r){var o=new Set(r),a=new Set(n),c=t.current;o.forEach(function(h){a.has(h)||Np(h,null)}),a.forEach(function(h){o.has(h)||Np(h,c)})}I0.set(t,n)},[n]),t}function kV(n){return n}function CV(n,e){e===void 0&&(e=kV);var t=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(a){var c=e(a,r);return t.push(c),function(){t=t.filter(function(h){return h!==c})}},assignSyncMedium:function(a){for(r=!0;t.length;){var c=t;t=[],c.forEach(a)}t={push:function(h){return a(h)},filter:function(){return t}}},assignMedium:function(a){r=!0;var c=[];if(t.length){var h=t;t=[],h.forEach(a),c=t}var f=function(){var v=c;c=[],v.forEach(a)},m=function(){return Promise.resolve().then(f)};m(),t={push:function(v){c.push(v),m()},filter:function(v){return c=c.filter(v),t}}}};return o}function bV(n){n===void 0&&(n={});var e=CV(null);return e.options=br({async:!0,ssr:!1},n),e}var US=function(n){var e=n.sideCar,t=jS(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return P.createElement(r,br({},t))};US.isSideCarExport=!0;function RV(n,e){return n.useMedium(e),US}var zS=bV(),Dp=function(){},Rh=P.forwardRef(function(n,e){var t=P.useRef(null),r=P.useState({onScrollCapture:Dp,onWheelCapture:Dp,onTouchMoveCapture:Dp}),o=r[0],a=r[1],c=n.forwardProps,h=n.children,f=n.className,m=n.removeScrollBar,v=n.enabled,_=n.shards,E=n.sideCar,S=n.noRelative,M=n.noIsolation,x=n.inert,C=n.allowPinchZoom,U=n.as,B=U===void 0?"div":U,G=n.gapMode,Y=jS(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),Z=E,oe=AV([t,e]),b=br(br({},Y),o);return P.createElement(P.Fragment,null,v&&P.createElement(Z,{sideCar:zS,removeScrollBar:m,shards:_,noRelative:S,noIsolation:M,inert:x,setCallbacks:a,allowPinchZoom:!!C,lockRef:t,gapMode:G}),c?P.cloneElement(P.Children.only(h),br(br({},b),{ref:oe})):P.createElement(B,br({},b,{className:f,ref:oe}),h))});Rh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Rh.classNames={fullWidth:pd,zeroRight:fd};var PV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function NV(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=PV();return e&&n.setAttribute("nonce",e),n}function DV(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function MV(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var OV=function(){var n=0,e=null;return{add:function(t){n==0&&(e=NV())&&(DV(e,t),MV(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},LV=function(){var n=OV();return function(e,t){P.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},BS=function(){var n=LV(),e=function(t){var r=t.styles,o=t.dynamic;return n(r,o),null};return e},VV={left:0,top:0,right:0,gap:0},Mp=function(n){return parseInt(n||"",10)||0},FV=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],o=e[n==="padding"?"paddingRight":"marginRight"];return[Mp(t),Mp(r),Mp(o)]},jV=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return VV;var e=FV(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},UV=BS(),Ta="data-scroll-locked",zV=function(n,e,t,r){var o=n.left,a=n.top,c=n.right,h=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(TV,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(h,"px ").concat(r,`;
  }
  body[`).concat(Ta,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(h,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(h,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(fd,` {
    right: `).concat(h,"px ").concat(r,`;
  }
  
  .`).concat(pd,` {
    margin-right: `).concat(h,"px ").concat(r,`;
  }
  
  .`).concat(fd," .").concat(fd,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(pd," .").concat(pd,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ta,`] {
    `).concat(IV,": ").concat(h,`px;
  }
`)},S0=function(){var n=parseInt(document.body.getAttribute(Ta)||"0",10);return isFinite(n)?n:0},BV=function(){P.useEffect(function(){return document.body.setAttribute(Ta,(S0()+1).toString()),function(){var n=S0()-1;n<=0?document.body.removeAttribute(Ta):document.body.setAttribute(Ta,n.toString())}},[])},$V=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,o=r===void 0?"margin":r;BV();var a=P.useMemo(function(){return jV(o)},[o]);return P.createElement(UV,{styles:zV(a,!e,o,t?"":"!important")})},vm=!1;if(typeof window<"u")try{var Zu=Object.defineProperty({},"passive",{get:function(){return vm=!0,!0}});window.addEventListener("test",Zu,Zu),window.removeEventListener("test",Zu,Zu)}catch{vm=!1}var ua=vm?{passive:!1}:!1,WV=function(n){return n.tagName==="TEXTAREA"},$S=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!WV(n)&&t[e]==="visible")},HV=function(n){return $S(n,"overflowY")},qV=function(n){return $S(n,"overflowX")},x0=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=WS(n,r);if(o){var a=HS(n,r),c=a[1],h=a[2];if(c>h)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},GV=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},KV=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},WS=function(n,e){return n==="v"?HV(e):qV(e)},HS=function(n,e){return n==="v"?GV(e):KV(e)},QV=function(n,e){return n==="h"&&e==="rtl"?-1:1},YV=function(n,e,t,r,o){var a=QV(n,window.getComputedStyle(e).direction),c=a*r,h=t.target,f=e.contains(h),m=!1,v=c>0,_=0,E=0;do{if(!h)break;var S=HS(n,h),M=S[0],x=S[1],C=S[2],U=x-C-a*M;(M||U)&&WS(n,h)&&(_+=U,E+=M);var B=h.parentNode;h=B&&B.nodeType===Node.DOCUMENT_FRAGMENT_NODE?B.host:B}while(!f&&h!==document.body||f&&(e.contains(h)||e===h));return(v&&Math.abs(_)<1||!v&&Math.abs(E)<1)&&(m=!0),m},ed=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},A0=function(n){return[n.deltaX,n.deltaY]},k0=function(n){return n&&"current"in n?n.current:n},XV=function(n,e){return n[0]===e[0]&&n[1]===e[1]},JV=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},ZV=0,da=[];function e4(n){var e=P.useRef([]),t=P.useRef([0,0]),r=P.useRef(),o=P.useState(ZV++)[0],a=P.useState(BS)[0],c=P.useRef(n);P.useEffect(function(){c.current=n},[n]),P.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(o));var x=EV([n.lockRef.current],(n.shards||[]).map(k0),!0).filter(Boolean);return x.forEach(function(C){return C.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),x.forEach(function(C){return C.classList.remove("allow-interactivity-".concat(o))})}}},[n.inert,n.lockRef.current,n.shards]);var h=P.useCallback(function(x,C){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!c.current.allowPinchZoom;var U=ed(x),B=t.current,G="deltaX"in x?x.deltaX:B[0]-U[0],Y="deltaY"in x?x.deltaY:B[1]-U[1],Z,oe=x.target,b=Math.abs(G)>Math.abs(Y)?"h":"v";if("touches"in x&&b==="h"&&oe.type==="range")return!1;var A=x0(b,oe);if(!A)return!0;if(A?Z=b:(Z=b==="v"?"h":"v",A=x0(b,oe)),!A)return!1;if(!r.current&&"changedTouches"in x&&(G||Y)&&(r.current=Z),!Z)return!0;var N=r.current||Z;return YV(N,C,x,N==="h"?G:Y)},[]),f=P.useCallback(function(x){var C=x;if(!(!da.length||da[da.length-1]!==a)){var U="deltaY"in C?A0(C):ed(C),B=e.current.filter(function(Z){return Z.name===C.type&&(Z.target===C.target||C.target===Z.shadowParent)&&XV(Z.delta,U)})[0];if(B&&B.should){C.cancelable&&C.preventDefault();return}if(!B){var G=(c.current.shards||[]).map(k0).filter(Boolean).filter(function(Z){return Z.contains(C.target)}),Y=G.length>0?h(C,G[0]):!c.current.noIsolation;Y&&C.cancelable&&C.preventDefault()}}},[]),m=P.useCallback(function(x,C,U,B){var G={name:x,delta:C,target:U,should:B,shadowParent:t4(U)};e.current.push(G),setTimeout(function(){e.current=e.current.filter(function(Y){return Y!==G})},1)},[]),v=P.useCallback(function(x){t.current=ed(x),r.current=void 0},[]),_=P.useCallback(function(x){m(x.type,A0(x),x.target,h(x,n.lockRef.current))},[]),E=P.useCallback(function(x){m(x.type,ed(x),x.target,h(x,n.lockRef.current))},[]);P.useEffect(function(){return da.push(a),n.setCallbacks({onScrollCapture:_,onWheelCapture:_,onTouchMoveCapture:E}),document.addEventListener("wheel",f,ua),document.addEventListener("touchmove",f,ua),document.addEventListener("touchstart",v,ua),function(){da=da.filter(function(x){return x!==a}),document.removeEventListener("wheel",f,ua),document.removeEventListener("touchmove",f,ua),document.removeEventListener("touchstart",v,ua)}},[]);var S=n.removeScrollBar,M=n.inert;return P.createElement(P.Fragment,null,M?P.createElement(a,{styles:JV(o)}):null,S?P.createElement($V,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function t4(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const n4=RV(zS,e4);var qS=P.forwardRef(function(n,e){return P.createElement(Rh,br({},n,{ref:e,sideCar:n4}))});qS.classNames=Rh.classNames;var r4=[" ","Enter","ArrowUp","ArrowDown"],i4=[" ","Enter"],fo="Select",[Ph,Nh,s4]=vO(fo),[qa]=xh(fo,[s4,kS]),Dh=kS(),[o4,xs]=qa(fo),[a4,l4]=qa(fo),GS=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:o,onOpenChange:a,value:c,defaultValue:h,onValueChange:f,dir:m,name:v,autoComplete:_,disabled:E,required:S,form:M}=n,x=Dh(e),[C,U]=P.useState(null),[B,G]=P.useState(null),[Y,Z]=P.useState(!1),oe=_O(m),[b,A]=T0({prop:r,defaultProp:o??!1,onChange:a,caller:fo}),[N,L]=T0({prop:c,defaultProp:h,onChange:f,caller:fo}),O=P.useRef(null),F=C?M||!!C.closest("form"):!0,[R,_e]=P.useState(new Set),be=Array.from(R).map(Te=>Te.props.value).join(";");return I.jsx(oV,{...x,children:I.jsxs(o4,{required:S,scope:e,trigger:C,onTriggerChange:U,valueNode:B,onValueNodeChange:G,valueNodeHasChildren:Y,onValueNodeHasChildrenChange:Z,contentId:Lg(),value:N,onValueChange:L,open:b,onOpenChange:A,dir:oe,triggerPointerDownPosRef:O,disabled:E,children:[I.jsx(Ph.Provider,{scope:e,children:I.jsx(a4,{scope:n.__scopeSelect,onNativeOptionAdd:P.useCallback(Te=>{_e(we=>new Set(we).add(Te))},[]),onNativeOptionRemove:P.useCallback(Te=>{_e(we=>{const $=new Set(we);return $.delete(Te),$})},[]),children:t})}),F?I.jsxs(m1,{"aria-hidden":!0,required:S,tabIndex:-1,name:v,autoComplete:_,value:N,onChange:Te=>L(Te.target.value),disabled:E,form:M,children:[N===void 0?I.jsx("option",{value:""}):null,Array.from(R)]},be):null]})})};GS.displayName=fo;var KS="SelectTrigger",QS=P.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...o}=n,a=Dh(t),c=xs(KS,t),h=c.disabled||r,f=Wt(e,c.onTriggerChange),m=Nh(t),v=P.useRef("touch"),[_,E,S]=y1(x=>{const C=m().filter(G=>!G.disabled),U=C.find(G=>G.value===c.value),B=v1(C,x,U);B!==void 0&&c.onValueChange(B.value)}),M=x=>{h||(c.onOpenChange(!0),S()),x&&(c.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return I.jsx(aV,{asChild:!0,...a,children:I.jsx(at.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:h,"data-disabled":h?"":void 0,"data-placeholder":g1(c.value)?"":void 0,...o,ref:f,onClick:St(o.onClick,x=>{x.currentTarget.focus(),v.current!=="mouse"&&M(x)}),onPointerDown:St(o.onPointerDown,x=>{v.current=x.pointerType;const C=x.target;C.hasPointerCapture(x.pointerId)&&C.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(M(x),x.preventDefault())}),onKeyDown:St(o.onKeyDown,x=>{const C=_.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&E(x.key),!(C&&x.key===" ")&&r4.includes(x.key)&&(M(),x.preventDefault())})})})});QS.displayName=KS;var YS="SelectValue",XS=P.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:o,children:a,placeholder:c="",...h}=n,f=xs(YS,t),{onValueNodeHasChildrenChange:m}=f,v=a!==void 0,_=Wt(e,f.onValueNodeChange);return Ht(()=>{m(v)},[m,v]),I.jsx(at.span,{...h,ref:_,style:{pointerEvents:"none"},children:g1(f.value)?I.jsx(I.Fragment,{children:c}):a})});XS.displayName=YS;var c4="SelectIcon",JS=P.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...o}=n;return I.jsx(at.span,{"aria-hidden":!0,...o,ref:e,children:r||""})});JS.displayName=c4;var u4="SelectPortal",ZS=n=>I.jsx(LS,{asChild:!0,...n});ZS.displayName=u4;var po="SelectContent",e1=P.forwardRef((n,e)=>{const t=xs(po,n.__scopeSelect),[r,o]=P.useState();if(Ht(()=>{o(new DocumentFragment)},[]),!t.open){const a=r;return a?xc.createPortal(I.jsx(t1,{scope:n.__scopeSelect,children:I.jsx(Ph.Slot,{scope:n.__scopeSelect,children:I.jsx("div",{children:n.children})})}),a):null}return I.jsx(n1,{...n,ref:e})});e1.displayName=po;var Zn=10,[t1,As]=qa(po),d4="SelectContentImpl",h4=hc("SelectContent.RemoveScroll"),n1=P.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:a,onPointerDownOutside:c,side:h,sideOffset:f,align:m,alignOffset:v,arrowPadding:_,collisionBoundary:E,collisionPadding:S,sticky:M,hideWhenDetached:x,avoidCollisions:C,...U}=n,B=xs(po,t),[G,Y]=P.useState(null),[Z,oe]=P.useState(null),b=Wt(e,re=>Y(re)),[A,N]=P.useState(null),[L,O]=P.useState(null),F=Nh(t),[R,_e]=P.useState(!1),be=P.useRef(!1);P.useEffect(()=>{if(G)return _V(G)},[G]),PO();const Te=P.useCallback(re=>{const[Se,...Ne]=F().map(Qe=>Qe.ref.current),[Oe]=Ne.slice(-1),We=document.activeElement;for(const Qe of re)if(Qe===We||(Qe?.scrollIntoView({block:"nearest"}),Qe===Se&&Z&&(Z.scrollTop=0),Qe===Oe&&Z&&(Z.scrollTop=Z.scrollHeight),Qe?.focus(),document.activeElement!==We))return},[F,Z]),we=P.useCallback(()=>Te([A,G]),[Te,A,G]);P.useEffect(()=>{R&&we()},[R,we]);const{onOpenChange:$,triggerPointerDownPosRef:le}=B;P.useEffect(()=>{if(G){let re={x:0,y:0};const Se=Oe=>{re={x:Math.abs(Math.round(Oe.pageX)-(le.current?.x??0)),y:Math.abs(Math.round(Oe.pageY)-(le.current?.y??0))}},Ne=Oe=>{re.x<=10&&re.y<=10?Oe.preventDefault():G.contains(Oe.target)||$(!1),document.removeEventListener("pointermove",Se),le.current=null};return le.current!==null&&(document.addEventListener("pointermove",Se),document.addEventListener("pointerup",Ne,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Se),document.removeEventListener("pointerup",Ne,{capture:!0})}}},[G,$,le]),P.useEffect(()=>{const re=()=>$(!1);return window.addEventListener("blur",re),window.addEventListener("resize",re),()=>{window.removeEventListener("blur",re),window.removeEventListener("resize",re)}},[$]);const[ae,z]=y1(re=>{const Se=F().filter(We=>!We.disabled),Ne=Se.find(We=>We.ref.current===document.activeElement),Oe=v1(Se,re,Ne);Oe&&setTimeout(()=>Oe.ref.current.focus())}),J=P.useCallback((re,Se,Ne)=>{const Oe=!be.current&&!Ne;(B.value!==void 0&&B.value===Se||Oe)&&(N(re),Oe&&(be.current=!0))},[B.value]),me=P.useCallback(()=>G?.focus(),[G]),pe=P.useCallback((re,Se,Ne)=>{const Oe=!be.current&&!Ne;(B.value!==void 0&&B.value===Se||Oe)&&O(re)},[B.value]),Pe=r==="popper"?wm:r1,De=Pe===wm?{side:h,sideOffset:f,align:m,alignOffset:v,arrowPadding:_,collisionBoundary:E,collisionPadding:S,sticky:M,hideWhenDetached:x,avoidCollisions:C}:{};return I.jsx(t1,{scope:t,content:G,viewport:Z,onViewportChange:oe,itemRefCallback:J,selectedItem:A,onItemLeave:me,itemTextRefCallback:pe,focusSelectedItem:we,selectedItemText:L,position:r,isPositioned:R,searchRef:ae,children:I.jsx(qS,{as:h4,allowPinchZoom:!0,children:I.jsx(hS,{asChild:!0,trapped:B.open,onMountAutoFocus:re=>{re.preventDefault()},onUnmountAutoFocus:St(o,re=>{B.trigger?.focus({preventScroll:!0}),re.preventDefault()}),children:I.jsx(uS,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:re=>re.preventDefault(),onDismiss:()=>B.onOpenChange(!1),children:I.jsx(Pe,{role:"listbox",id:B.contentId,"data-state":B.open?"open":"closed",dir:B.dir,onContextMenu:re=>re.preventDefault(),...U,...De,onPlaced:()=>_e(!0),ref:b,style:{display:"flex",flexDirection:"column",outline:"none",...U.style},onKeyDown:St(U.onKeyDown,re=>{const Se=re.ctrlKey||re.altKey||re.metaKey;if(re.key==="Tab"&&re.preventDefault(),!Se&&re.key.length===1&&z(re.key),["ArrowUp","ArrowDown","Home","End"].includes(re.key)){let Oe=F().filter(We=>!We.disabled).map(We=>We.ref.current);if(["ArrowUp","End"].includes(re.key)&&(Oe=Oe.slice().reverse()),["ArrowUp","ArrowDown"].includes(re.key)){const We=re.target,Qe=Oe.indexOf(We);Oe=Oe.slice(Qe+1)}setTimeout(()=>Te(Oe)),re.preventDefault()}})})})})})})});n1.displayName=d4;var f4="SelectItemAlignedPosition",r1=P.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...o}=n,a=xs(po,t),c=As(po,t),[h,f]=P.useState(null),[m,v]=P.useState(null),_=Wt(e,b=>v(b)),E=Nh(t),S=P.useRef(!1),M=P.useRef(!0),{viewport:x,selectedItem:C,selectedItemText:U,focusSelectedItem:B}=c,G=P.useCallback(()=>{if(a.trigger&&a.valueNode&&h&&m&&x&&C&&U){const b=a.trigger.getBoundingClientRect(),A=m.getBoundingClientRect(),N=a.valueNode.getBoundingClientRect(),L=U.getBoundingClientRect();if(a.dir!=="rtl"){const We=L.left-A.left,Qe=N.left-We,pt=b.left-Qe,on=b.width+pt,Ii=Math.max(on,A.width),cr=window.innerWidth-Zn,Bn=r0(Qe,[Zn,Math.max(Zn,cr-Ii)]);h.style.minWidth=on+"px",h.style.left=Bn+"px"}else{const We=A.right-L.right,Qe=window.innerWidth-N.right-We,pt=window.innerWidth-b.right-Qe,on=b.width+pt,Ii=Math.max(on,A.width),cr=window.innerWidth-Zn,Bn=r0(Qe,[Zn,Math.max(Zn,cr-Ii)]);h.style.minWidth=on+"px",h.style.right=Bn+"px"}const O=E(),F=window.innerHeight-Zn*2,R=x.scrollHeight,_e=window.getComputedStyle(m),be=parseInt(_e.borderTopWidth,10),Te=parseInt(_e.paddingTop,10),we=parseInt(_e.borderBottomWidth,10),$=parseInt(_e.paddingBottom,10),le=be+Te+R+$+we,ae=Math.min(C.offsetHeight*5,le),z=window.getComputedStyle(x),J=parseInt(z.paddingTop,10),me=parseInt(z.paddingBottom,10),pe=b.top+b.height/2-Zn,Pe=F-pe,De=C.offsetHeight/2,re=C.offsetTop+De,Se=be+Te+re,Ne=le-Se;if(Se<=pe){const We=O.length>0&&C===O[O.length-1].ref.current;h.style.bottom="0px";const Qe=m.clientHeight-x.offsetTop-x.offsetHeight,pt=Math.max(Pe,De+(We?me:0)+Qe+we),on=Se+pt;h.style.height=on+"px"}else{const We=O.length>0&&C===O[0].ref.current;h.style.top="0px";const pt=Math.max(pe,be+x.offsetTop+(We?J:0)+De)+Ne;h.style.height=pt+"px",x.scrollTop=Se-pe+x.offsetTop}h.style.margin=`${Zn}px 0`,h.style.minHeight=ae+"px",h.style.maxHeight=F+"px",r?.(),requestAnimationFrame(()=>S.current=!0)}},[E,a.trigger,a.valueNode,h,m,x,C,U,a.dir,r]);Ht(()=>G(),[G]);const[Y,Z]=P.useState();Ht(()=>{m&&Z(window.getComputedStyle(m).zIndex)},[m]);const oe=P.useCallback(b=>{b&&M.current===!0&&(G(),B?.(),M.current=!1)},[G,B]);return I.jsx(m4,{scope:t,contentWrapper:h,shouldExpandOnScrollRef:S,onScrollButtonChange:oe,children:I.jsx("div",{ref:f,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Y},children:I.jsx(at.div,{...o,ref:_,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});r1.displayName=f4;var p4="SelectPopperPosition",wm=P.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:o=Zn,...a}=n,c=Dh(t);return I.jsx(lV,{...c,...a,ref:e,align:r,collisionPadding:o,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});wm.displayName=p4;var[m4,Hg]=qa(po,{}),_m="SelectViewport",i1=P.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...o}=n,a=As(_m,t),c=Hg(_m,t),h=Wt(e,a.onViewportChange),f=P.useRef(0);return I.jsxs(I.Fragment,{children:[I.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),I.jsx(Ph.Slot,{scope:t,children:I.jsx(at.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:h,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:St(o.onScroll,m=>{const v=m.currentTarget,{contentWrapper:_,shouldExpandOnScrollRef:E}=c;if(E?.current&&_){const S=Math.abs(f.current-v.scrollTop);if(S>0){const M=window.innerHeight-Zn*2,x=parseFloat(_.style.minHeight),C=parseFloat(_.style.height),U=Math.max(x,C);if(U<M){const B=U+S,G=Math.min(M,B),Y=B-G;_.style.height=G+"px",_.style.bottom==="0px"&&(v.scrollTop=Y>0?Y:0,_.style.justifyContent="flex-end")}}}f.current=v.scrollTop})})})]})});i1.displayName=_m;var s1="SelectGroup",[g4,y4]=qa(s1),v4=P.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,o=Lg();return I.jsx(g4,{scope:t,id:o,children:I.jsx(at.div,{role:"group","aria-labelledby":o,...r,ref:e})})});v4.displayName=s1;var o1="SelectLabel",w4=P.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,o=y4(o1,t);return I.jsx(at.div,{id:o.id,...r,ref:e})});w4.displayName=o1;var Bd="SelectItem",[_4,a1]=qa(Bd),l1=P.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:o=!1,textValue:a,...c}=n,h=xs(Bd,t),f=As(Bd,t),m=h.value===r,[v,_]=P.useState(a??""),[E,S]=P.useState(!1),M=Wt(e,B=>f.itemRefCallback?.(B,r,o)),x=Lg(),C=P.useRef("touch"),U=()=>{o||(h.onValueChange(r),h.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return I.jsx(_4,{scope:t,value:r,disabled:o,textId:x,isSelected:m,onItemTextChange:P.useCallback(B=>{_(G=>G||(B?.textContent??"").trim())},[]),children:I.jsx(Ph.ItemSlot,{scope:t,value:r,disabled:o,textValue:v,children:I.jsx(at.div,{role:"option","aria-labelledby":x,"data-highlighted":E?"":void 0,"aria-selected":m&&E,"data-state":m?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...c,ref:M,onFocus:St(c.onFocus,()=>S(!0)),onBlur:St(c.onBlur,()=>S(!1)),onClick:St(c.onClick,()=>{C.current!=="mouse"&&U()}),onPointerUp:St(c.onPointerUp,()=>{C.current==="mouse"&&U()}),onPointerDown:St(c.onPointerDown,B=>{C.current=B.pointerType}),onPointerMove:St(c.onPointerMove,B=>{C.current=B.pointerType,o?f.onItemLeave?.():C.current==="mouse"&&B.currentTarget.focus({preventScroll:!0})}),onPointerLeave:St(c.onPointerLeave,B=>{B.currentTarget===document.activeElement&&f.onItemLeave?.()}),onKeyDown:St(c.onKeyDown,B=>{f.searchRef?.current!==""&&B.key===" "||(i4.includes(B.key)&&U(),B.key===" "&&B.preventDefault())})})})})});l1.displayName=Bd;var Ql="SelectItemText",c1=P.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:o,...a}=n,c=xs(Ql,t),h=As(Ql,t),f=a1(Ql,t),m=l4(Ql,t),[v,_]=P.useState(null),E=Wt(e,U=>_(U),f.onItemTextChange,U=>h.itemTextRefCallback?.(U,f.value,f.disabled)),S=v?.textContent,M=P.useMemo(()=>I.jsx("option",{value:f.value,disabled:f.disabled,children:S},f.value),[f.disabled,f.value,S]),{onNativeOptionAdd:x,onNativeOptionRemove:C}=m;return Ht(()=>(x(M),()=>C(M)),[x,C,M]),I.jsxs(I.Fragment,{children:[I.jsx(at.span,{id:f.textId,...a,ref:E}),f.isSelected&&c.valueNode&&!c.valueNodeHasChildren?xc.createPortal(a.children,c.valueNode):null]})});c1.displayName=Ql;var u1="SelectItemIndicator",d1=P.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return a1(u1,t).isSelected?I.jsx(at.span,{"aria-hidden":!0,...r,ref:e}):null});d1.displayName=u1;var Em="SelectScrollUpButton",h1=P.forwardRef((n,e)=>{const t=As(Em,n.__scopeSelect),r=Hg(Em,n.__scopeSelect),[o,a]=P.useState(!1),c=Wt(e,r.onScrollButtonChange);return Ht(()=>{if(t.viewport&&t.isPositioned){let h=function(){const m=f.scrollTop>0;a(m)};const f=t.viewport;return h(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[t.viewport,t.isPositioned]),o?I.jsx(p1,{...n,ref:c,onAutoScroll:()=>{const{viewport:h,selectedItem:f}=t;h&&f&&(h.scrollTop=h.scrollTop-f.offsetHeight)}}):null});h1.displayName=Em;var Tm="SelectScrollDownButton",f1=P.forwardRef((n,e)=>{const t=As(Tm,n.__scopeSelect),r=Hg(Tm,n.__scopeSelect),[o,a]=P.useState(!1),c=Wt(e,r.onScrollButtonChange);return Ht(()=>{if(t.viewport&&t.isPositioned){let h=function(){const m=f.scrollHeight-f.clientHeight,v=Math.ceil(f.scrollTop)<m;a(v)};const f=t.viewport;return h(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[t.viewport,t.isPositioned]),o?I.jsx(p1,{...n,ref:c,onAutoScroll:()=>{const{viewport:h,selectedItem:f}=t;h&&f&&(h.scrollTop=h.scrollTop+f.offsetHeight)}}):null});f1.displayName=Tm;var p1=P.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...o}=n,a=As("SelectScrollButton",t),c=P.useRef(null),h=Nh(t),f=P.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return P.useEffect(()=>()=>f(),[f]),Ht(()=>{h().find(v=>v.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[h]),I.jsx(at.div,{"aria-hidden":!0,...o,ref:e,style:{flexShrink:0,...o.style},onPointerDown:St(o.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(r,50))}),onPointerMove:St(o.onPointerMove,()=>{a.onItemLeave?.(),c.current===null&&(c.current=window.setInterval(r,50))}),onPointerLeave:St(o.onPointerLeave,()=>{f()})})}),E4="SelectSeparator",T4=P.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return I.jsx(at.div,{"aria-hidden":!0,...r,ref:e})});T4.displayName=E4;var Im="SelectArrow",I4=P.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,o=Dh(t),a=xs(Im,t),c=As(Im,t);return a.open&&c.position==="popper"?I.jsx(cV,{...o,...r,ref:e}):null});I4.displayName=Im;var S4="SelectBubbleInput",m1=P.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const o=P.useRef(null),a=Wt(r,o),c=pV(e);return P.useEffect(()=>{const h=o.current;if(!h)return;const f=window.HTMLSelectElement.prototype,v=Object.getOwnPropertyDescriptor(f,"value").set;if(c!==e&&v){const _=new Event("change",{bubbles:!0});v.call(h,e),h.dispatchEvent(_)}},[c,e]),I.jsx(at.select,{...t,style:{...VS,...t.style},ref:a,defaultValue:e})});m1.displayName=S4;function g1(n){return n===""||n===void 0}function y1(n){const e=ws(n),t=P.useRef(""),r=P.useRef(0),o=P.useCallback(c=>{const h=t.current+c;e(h),(function f(m){t.current=m,window.clearTimeout(r.current),m!==""&&(r.current=window.setTimeout(()=>f(""),1e3))})(h)},[e]),a=P.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return P.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,o,a]}function v1(n,e,t){const o=e.length>1&&Array.from(e).every(m=>m===e[0])?e[0]:e,a=t?n.indexOf(t):-1;let c=x4(n,Math.max(a,0));o.length===1&&(c=c.filter(m=>m!==t));const f=c.find(m=>m.textValue.toLowerCase().startsWith(o.toLowerCase()));return f!==t?f:void 0}function x4(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var A4=GS,k4=QS,C4=XS,b4=JS,R4=ZS,P4=e1,N4=i1,D4=l1,M4=c1,O4=d1,L4=h1,V4=f1;function C0({...n}){return I.jsx(A4,{"data-slot":"select",...n})}function b0({...n}){return I.jsx(C4,{"data-slot":"select-value",...n})}function R0({className:n,size:e="default",children:t,...r}){return I.jsxs(k4,{"data-slot":"select-trigger","data-size":e,className:tn("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...r,children:[t,I.jsx(b4,{asChild:!0,children:I.jsx(H0,{className:"size-4 opacity-50"})})]})}function P0({className:n,children:e,position:t="popper",...r}){return I.jsx(R4,{children:I.jsxs(P4,{"data-slot":"select-content",className:tn("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[I.jsx(F4,{}),I.jsx(N4,{className:tn("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),I.jsx(j4,{})]})})}function Bl({className:n,children:e,...t}){return I.jsxs(D4,{"data-slot":"select-item",className:tn("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",n),...t,children:[I.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:I.jsx(O4,{children:I.jsx(eA,{className:"size-4"})})}),I.jsx(M4,{children:e})]})}function F4({className:n,...e}){return I.jsx(L4,{"data-slot":"select-scroll-up-button",className:tn("flex cursor-default items-center justify-center py-1",n),...e,children:I.jsx(rA,{className:"size-4"})})}function j4({className:n,...e}){return I.jsx(V4,{"data-slot":"select-scroll-down-button",className:tn("flex cursor-default items-center justify-center py-1",n),...e,children:I.jsx(H0,{className:"size-4"})})}function U4({countryName:n,onBack:e,onAttractionClick:t}){const[r,o]=P.useState([]),[a,c]=P.useState(!0),[h,f]=P.useState("popular"),[m,v]=P.useState("all"),[_,E]=P.useState(new Set);P.useEffect(()=>{(async()=>{if(n){c(!0);try{const[U,B]=await Promise.all([_M(n),Sh()]);o(U),E(new Set(B))}catch(U){console.error("Gagal mengambil data atraksi:",U)}finally{c(!1)}}})()},[n]);const S=async C=>{const U=_.has(C),B=!U;E(G=>{const Y=new Set(G);return B?Y.add(C):Y.delete(C),Y});try{await Dg(C,B)}catch(G){console.error("Gagal toggle favorit:",G),alert("Gagal memperbarui status favorit. Silakan coba lagi."),E(Y=>{const Z=new Set(Y);return U?Z.add(C):Z.delete(C),Z})}},M=P.useMemo(()=>["all",...Array.from(new Set(r.map(C=>C.type)))],[r]),x=P.useMemo(()=>{let C=r;return m!=="all"&&(C=C.filter(U=>U.type===m)),[...C].sort((U,B)=>{switch(h){case"rating":return B.rating_avg-U.rating_avg;case"price-low":return U.entrance_fee-B.entrance_fee;case"price-high":return B.entrance_fee-U.entrance_fee;default:return B.rating_count-U.rating_count}})},[r,m,h]);return a?I.jsx("div",{className:"flex h-screen w-full items-center justify-center bg-gray-50",children:I.jsx(Ei,{className:"h-12 w-12 animate-spin text-sky-500"})}):I.jsxs("div",{className:"min-h-screen bg-gray-50",children:[I.jsx("div",{className:"bg-white border-b sticky top-0 z-10",children:I.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4",children:[I.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[I.jsx(fi,{variant:"ghost",size:"icon",onClick:e,className:"rounded-full",children:I.jsx(md,{className:"h-5 w-5"})}),I.jsxs("div",{children:[I.jsxs("h1",{className:"text-gray-900 capitalize",children:["Wisata di ",n]}),I.jsxs("p",{className:"text-gray-600 text-sm",children:["Ditemukan ",x.length," destinasi"]})]})]}),I.jsxs("div",{className:"flex gap-3 overflow-x-auto pb-2",children:[I.jsxs(C0,{value:m,onValueChange:v,children:[I.jsxs(R0,{className:"w-[180px]",children:[I.jsx(cA,{className:"h-4 w-4 mr-2"}),I.jsx(b0,{placeholder:"Tipe Wisata"})]}),I.jsx(P0,{children:M.map(C=>I.jsx(Bl,{value:C,children:C==="all"?"Semua Tipe":C},C))})]}),I.jsxs(C0,{value:h,onValueChange:f,children:[I.jsxs(R0,{className:"w-[180px]",children:[I.jsx(SA,{className:"h-4 w-4 mr-2"}),I.jsx(b0,{placeholder:"Urutkan"})]}),I.jsxs(P0,{children:[I.jsx(Bl,{value:"popular",children:"Paling Populer"}),I.jsx(Bl,{value:"rating",children:"Rating Tertinggi"}),I.jsx(Bl,{value:"price-low",children:"Harga Terendah"}),I.jsx(Bl,{value:"price-high",children:"Harga Tertinggi"})]})]})]})]})}),I.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[I.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:x.map(C=>I.jsx(Og,{attraction:C,onClick:()=>t(C.id,C.country),isFavorite:_.has(C.id),onToggleFavorite:()=>S(C.id)},C.id))}),x.length===0&&!a&&I.jsx("div",{className:"text-center py-16",children:I.jsx("p",{className:"text-gray-500 text-lg",children:"Tidak ada destinasi yang ditemukan"})})]})]})}const w1="ratings";async function z4(n){const e=Bt.currentUser?.uid;if(!e)return null;try{const t=_o(zn,w1,n,"userRatings",e),r=await yh(t);return r.exists()?r.data().rating:null}catch(t){return console.error("Gagal mengambil rating user:",t),null}}async function B4(n,e){const t=Bt.currentUser;if(!t)throw new Error("Anda harus login untuk memberikan rating.");if(e<1||e>5)throw new Error("Nilai rating harus antara 1 dan 5.");const r=t.uid,o=_o(zn,w1,n,"userRatings",r);try{await lI(o,{userId:r,attractionId:n,rating:e,createdAt:uI()},{merge:!0}),console.log(`[FIREBASE] Rating ${e} untuk ${n} berhasil disimpan oleh ${r}`)}catch(a){throw console.error("Gagal menyimpan rating:",a),new Error("Gagal menyimpan rating Anda ke database.")}}function _1({className:n,...e}){return I.jsx("textarea",{"data-slot":"textarea",className:tn("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),...e})}var Op={exports:{}},Lp={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N0;function $4(){if(N0)return Lp;N0=1;var n=Wd();function e(_,E){return _===E&&(_!==0||1/_===1/E)||_!==_&&E!==E}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,o=n.useEffect,a=n.useLayoutEffect,c=n.useDebugValue;function h(_,E){var S=E(),M=r({inst:{value:S,getSnapshot:E}}),x=M[0].inst,C=M[1];return a(function(){x.value=S,x.getSnapshot=E,f(x)&&C({inst:x})},[_,S,E]),o(function(){return f(x)&&C({inst:x}),_(function(){f(x)&&C({inst:x})})},[_]),c(S),S}function f(_){var E=_.getSnapshot;_=_.value;try{var S=E();return!t(_,S)}catch{return!0}}function m(_,E){return E()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:h;return Lp.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:v,Lp}var D0;function W4(){return D0||(D0=1,Op.exports=$4()),Op.exports}var H4=W4();function q4(){return H4.useSyncExternalStore(G4,()=>!0,()=>!1)}function G4(){return()=>{}}var qg="Avatar",[K4]=xh(qg),[Q4,E1]=K4(qg),T1=P.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[o,a]=P.useState("idle");return I.jsx(Q4,{scope:t,imageLoadingStatus:o,onImageLoadingStatusChange:a,children:I.jsx(at.span,{...r,ref:e})})});T1.displayName=qg;var I1="AvatarImage",S1=P.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:o=()=>{},...a}=n,c=E1(I1,t),h=Y4(r,a),f=ws(m=>{o(m),c.onImageLoadingStatusChange(m)});return Ht(()=>{h!=="idle"&&f(h)},[h,f]),h==="loaded"?I.jsx(at.img,{...a,ref:e,src:r}):null});S1.displayName=I1;var x1="AvatarFallback",A1=P.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...o}=n,a=E1(x1,t),[c,h]=P.useState(r===void 0);return P.useEffect(()=>{if(r!==void 0){const f=window.setTimeout(()=>h(!0),r);return()=>window.clearTimeout(f)}},[r]),c&&a.imageLoadingStatus!=="loaded"?I.jsx(at.span,{...o,ref:e}):null});A1.displayName=x1;function M0(n,e){return n?e?(n.src!==e&&(n.src=e),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Y4(n,{referrerPolicy:e,crossOrigin:t}){const r=q4(),o=P.useRef(null),a=r?(o.current||(o.current=new window.Image),o.current):null,[c,h]=P.useState(()=>M0(a,n));return Ht(()=>{h(M0(a,n))},[a,n]),Ht(()=>{const f=_=>()=>{h(_)};if(!a)return;const m=f("loaded"),v=f("error");return a.addEventListener("load",m),a.addEventListener("error",v),e&&(a.referrerPolicy=e),typeof t=="string"&&(a.crossOrigin=t),()=>{a.removeEventListener("load",m),a.removeEventListener("error",v)}},[a,t,e]),c}var X4=T1,J4=S1,Z4=A1;function k1({className:n,...e}){return I.jsx(X4,{"data-slot":"avatar",className:tn("relative flex size-10 shrink-0 overflow-hidden rounded-full",n),...e})}function C1({className:n,...e}){return I.jsx(J4,{"data-slot":"avatar-image",className:tn("aspect-square size-full",n),...e})}function b1({className:n,...e}){return I.jsx(Z4,{"data-slot":"avatar-fallback",className:tn("bg-muted flex size-full items-center justify-center rounded-full",n),...e})}function eF({className:n,...e}){return I.jsx("div",{"data-slot":"card",className:tn("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",n),...e})}function tF({className:n,...e}){return I.jsx("div",{"data-slot":"card-header",className:tn("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",n),...e})}function nF({className:n,...e}){return I.jsx("div",{"data-slot":"card-content",className:tn("px-6 [&:last-child]:pb-6",n),...e})}function rF(){const n=Bt.currentUser;if(!n)throw new Error("Pengguna belum login. Tidak bisa memposting komentar.");const e=n.displayName||n.email?.split("@")[0]||"User Anonim";return{uid:n.uid,displayName:e,photoURL:n.photoURL}}async function iF(n,e){const t=rF(),r={attractionId:n,content:e,userId:t.uid,userName:t.displayName,userPhotoURL:t.photoURL,createdAt:uI()};try{const o=ch(zn,"comments");await JN(o,r),console.log("[FIREBASE] Komentar berhasil diposting oleh",t.uid)}catch(o){throw console.error("Error memposting komentar:",o),new Error("Gagal memposting komentar.")}}function sF(n,e){const t=ch(zn,"comments"),r=iI(t,KN("attractionId","==",n),sI("createdAt","desc"));return ZN(r,a=>{const c=[];a.forEach(h=>{const f=h.data();c.push({id:h.id,attractionId:f.attractionId,content:f.content,userId:f.userId,userName:f.userName,userPhotoURL:f.userPhotoURL,createdAt:f.createdAt?f.createdAt.toDate():null})}),e(c)},a=>{console.error("Gagal mendengarkan komentar:",a),e([])})}async function oF(n,e){if(!Bt.currentUser)throw new Error("Pengguna belum login.");const t=_o(zn,"comments",n);try{await om(t,{content:e.trim()}),console.log(`[FIREBASE] Komentar ${n} berhasil diupdate.`)}catch(r){throw console.error("Error mengedit komentar:",r),new Error("Gagal mengedit komentar. Pastikan Anda adalah pemilik dan batas waktu 10 menit belum terlewat.")}}function tr(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function R1(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function aF(n,e){const t=+tr(n);return R1(n,t+e)}const $d=6e4,O0=525600,L0=43200,V0=1440;let lF={};function cF(){return lF}function F0(n){const e=tr(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function uF(n,e){return aF(n,e*$d)}function dF(n,e){const t=tr(n),r=tr(e),o=t.getTime()-r.getTime();return o<0?-1:o>0?1:o}function hF(n){return R1(n,Date.now())}function P1(n){return e=>{const r=(n?Math[n]:Math.trunc)(e);return r===0?0:r}}function fF(n,e){return+tr(n)-+tr(e)}function pF(n,e,t){const r=fF(n,e)/$d;return P1(t?.roundingMethod)(r)}const mF={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},gF=(n,e,t)=>{let r;const o=mF[n];return typeof o=="string"?r=o:e===1?r=o.one:r=o.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Ia(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const yF={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},vF={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},wF={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},_F={date:Ia({formats:yF,defaultWidth:"full"}),time:Ia({formats:vF,defaultWidth:"full"}),dateTime:Ia({formats:wF,defaultWidth:"full"})},EF={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},TF=(n,e,t,r)=>EF[n];function Rr(n){return(e,t)=>{const r=t?.context?String(t.context):"standalone";let o;if(r==="formatting"&&n.formattingValues){const c=n.defaultFormattingWidth||n.defaultWidth,h=t?.width?String(t.width):c;o=n.formattingValues[h]||n.formattingValues[c]}else{const c=n.defaultWidth,h=t?.width?String(t.width):n.defaultWidth;o=n.values[h]||n.values[c]}const a=n.argumentCallback?n.argumentCallback(e):e;return o[a]}}const IF={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},SF={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},xF={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},AF={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},kF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},CF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},bF=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},RF={ordinalNumber:bF,era:Rr({values:IF,defaultWidth:"wide"}),quarter:Rr({values:SF,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Rr({values:xF,defaultWidth:"wide"}),day:Rr({values:AF,defaultWidth:"wide"}),dayPeriod:Rr({values:kF,defaultWidth:"wide",formattingValues:CF,defaultFormattingWidth:"wide"})};function Pr(n){return(e,t={})=>{const r=t.width,o=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],a=e.match(o);if(!a)return null;const c=a[0],h=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],f=Array.isArray(h)?NF(h,_=>_.test(c)):PF(h,_=>_.test(c));let m;m=n.valueCallback?n.valueCallback(f):f,m=t.valueCallback?t.valueCallback(m):m;const v=e.slice(c.length);return{value:m,rest:v}}}function PF(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function NF(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function N1(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const o=r[0],a=e.match(n.parsePattern);if(!a)return null;let c=n.valueCallback?n.valueCallback(a[0]):a[0];c=t.valueCallback?t.valueCallback(c):c;const h=e.slice(o.length);return{value:c,rest:h}}}const DF=/^(\d+)(th|st|nd|rd)?/i,MF=/\d+/i,OF={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},LF={any:[/^b/i,/^(a|c)/i]},VF={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},FF={any:[/1/i,/2/i,/3/i,/4/i]},jF={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},UF={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},zF={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},BF={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},$F={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},WF={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},HF={ordinalNumber:N1({matchPattern:DF,parsePattern:MF,valueCallback:n=>parseInt(n,10)}),era:Pr({matchPatterns:OF,defaultMatchWidth:"wide",parsePatterns:LF,defaultParseWidth:"any"}),quarter:Pr({matchPatterns:VF,defaultMatchWidth:"wide",parsePatterns:FF,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Pr({matchPatterns:jF,defaultMatchWidth:"wide",parsePatterns:UF,defaultParseWidth:"any"}),day:Pr({matchPatterns:zF,defaultMatchWidth:"wide",parsePatterns:BF,defaultParseWidth:"any"}),dayPeriod:Pr({matchPatterns:$F,defaultMatchWidth:"any",parsePatterns:WF,defaultParseWidth:"any"})},qF={code:"en-US",formatDistance:gF,formatLong:_F,formatRelative:TF,localize:RF,match:HF,options:{weekStartsOn:0,firstWeekContainsDate:1}};function GF(n,e,t){const r=cF(),o=t?.locale??r.locale??qF,a=dF(n,e);if(isNaN(a))throw new RangeError("Invalid time value");const c=Object.assign({},t,{addSuffix:t?.addSuffix,comparison:a});let h,f;a>0?(h=tr(e),f=tr(n)):(h=tr(n),f=tr(e));const m=P1(t?.roundingMethod??"round"),v=f.getTime()-h.getTime(),_=v/$d,E=F0(f)-F0(h),S=(v-E)/$d,M=t?.unit;let x;if(M?x=M:_<1?x="second":_<60?x="minute":_<V0?x="hour":S<L0?x="day":S<O0?x="month":x="year",x==="second"){const C=m(v/1e3);return o.formatDistance("xSeconds",C,c)}else if(x==="minute"){const C=m(_);return o.formatDistance("xMinutes",C,c)}else if(x==="hour"){const C=m(_/60);return o.formatDistance("xHours",C,c)}else if(x==="day"){const C=m(S/V0);return o.formatDistance("xDays",C,c)}else if(x==="month"){const C=m(S/L0);return C===12&&M!=="month"?o.formatDistance("xYears",1,c):o.formatDistance("xMonths",C,c)}else{const C=m(S/O0);return o.formatDistance("xYears",C,c)}}function KF(n,e){return GF(n,hF(n),e)}function QF(n){return+tr(n)<Date.now()}const YF={lessThanXSeconds:{one:"kurang dari 1 detik",other:"kurang dari {{count}} detik"},xSeconds:{one:"1 detik",other:"{{count}} detik"},halfAMinute:"setengah menit",lessThanXMinutes:{one:"kurang dari 1 menit",other:"kurang dari {{count}} menit"},xMinutes:{one:"1 menit",other:"{{count}} menit"},aboutXHours:{one:"sekitar 1 jam",other:"sekitar {{count}} jam"},xHours:{one:"1 jam",other:"{{count}} jam"},xDays:{one:"1 hari",other:"{{count}} hari"},aboutXWeeks:{one:"sekitar 1 minggu",other:"sekitar {{count}} minggu"},xWeeks:{one:"1 minggu",other:"{{count}} minggu"},aboutXMonths:{one:"sekitar 1 bulan",other:"sekitar {{count}} bulan"},xMonths:{one:"1 bulan",other:"{{count}} bulan"},aboutXYears:{one:"sekitar 1 tahun",other:"sekitar {{count}} tahun"},xYears:{one:"1 tahun",other:"{{count}} tahun"},overXYears:{one:"lebih dari 1 tahun",other:"lebih dari {{count}} tahun"},almostXYears:{one:"hampir 1 tahun",other:"hampir {{count}} tahun"}},XF=(n,e,t)=>{let r;const o=YF[n];return typeof o=="string"?r=o:e===1?r=o.one:r=o.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"dalam waktu "+r:r+" yang lalu":r},JF={full:"EEEE, d MMMM yyyy",long:"d MMMM yyyy",medium:"d MMM yyyy",short:"d/M/yyyy"},ZF={full:"HH.mm.ss",long:"HH.mm.ss",medium:"HH.mm",short:"HH.mm"},ej={full:"{{date}} 'pukul' {{time}}",long:"{{date}} 'pukul' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},tj={date:Ia({formats:JF,defaultWidth:"full"}),time:Ia({formats:ZF,defaultWidth:"full"}),dateTime:Ia({formats:ej,defaultWidth:"full"})},nj={lastWeek:"eeee 'lalu pukul' p",yesterday:"'Kemarin pukul' p",today:"'Hari ini pukul' p",tomorrow:"'Besok pukul' p",nextWeek:"eeee 'pukul' p",other:"P"},rj=(n,e,t,r)=>nj[n],ij={narrow:["SM","M"],abbreviated:["SM","M"],wide:["Sebelum Masehi","Masehi"]},sj={narrow:["1","2","3","4"],abbreviated:["K1","K2","K3","K4"],wide:["Kuartal ke-1","Kuartal ke-2","Kuartal ke-3","Kuartal ke-4"]},oj={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agt","Sep","Okt","Nov","Des"],wide:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]},aj={narrow:["M","S","S","R","K","J","S"],short:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],abbreviated:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],wide:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]},lj={narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},cj={narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},uj=(n,e)=>"ke-"+Number(n),dj={ordinalNumber:uj,era:Rr({values:ij,defaultWidth:"wide"}),quarter:Rr({values:sj,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Rr({values:oj,defaultWidth:"wide"}),day:Rr({values:aj,defaultWidth:"wide"}),dayPeriod:Rr({values:lj,defaultWidth:"wide",formattingValues:cj,defaultFormattingWidth:"wide"})},hj=/^ke-(\d+)?/i,fj=/\d+/i,pj={narrow:/^(sm|m)/i,abbreviated:/^(s\.?\s?m\.?|s\.?\s?e\.?\s?u\.?|m\.?|e\.?\s?u\.?)/i,wide:/^(sebelum masehi|sebelum era umum|masehi|era umum)/i},mj={any:[/^s/i,/^(m|e)/i]},gj={narrow:/^[1234]/i,abbreviated:/^K-?\s[1234]/i,wide:/^Kuartal ke-?\s?[1234]/i},yj={any:[/1/i,/2/i,/3/i,/4/i]},vj={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|mei|jun|jul|agt|sep|okt|nov|des)/i,wide:/^(januari|februari|maret|april|mei|juni|juli|agustus|september|oktober|november|desember)/i},wj={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^ma/i,/^ap/i,/^me/i,/^jun/i,/^jul/i,/^ag/i,/^s/i,/^o/i,/^n/i,/^d/i]},_j={narrow:/^[srkjm]/i,short:/^(min|sen|sel|rab|kam|jum|sab)/i,abbreviated:/^(min|sen|sel|rab|kam|jum|sab)/i,wide:/^(minggu|senin|selasa|rabu|kamis|jumat|sabtu)/i},Ej={narrow:[/^m/i,/^s/i,/^s/i,/^r/i,/^k/i,/^j/i,/^s/i],any:[/^m/i,/^sen/i,/^sel/i,/^r/i,/^k/i,/^j/i,/^sa/i]},Tj={narrow:/^(a|p|tengah m|tengah h|(di(\swaktu)?) (pagi|siang|sore|malam))/i,any:/^([ap]\.?\s?m\.?|tengah malam|tengah hari|(di(\swaktu)?) (pagi|siang|sore|malam))/i},Ij={any:{am:/^a/i,pm:/^pm/i,midnight:/^tengah m/i,noon:/^tengah h/i,morning:/pagi/i,afternoon:/siang/i,evening:/sore/i,night:/malam/i}},Sj={ordinalNumber:N1({matchPattern:hj,parsePattern:fj,valueCallback:n=>parseInt(n,10)}),era:Pr({matchPatterns:pj,defaultMatchWidth:"wide",parsePatterns:mj,defaultParseWidth:"any"}),quarter:Pr({matchPatterns:gj,defaultMatchWidth:"wide",parsePatterns:yj,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Pr({matchPatterns:vj,defaultMatchWidth:"wide",parsePatterns:wj,defaultParseWidth:"any"}),day:Pr({matchPatterns:_j,defaultMatchWidth:"wide",parsePatterns:Ej,defaultParseWidth:"any"}),dayPeriod:Pr({matchPatterns:Tj,defaultMatchWidth:"any",parsePatterns:Ij,defaultParseWidth:"any"})},xj={code:"id",formatDistance:XF,formatLong:tj,formatRelative:rj,localize:dj,match:Sj,options:{weekStartsOn:1,firstWeekContainsDate:1}},j0=10;function Aj({comment:n}){const[e,t]=P.useState(!1),[r,o]=P.useState(n.content),[a,c]=P.useState(!1),[h,f]=P.useState(null),m=Bt.currentUser?.uid===n.userId,v=P.useMemo(()=>{if(!n.createdAt||!m)return!1;const x=uF(n.createdAt,j0);return!QF(x)},[n.createdAt,m,n.id]),_=n.createdAt?pF(new Date,n.createdAt):0,E=Math.max(0,j0-_),S=n.createdAt?KF(n.createdAt,{addSuffix:!0,locale:xj}):"Baru saja",M=async()=>{if(r.trim()===n.content||!r.trim()){t(!1);return}c(!0),f(null);try{await oF(n.id,r),t(!1)}catch(x){console.error("Error mengedit komentar:",x),f(x.message||"Gagal menyimpan edit. Batas waktu 10 menit mungkin telah terlewat.")}finally{c(!1)}};return I.jsxs("div",{className:"flex space-x-4 border-b pb-4 mb-4",children:[I.jsxs(k1,{className:"h-10 w-10 flex-shrink-0",children:[I.jsx(C1,{src:n.userPhotoURL||void 0,alt:n.userName}),I.jsx(b1,{className:"bg-sky-100 text-sky-600",children:n.userName.charAt(0)})]}),I.jsxs("div",{className:"flex-1 min-w-0",children:[I.jsxs("div",{className:"flex items-baseline justify-between",children:[I.jsxs("p",{className:"font-semibold text-gray-900 truncate flex-1",children:[n.userName,m&&I.jsx("span",{className:"ml-2 text-xs font-normal text-sky-500 bg-sky-50 px-2 py-0.5 rounded-full",children:"Anda"})]}),I.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0 ml-4",children:S})]}),e?I.jsxs("div",{className:"mt-2",children:[I.jsx(_1,{value:r,onChange:x=>o(x.target.value),rows:3,className:"resize-none",disabled:a}),h&&I.jsx("p",{className:"text-sm text-red-500 mt-1",children:h}),I.jsxs("div",{className:"flex justify-end space-x-2 mt-2",children:[I.jsxs(fi,{variant:"ghost",size:"sm",onClick:()=>{o(n.content),t(!1)},disabled:a,children:[I.jsx(G0,{className:"h-4 w-4 mr-1"})," Batal"]}),I.jsxs(fi,{size:"sm",onClick:M,disabled:a||!r.trim(),children:[a?I.jsx(Ei,{className:"mr-2 h-4 w-4 animate-spin"}):I.jsx(vA,{className:"mr-2 h-4 w-4"}),"Simpan"]})]})]}):I.jsx("p",{className:"text-gray-700 mt-1 whitespace-pre-wrap",children:n.content}),v&&!e&&I.jsxs("div",{className:"mt-2 text-sm space-x-3 flex items-center",children:[I.jsxs("button",{className:"text-sky-600 hover:text-sky-700 font-medium flex items-center",onClick:()=>t(!0),children:[I.jsx(AA,{className:"h-4 w-4 mr-1"})," Edit"]}),I.jsxs("span",{className:"text-xs text-gray-500",children:["(Sisa waktu: **",E," menit**)"]})]}),m&&!v&&!e&&I.jsx("div",{className:"mt-2 text-sm space-x-3",children:I.jsx("span",{className:"text-xs text-red-500",children:"Batas waktu edit sudah habis."})})]})]})}function kj({attractionId:n}){const[e,t]=P.useState([]),[r,o]=P.useState(""),[a,c]=P.useState(!1),[h,f]=P.useState(null),m=!!Bt.currentUser,v=Bt.currentUser?.photoURL,_=Bt.currentUser?.displayName||Bt.currentUser?.email?.split("@")[0]||"Anonim";P.useEffect(()=>{if(!n)return;const S=sF(n,M=>{t(M)});return()=>S()},[n]);const E=async S=>{if(S.preventDefault(),!(!r.trim()||!m)){c(!0),f(null);try{await iF(n,r.trim()),o("")}catch(M){f(M.message||"Gagal memposting komentar.")}finally{c(!1)}}};return I.jsxs(eF,{className:"mt-8",children:[I.jsxs(tF,{className:"flex flex-row items-center gap-2 pb-3",children:[I.jsx(gA,{className:"h-6 w-6 text-sky-500"}),I.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Ulasan Pengunjung (",e.length,")"]})]}),I.jsxs(nF,{className:"pt-4",children:[I.jsxs("form",{onSubmit:E,className:"mb-8 p-4 border rounded-lg bg-gray-50",children:[I.jsxs("div",{className:"flex items-start space-x-3 mb-3",children:[I.jsxs(k1,{className:"h-9 w-9 flex-shrink-0",children:[I.jsx(C1,{src:v||void 0,alt:_}),I.jsx(b1,{className:"bg-sky-100 text-sky-600",children:_.charAt(0)})]}),I.jsx(_1,{value:r,onChange:S=>o(S.target.value),placeholder:m?"Tulis ulasan Anda tentang destinasi ini...":"Anda harus login untuk menulis ulasan.",rows:3,className:"flex-1 resize-none",disabled:!m||a})]}),h&&I.jsx("p",{className:"text-sm text-red-500 mb-2",children:h}),I.jsx("div",{className:"flex justify-end",children:I.jsxs(fi,{type:"submit",disabled:!m||a||!r.trim(),className:"bg-sky-500 hover:bg-sky-600",children:[a?I.jsx(Ei,{className:"mr-2 h-4 w-4 animate-spin"}):I.jsx(TA,{className:"mr-2 h-4 w-4"}),a?"Mengirim...":"Kirim Ulasan"]})}),!m&&I.jsx("p",{className:"text-sm text-center mt-3 text-gray-500",children:"Silakan login untuk dapat berbagi pengalaman Anda."})]}),I.jsx("div",{className:"space-y-4",children:e.length===0?I.jsx("p",{className:"text-center text-gray-500 py-6",children:"Belum ada ulasan. Jadilah yang pertama berkomentar!"}):e.map(S=>I.jsx(Aj,{comment:S},S.id))})]})]})}function Cj({initialRating:n,onRate:e,isLoading:t,isLoggedIn:r}){const[o,a]=P.useState(0),[c,h]=P.useState(n||0),f=async v=>{if(!(t||!r)){h(v);try{await e(v)}catch(_){console.error("Failed to submit rating:",_),h(n||0)}}},m=Array(5).fill(0).map((v,_)=>{const E=_+1,M=E<=(o||c)?"fill-orange-400 text-orange-400":"text-gray-300";return I.jsx(Sm,{className:`h-7 w-7 transition-colors cursor-pointer ${M}`,onMouseEnter:()=>r&&a(E),onMouseLeave:()=>a(0),onClick:()=>f(E)},_)});return I.jsx("div",{className:"flex items-center gap-1.5 p-4 rounded-lg bg-white shadow-sm border",children:t?I.jsx(Ei,{className:"h-7 w-7 animate-spin text-sky-500 mr-2"}):I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"flex",children:m}),r?I.jsx("span",{className:"text-gray-700 ml-2",children:c>0?`Rating Anda: ${c}/5`:"Beri rating Anda"}):I.jsx("span",{className:"text-gray-500 ml-2 text-sm",children:"Login untuk memberi rating"})]})})}function bj({attractionId:n,countryId:e,onBack:t}){const[r,o]=P.useState(),[a,c]=P.useState(!0),[h,f]=P.useState(null),[m,v]=P.useState(!1),_=!!Bt.currentUser;P.useEffect(()=>{(async()=>{if(!n||!e){c(!1);return}c(!0),v(!0);try{const M=await EM(e,n);if(o(M),_){const x=await z4(n);f(x)}}catch(M){console.error("Gagal mengambil detail atraksi:",M)}finally{c(!1),v(!1)}})()},[n,e,_]);const E=async S=>{v(!0);try{await B4(n,S),f(S)}catch(M){alert(`Gagal menyimpan rating: ${M.message}`)}finally{v(!1)}};return a?I.jsx("div",{className:"flex h-screen w-full items-center justify-center bg-gray-50",children:I.jsx(Ei,{className:"h-12 w-12 animate-spin text-sky-500"})}):r?I.jsxs("div",{className:"min-h-screen bg-gray-50",children:[I.jsxs("div",{className:"relative h-[300px] sm:h-[400px] lg:h-[500px]",children:[I.jsx("img",{src:r.main_image_url,alt:r.name,className:"absolute inset-0 h-full w-full object-cover"}),I.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),I.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 sm:p-6 lg:p-8 flex justify-between items-center z-10",children:[I.jsx(fi,{variant:"secondary",size:"icon",onClick:t,className:"rounded-full shadow-lg h-10 w-10 sm:h-12 sm:w-12 bg-white/90 hover:bg-white text-gray-900 backdrop-blur-sm hover:cursor-pointer",children:I.jsx(md,{className:"h-5 w-5 sm:h-6 sm:w-6"})}),I.jsx(fi,{variant:"secondary",size:"icon",className:"rounded-full shadow-lg h-10 w-10 sm:h-12 sm:w-12 bg-white/90 hover:bg-white text-red-500 backdrop-blur-sm",children:I.jsx(q0,{className:"h-5 w-5 sm:h-6 sm:w-6"})})]}),I.jsxs("div",{className:"absolute bottom-0 left-0 w-full p-4 sm:p-6 lg:p-8 text-white",children:[I.jsx(fm,{variant:"secondary",className:"mb-3 bg-white/20 text-white backdrop-blur-md border-white/30",children:r.type}),I.jsx("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-white shadow-lg",children:r.name}),I.jsxs("div",{className:"flex flex-wrap items-center gap-x-6 gap-y-2 mt-4 text-lg",children:[I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx(td,{className:"h-5 w-5"}),I.jsxs("span",{children:[r.location.city,", ",r.country]})]}),I.jsxs("div",{className:"flex items-center gap-1.5",children:[I.jsx(Sm,{className:"h-5 w-5 fill-yellow-400 text-yellow-400"}),I.jsx("span",{className:"font-bold",children:r.rating_avg.toFixed(1)}),I.jsxs("span",{className:"text-white/80",children:["(",r.rating_count.toLocaleString("id-ID")," ulasan)"]})]})]})]})]}),I.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 lg:py-16",children:I.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 lg:gap-x-12 gap-y-10",children:[I.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[I.jsxs("div",{children:[I.jsx("h2",{className:"text-3xl font-bold tracking-tight text-gray-900 mb-4",children:"Deskripsi"}),I.jsx("p",{className:"text-lg text-gray-700 leading-relaxed",children:r.description})]}),I.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-xl border border-gray-200",children:[I.jsx("h2",{className:"text-2xl font-bold tracking-tight text-gray-900 mb-4",children:"Beri Rating Anda"}),I.jsx(Cj,{initialRating:h,onRate:E,isLoading:m,isLoggedIn:_})]}),I.jsxs("div",{children:[I.jsx("h2",{className:"text-3xl font-bold tracking-tight text-gray-900 mb-5",children:"Aktivitas"}),I.jsx("div",{className:"flex flex-wrap gap-3",children:r.activities.map((S,M)=>I.jsxs(fm,{variant:"outline",className:"text-sky-700 border-sky-300 bg-sky-50 py-1.5 px-4 text-base",children:[I.jsx(PA,{className:"h-4 w-4 mr-2"}),S]},M))})]}),I.jsx("div",{className:"mt-12",children:I.jsx(kj,{attractionId:n})})]}),I.jsx("div",{className:"lg:col-span-1",children:I.jsx("div",{className:"lg:sticky lg:top-28",children:I.jsxs("div",{className:`bg-white rounded-2xl shadow-xl border border-gray-200 
              overflow-hidden divide-y divide-gray-200 
              p-6 sm:p-8 lg:p-10 
              mt-6 lg:mt-0 
              ml-0 lg:ml-6`,children:[I.jsxs("div",{className:"p-6 space-y-4",children:[I.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Info Tiket"}),I.jsx("div",{className:"text-4xl font-bold text-sky-600",children:iS(r.entrance_fee)}),I.jsx(fi,{size:"lg",className:"w-full bg-orange-500 hover:bg-orange-600 text-lg py-6 hover:cursor-pointer",children:"Pesan Tiket"})]}),I.jsxs("div",{className:"p-6 space-y-4",children:[I.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Detail Lokasi"}),I.jsxs("dl",{className:"space-y-3",children:[I.jsxs("div",{className:"flex items-start gap-3",children:[I.jsx(td,{className:"h-5 w-5 text-gray-500 mt-1"}),I.jsxs("div",{className:"text-sm",children:[I.jsx("dt",{className:"font-medium text-gray-900",children:"Alamat"}),I.jsx("dd",{className:"text-gray-600",children:r.location.address})]})]}),I.jsxs("div",{className:"flex items-start gap-3",children:[I.jsx(td,{className:"h-5 w-5 text-gray-500 mt-1"}),I.jsxs("div",{className:"text-sm",children:[I.jsx("dt",{className:"font-medium text-gray-900",children:"Kota"}),I.jsx("dd",{className:"text-gray-600",children:r.location.city})]})]})]})]})]})})})]})})]}):I.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 text-center",children:[I.jsx("h1",{className:"text-2xl mb-4",children:"Destinasi Tidak Ditemukan."}),I.jsxs(fi,{onClick:t,children:[I.jsx(md,{className:"h-5 w-5 mr-2"})," Kembali"]})]})}function Rj({onLoginSuccess:n}){const[e,t]=P.useState(""),[r,o]=P.useState(!1),[a,c]=P.useState({type:"",message:""});P.useEffect(()=>{(async()=>{if(rD(Bt,window.location.href)){const v=window.localStorage.getItem("emailForSignIn");if(!v){c({type:"error",message:"Email tidak ditemukan. Silakan login ulang."});return}try{await iD(Bt,v,window.location.href),window.localStorage.removeItem("emailForSignIn"),n()}catch(_){console.error(_),c({type:"error",message:"Link tidak valid. Silakan kirim ulang."})}}})()},[n]);const h=async m=>{m.preventDefault(),o(!0),c({type:"",message:""});try{const v={url:`${window.location.origin}/login`,handleCodeInApp:!0};await nD(Bt,e,v),window.localStorage.setItem("emailForSignIn",e),c({type:"success",message:"Link login telah dikirim ke emailmu. Cek inbox!"})}catch(v){console.error(v),c({type:"error",message:"Gagal mengirim link. Periksa koneksi atau email."})}finally{o(!1)}},f=async()=>{o(!0),c({type:"",message:""});try{const m=new ui;await AD(Bt,m),n()}catch(m){console.error(m),c({type:"error",message:"Login Google gagal. Coba lagi."})}finally{o(!1)}};return I.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-sky-600 to-sky-800 flex items-center justify-center px-4 relative overflow-hidden",children:[I.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-20",style:{backgroundImage:"url('https://images.unsplash.com/photo-1631684181713-e697596d2165?auto=format&fit=crop&q=80&w=1080')"}}),I.jsxs("div",{className:`relative z-10\r
        bg-white/95 dark:bg-gray-900/90\r
        backdrop-blur-xl\r
        p-8 sm:p-10\r
        rounded-2xl shadow-2xl\r
        w-[90%] sm:w-[85%] md:w-[70%] lg:w-[480px] max-w-lg\r
        animate-fade-in\r
        border border-white/20 dark:border-gray-700`,children:[I.jsxs("div",{className:"text-center mb-8",children:[I.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:["Masuk ke ",I.jsx("span",{className:"text-sky-600 dark:text-sky-400",children:"Tourify"})]}),I.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Mulai petualanganmu sekarang"})]}),a.message&&I.jsx("p",{className:`mb-4 text-center font-medium ${a.type==="error"?"text-red-600":"text-green-600"}`,children:a.message}),I.jsxs("form",{onSubmit:h,className:"mb-6",children:[I.jsx("div",{className:"relative mb-4",children:I.jsx("input",{type:"email",placeholder:"Masukkan emailmu",value:e,onChange:m=>t(m.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg bg-white/60 dark:bg-gray-800/60 text-gray-800 dark:text-gray-100 placeholder-gray-400 focus:border-sky-500 focus:ring-2 focus:ring-sky-300 outline-none transition-all duration-200",required:!0})}),I.jsx(U0,{label:"Kirim Email",loading:r})]}),I.jsx(U0,{label:"Login dengan Google",onClick:f,disabled:r,variant:"secondary",icon:I.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",className:"h-5 w-5"})}),I.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mt-500 text-sm",children:"Belum punya akun? Login akan otomatis membuat akun baru."})]}),r&&I.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-20",children:I.jsx(Ei,{className:"h-10 w-10 text-white animate-spin"})})]})}function U0({label:n,onClick:e,loading:t,disabled:r,variant:o="primary",icon:a}){const c="w-full py-3 rounded-lg transition-all duration-200 flex items-center justify-center gap-2 font-medium shadow-md focus:ring-2 focus:ring-offset-1 active:scale-[0.98]",h=o==="primary"?"bg-sky-500 text-white hover:bg-sky-600 focus:ring-sky-400":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-gray-300 dark:bg-gray-800 dark:text-gray-100 dark:border-gray-700 dark:hover:bg-gray-700",f=r||t?"opacity-70 cursor-not-allowed hover:shadow-none hover:scale-100":"cursor-pointer hover:shadow-lg";return I.jsx("button",{type:e?"button":"submit",onClick:e,disabled:r||t,className:`${c} ${h} ${f}`,children:t?I.jsxs(I.Fragment,{children:[I.jsx(Ei,{className:"h-5 w-5 animate-spin"}),I.jsx("span",{children:"Memproses..."})]}):I.jsxs(I.Fragment,{children:[a&&I.jsx("span",{children:a}),I.jsx("span",{children:n})]})})}function Pj({query:n,onBack:e,onAttractionClick:t}){const[r,o]=P.useState([]),[a,c]=P.useState(!0),[h,f]=P.useState(n),[m,v]=P.useState(new Set);P.useEffect(()=>{(async()=>{c(!0);try{const[M,x]=await Promise.all([IM(h),Sh()]);o(M),v(new Set(x))}catch(M){console.error("Gagal melakukan pencarian:",M),o([])}finally{c(!1)}})()},[h]);const _=S=>{S.trim()&&S.trim()!==h?f(S.trim()):S.trim()||e()},E=async S=>{const M=m.has(S),x=!M;v(C=>{const U=new Set(C);return x?U.add(S):U.delete(S),U});try{await Dg(S,x)}catch(C){console.error("Gagal toggle favorit:",C),alert("Gagal memperbarui status favorit. Anda mungkin perlu login."),v(U=>{const B=new Set(U);return M?B.add(S):B.delete(S),B})}};return I.jsxs("div",{className:"min-h-screen bg-gray-50",children:[I.jsx("div",{className:"bg-white border-b sticky top-0 z-10 shadow-sm",children:I.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4",children:[I.jsxs("div",{className:"flex items-center gap-4",children:[I.jsx(fi,{variant:"ghost",size:"icon",onClick:e,className:"rounded-full flex-shrink-0",children:I.jsx(md,{className:"h-5 w-5"})}),I.jsx(rS,{placeholder:"Cari lagi...",defaultValue:h,onSearch:_,className:"flex-grow max-w-lg"})]}),I.jsxs("div",{className:"mt-4",children:[I.jsxs("h1",{className:"text-gray-900 text-2xl font-bold",children:['Hasil Pencarian untuk: "',h,'"']}),I.jsxs("p",{className:"text-gray-600 text-sm",children:["Ditemukan ",r.length," destinasi"]})]})]})}),I.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:a?I.jsxs("div",{className:"flex items-center justify-center py-20",children:[I.jsx(Ei,{className:"h-8 w-8 animate-spin text-sky-500"}),I.jsx("span",{className:"ml-3 text-lg text-gray-600",children:"Mencari Destinasi..."})]}):r.length>0?I.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:r.map(S=>I.jsx(Og,{attraction:S,onClick:()=>t(S.id,S.country),isFavorite:m.has(S.id),onToggleFavorite:()=>E(S.id)},S.id))}):I.jsxs("div",{className:"text-center py-20 bg-white rounded-lg shadow-lg",children:[I.jsx(aA,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),I.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Maaf, tidak ada hasil yang cocok."}),I.jsx("p",{className:"text-gray-500",children:"Coba kata kunci lain atau periksa ejaan Anda."})]})})]})}function Nj({onLogoutSuccess:n}){const e=async()=>{try{await Bt.signOut(),n()}catch(t){console.error("Gagal logout:",t)}};return I.jsxs("button",{onClick:e,className:"p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors flex items-center gap-1 shadow-md",children:[I.jsx(fA,{className:"h-4 w-4"}),"Logout"]})}function Dj(){const[n,e]=P.useState({type:"login"});P.useEffect(()=>Bt.onAuthStateChanged(h=>{!h&&n.type!=="login"?e({type:"login"}):h&&n.type==="login"&&e({type:"home"})}),[n.type]);const t=c=>{e({type:"list",countryId:c})},r=(c,h)=>{e({type:"detail",attractionId:c,countryId:h})},o=c=>{c.trim()?e({type:"search",query:c}):e({type:"home"})},a=()=>{n.type==="detail"?e({type:"list",countryId:n.countryId}):n.type==="list"&&e({type:"home"})};return I.jsxs("div",{className:"min-h-screen relative",children:[n.type!=="login"&&I.jsx("div",{className:"absolute top-4 right-4 z-50",children:I.jsx(Nj,{onLogoutSuccess:()=>e({type:"login"})})}),n.type==="login"&&I.jsx(Rj,{onLoginSuccess:()=>e({type:"home"})}),n.type==="home"&&I.jsx(pO,{onCountryClick:t,onAttractionClick:r,onSearch:o}),n.type==="list"&&I.jsx(U4,{countryName:n.countryId,onBack:a,onAttractionClick:r}),n.type==="detail"&&I.jsx(bj,{attractionId:n.attractionId,countryId:n.countryId,onBack:a}),n.type==="search"&&I.jsx(Pj,{query:n.query,onBack:()=>e({type:"home"}),onAttractionClick:r})]})}Gx.createRoot(document.getElementById("root")).render(I.jsx(Dj,{}));
